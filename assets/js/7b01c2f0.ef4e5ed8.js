"use strict";(self.webpackChunkbookshell=self.webpackChunkbookshell||[]).push([[2364],{5680:(e,t,r)=>{r.d(t,{xA:()=>i,yg:()=>y});var n=r(6540);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),m=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},i=function(e){var t=m(e.components);return n.createElement(s.Provider,{value:t},e.children)},g="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,i=p(e,["components","mdxType","originalType","parentName"]),g=m(r),c=a,y=g["".concat(s,".").concat(c)]||g[c]||u[c]||l;return r?n.createElement(y,o(o({ref:t},i),{},{components:r})):n.createElement(y,o({ref:t},i))}));function y(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=r.length,o=new Array(l);o[0]=c;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p[g]="string"==typeof e?e:a,o[1]=p;for(var m=2;m<l;m++)o[m]=r[m];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}c.displayName="MDXCreateElement"},645:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>p,toc:()=>m});var n=r(8168),a=(r(6540),r(5680));const l={},o=void 0,p={unversionedId:"Sre/\u9762\u8bd5\u9898/prometheus\u90e8\u7f72\u6587\u6863\u8f93\u51fa",id:"Sre/\u9762\u8bd5\u9898/prometheus\u90e8\u7f72\u6587\u6863\u8f93\u51fa",title:"prometheus\u90e8\u7f72\u6587\u6863\u8f93\u51fa",description:"1\u3001\u4ecb\u7ecd\uff1a",source:"@site/docs/Sre/3-\u9762\u8bd5\u9898/4.prometheus\u90e8\u7f72\u6587\u6863\u8f93\u51fa.md",sourceDirName:"Sre/3-\u9762\u8bd5\u9898",slug:"/Sre/\u9762\u8bd5\u9898/prometheus\u90e8\u7f72\u6587\u6863\u8f93\u51fa",permalink:"/bookshell/docs/Sre/\u9762\u8bd5\u9898/prometheus\u90e8\u7f72\u6587\u6863\u8f93\u51fa",draft:!1,editUrl:"https://shouji1128955.github.io/bookshell/docs/Sre/3-\u9762\u8bd5\u9898/4.prometheus\u90e8\u7f72\u6587\u6863\u8f93\u51fa.md",tags:[],version:"current",lastUpdatedBy:"zhanglaiqiang",lastUpdatedAt:1727765186,formattedLastUpdatedAt:"2024\u5e7410\u67081\u65e5",sidebarPosition:4,frontMatter:{},sidebar:"SreMianshi",previous:{title:"\u76d1\u63a7",permalink:"/bookshell/docs/Sre/\u9762\u8bd5\u9898/\u76d1\u63a7"},next:{title:"\u7f13\u5b58\u670d\u52a1",permalink:"/bookshell/docs/Sre/\u9762\u8bd5\u9898/\u7f13\u5b58\u670d\u52a1"}},s={},m=[{value:"1\u3001\u4ecb\u7ecd\uff1a",id:"1\u4ecb\u7ecd",level:2},{value:"2\u3001Prometheus\u7684\u7279\u6027",id:"2prometheus\u7684\u7279\u6027",level:2},{value:"3\u3001Prometheus\u7684\u7ec4\u4ef6",id:"3prometheus\u7684\u7ec4\u4ef6",level:2},{value:"4\u3001prometheus\u90e8\u7f72",id:"4prometheus\u90e8\u7f72",level:2},{value:"PromQL\u8bed\u8a00",id:"promql\u8bed\u8a00",level:2},{value:"5\u3001back_box_exporter\u76d1\u63a7",id:"5back_box_exporter\u76d1\u63a7",level:2},{value:"10\u3001\u767d\u76d2\u76d1\u63a7\u548c\u9ed1\u76d2\u76d1\u63a7",id:"10\u767d\u76d2\u76d1\u63a7\u548c\u9ed1\u76d2\u76d1\u63a7",level:2},{value:"11\u3001\u5e38\u7528\u6307\u6807\u76d1\u63a7",id:"11\u5e38\u7528\u6307\u6807\u76d1\u63a7",level:2},{value:"11.1 round #\u56db\u820d\u4e94\u5165\u53d6\u6574",id:"111-round-\u56db\u820d\u4e94\u5165\u53d6\u6574",level:5},{value:"11.2 topk \u51fd\u6570",id:"112-topk-\u51fd\u6570",level:5},{value:"11.3 avg_over_time",id:"113-avg_over_time",level:5},{value:"11.4 sort_desc \u4ece\u5927\u5230\u5c0f\u6392\u5e8f",id:"114-sort_desc-\u4ece\u5927\u5230\u5c0f\u6392\u5e8f",level:5},{value:"11.5 sort \u4ece\u5c0f\u5230\u5927\u6392\u5e8f",id:"115-sort-\u4ece\u5c0f\u5230\u5927\u6392\u5e8f",level:5},{value:"11.6  0 OR on() vector(0) \u5982\u4f55\u5bf9\u63a7\u5236\u8bbe\u7f6e\u4e3a0",id:"116--0-or-on-vector0-\u5982\u4f55\u5bf9\u63a7\u5236\u8bbe\u7f6e\u4e3a0",level:5},{value:"12\u3001alertmanager-routing-tree-editor",id:"12alertmanager-routing-tree-editor",level:2},{value:"13\u3001prometheus  \u76d1\u63a7\u8fde\u63a5\u6570",id:"13prometheus--\u76d1\u63a7\u8fde\u63a5\u6570",level:2},{value:"1\u3001\u5b9e\u73b0\u7cfb\u7edf\u7ea7\u522b\u7684\u8fde\u63a5\u6570\u76d1\u63a7",id:"1\u5b9e\u73b0\u7cfb\u7edf\u7ea7\u522b\u7684\u8fde\u63a5\u6570\u76d1\u63a7",level:4},{value:"2\u3001tomcat\u76d1\u63a7",id:"2tomcat\u76d1\u63a7",level:4},{value:"14\u3001\u6309\u7167\u7b49\u7ea7\u8fdb\u884c\u544a\u8b66",id:"14\u6309\u7167\u7b49\u7ea7\u8fdb\u884c\u544a\u8b66",level:2},{value:"15\u3001windows_exporter\u76d1\u63a7",id:"15windows_exporter\u76d1\u63a7",level:2},{value:"\u76f8\u5173\u94fe\u63a5",id:"\u76f8\u5173\u94fe\u63a5",level:2}],i={toc:m},g="wrapper";function u(e){let{components:t,...r}=e;return(0,a.yg)(g,(0,n.A)({},i,r,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("h2",{id:"1\u4ecb\u7ecd"},"1\u3001\u4ecb\u7ecd\uff1a"),(0,a.yg)("p",null,"\u4ecb\u7ecd\u76f8\u5173\uff1a ",(0,a.yg)("a",{parentName:"p",href:"https://z.itpub.net/article/detail/362B4F22826584EA1D15C840CFB0FCDE"},"https://z.itpub.net/article/detail/362B4F22826584EA1D15C840CFB0FCDE")),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://link.segmentfault.com/?enc=RuMPLSf4T%2BVsif7sO90%2B4A%3D%3D.DvF2XHwezjEJHn2BjYz2Q%2FLjD72dEu0yoJSm08gUc06DF9JELFeTPAqyvIj4q4FTMIplELzuD4Eh13aF%2FpDC8pgIJXW7M8uS4cjU%2F0v1KH1yqJ%2F%2BFpRkpyH%2BOR7lQ%2FD2tAdkC0EVh5Ci0eU%2Bdy5YY%2FgBkl1MptM%2B8s9RhWl2WxJCFbON8W4WgwBt%2Fdm8cmHQABfdG1I3DdLBs0KH9Wf9rzuEubGUQb5J3xLoOQlXv3vVoqplJJ5hMb6NFaswqG9E5Y5M0vdgziL0RUYoOW6k4APpVBGaZqynWMgqkxF%2FwYTnFRbTNGfEXCG4dhwTNImZ"},"Prometheus"),"\u7684\u57fa\u672c\u539f\u7406\u662f\u901a\u8fc7HTTP\u534f\u8bae\u5468\u671f\u6027\u6293\u53d6\u88ab\u76d1\u63a7\u7ec4\u4ef6\u7684\u72b6\u6001\uff0c\u4efb\u610f\u7ec4\u4ef6\u53ea\u8981\u63d0\u4f9b\u5bf9\u5e94\u7684HTTP\u63a5\u53e3\u5c31\u53ef\u4ee5\u63a5\u5165\u76d1\u63a7\u3002\u4e0d\u9700\u8981\u4efb\u4f55SDK\u6216\u8005\u5176\u4ed6\u7684\u96c6\u6210\u8fc7\u7a0b\u3002\u8fd9\u6837\u505a\u975e\u5e38\u9002\u5408\u505a\u865a\u62df\u5316\u73af\u5883\u76d1\u63a7\u7cfb\u7edf\uff0c\u6bd4\u5982VM\u3001Docker\u3001Kubernetes\u7b49\u3002\u8f93\u51fa\u88ab\u76d1\u63a7\u7ec4\u4ef6\u4fe1\u606f\u7684HTTP\u63a5\u53e3\u88ab\u53eb\u505aexporter \u3002\u76ee\u524d\u4e92\u8054\u7f51\u516c\u53f8\u5e38\u7528\u7684\u7ec4\u4ef6\u5927\u90e8\u5206\u90fd\u6709exporter\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\uff0c\u6bd4\u5982Varnish\u3001Haproxy\u3001Nginx\u3001MySQL\u3001Linux\u7cfb\u7edf\u4fe1\u606f(\u5305\u62ec\u78c1\u76d8\u3001\u5185\u5b58\u3001CPU\u3001\u7f51\u7edc\u7b49\u7b49)\u3002"),(0,a.yg)("p",null,"\u5176\u5927\u6982\u7684\u5de5\u4f5c\u6d41\u7a0b\u662f\uff1a"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Prometheus server \u5b9a\u671f\u4ece\u914d\u7f6e\u597d\u7684 jobs \u6216\u8005 exporters \u4e2d\u62c9 metrics\uff0c\u6216\u8005\u63a5\u6536\u6765\u81ea Pushgateway \u53d1\u8fc7\u6765\u7684 metrics\uff0c\u6216\u8005\u4ece\u5176\u4ed6\u7684 Prometheus server \u4e2d\u62c9 metrics\u3002"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://link.segmentfault.com/?enc=QAddnJwzIiGbY4UQ1BACrg%3D%3D.Azj0GiamA%2BjemgvsvUu9BAOkoO0eqYmY%2Fzq0toOlQz73bplTEd7UsCidmrUH5Xs8pgdWgiC9fscTwVU%2BGiM1ZhGABFNmiFvwZUtHADB9N0%2B2l6Y5VSAS4IvJLRnPGLPPRl%2BCjrXKfILOmmwX%2FEYbo7os0pP34Q%2FftPx%2Biz53qa4wdpSADyH6uMaWJDc33%2FJC4icg4i%2BbwRfSnd0LEDz%2F2AvXwNBIuiepKbTOZ01dhd0Uc1GfzGT%2FVU4fcEbAh%2FWNVY3iWSuZyy0WZqDZDVbU1AeyDh%2Bmlm4WIsTGL1TWpCweI52BUYBPBt5%2BrFQQItN6"},"Prometheus")," server \u5728\u672c\u5730\u5b58\u50a8\u6536\u96c6\u5230\u7684 metrics\uff0c\u5e76\u8fd0\u884c\u5df2\u5b9a\u4e49\u597d\u7684 alert.rules\uff0c\u8bb0\u5f55\u65b0\u7684\u65f6\u95f4\u5e8f\u5217\u6216\u8005\u5411 Alertmanager \u63a8\u9001\u8b66\u62a5\u3002"),(0,a.yg)("li",{parentName:"ul"},"Alertmanager \u6839\u636e\u914d\u7f6e\u6587\u4ef6\uff0c\u5bf9\u63a5\u6536\u5230\u7684\u8b66\u62a5\u8fdb\u884c\u5904\u7406\uff0c\u53d1\u51fa\u544a\u8b66\u3002"),(0,a.yg)("li",{parentName:"ul"},"\u5728Grafana\u56fe\u5f62\u754c\u9762\u4e2d\uff0c\u53ef\u89c6\u5316\u67e5\u770b\u91c7\u96c6\u6570\u636e")),(0,a.yg)("h2",{id:"2prometheus\u7684\u7279\u6027"},"2\u3001Prometheus\u7684\u7279\u6027"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"\u591a\u7ef4\u5ea6\u6570\u636e\u6a21\u578b\u3002"),(0,a.yg)("li",{parentName:"ul"},"\u7075\u6d3b\u7684\u67e5\u8be2\u8bed\u8a00\u3002"),(0,a.yg)("li",{parentName:"ul"},"\u4e0d\u4f9d\u8d56\u5206\u5e03\u5f0f\u5b58\u50a8\uff0c\u5355\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u662f\u81ea\u4e3b\u7684\u3002"),(0,a.yg)("li",{parentName:"ul"},"\u901a\u8fc7\u57fa\u4e8eHTTP\u7684pull\u65b9\u5f0f\u91c7\u96c6\u65f6\u5e8f\u6570\u636e\u3002"),(0,a.yg)("li",{parentName:"ul"},"\u53ef\u4ee5\u901a\u8fc7\u4e2d\u95f4\u7f51\u5173\u8fdb\u884c\u65f6\u5e8f\u5217\u6570\u636e\u63a8\u9001\u3002"),(0,a.yg)("li",{parentName:"ul"},"\u901a\u8fc7\u670d\u52a1\u53d1\u73b0\u6216\u8005\u9759\u6001\u914d\u7f6e\u6765\u53d1\u73b0\u76ee\u6807\u670d\u52a1\u5bf9\u8c61\u3002"),(0,a.yg)("li",{parentName:"ul"},"\u652f\u6301\u591a\u79cd\u591a\u6837\u7684\u56fe\u8868\u548c\u754c\u9762\u5c55\u793a\uff0c\u6bd4\u5982Grafana\u7b49\u3002")),(0,a.yg)("h2",{id:"3prometheus\u7684\u7ec4\u4ef6"},"3\u3001Prometheus\u7684\u7ec4\u4ef6"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Prometheus Server \u4e3b\u8981\u8d1f\u8d23\u6570\u636e\u91c7\u96c6\u548c\u5b58\u50a8\uff0c\u63d0\u4f9bPromQL\u67e5\u8be2\u8bed\u8a00\u7684\u652f\u6301\u3002"),(0,a.yg)("li",{parentName:"ul"},"Alertmanager \u8b66\u544a\u7ba1\u7406\u5668\uff0c\u7528\u6765\u8fdb\u884c\u62a5\u8b66\u3002"),(0,a.yg)("li",{parentName:"ul"},"Push Gateway \u652f\u6301\u4e34\u65f6\u6027Job\u4e3b\u52a8\u63a8\u9001\u6307\u6807\u7684\u4e2d\u95f4\u7f51\u5173\u3002"),(0,a.yg)("li",{parentName:"ul"},"Exporters \u8f93\u51fa\u88ab\u76d1\u63a7\u7ec4\u4ef6\u4fe1\u606f\u7684HTTP\u63a5\u53e3\u3002"),(0,a.yg)("li",{parentName:"ul"},"Grafana \u76d1\u63a7\u6570\u636e\u5c55\u793aWeb UI\u3002")),(0,a.yg)("p",null,"Prometheus \u652f\u6301\u591a\u79cd\u670d\u52a1\u53d1\u73b0\u673a\u5236\uff0c\u53ef\u4ee5\u81ea\u52a8\u83b7\u53d6\u8981\u6536\u96c6\u7684 targets\uff0c\u5305\u542b\u7684\u670d\u52a1\u53d1\u73b0\u673a\u5236\u5305\u62ec\uff1aazure\u3001consul\u3001dns\u3001ec2\u3001openstack\u3001file\u3001gce\u3001kubernetes\u3001marathon\u3001triton\u3001zookeeper\uff08nerve\u3001serverset\uff09\uff0c\u914d\u7f6e\u65b9\u6cd5\u53ef\u4ee5\u53c2\u8003\u624b\u518c\u7684\u914d\u7f6e\u9875\u9762\u3002\u53ef\u4ee5\u8bf4 SD \u673a\u5236\u662f\u975e\u5e38\u4e30\u5bcc\u7684\uff0c\u4f46\u76ee\u524d\u7531\u4e8e\u5f00\u53d1\u8d44\u6e90\u6709\u9650\uff0c\u5df2\u7ecf\u4e0d\u518d\u5f00\u53d1\u65b0\u7684 SD \u673a\u5236\uff0c\u53ea\u5bf9\u57fa\u4e8e\u6587\u4ef6\u7684 SD \u673a\u5236\u8fdb\u884c\u7ef4\u62a4\u3002\u9488\u5bf9\u6211\u4eec\u73b0\u6709\u7684\u7cfb\u7edf\u60c5\u51b5\uff0c\u6211\u4eec\u9009\u62e9\u4e86\u9759\u6001\u914d\u7f6e\u65b9\u5f0f\u3002"),(0,a.yg)("p",null,"\u4f7f\u7528docker\u90e8\u7f72\u5b98\u65b9\u53c2\u8003\u6587\u6863\uff1a "),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://github.com/prometheus/prometheus"},"https://github.com/prometheus/prometheus")),(0,a.yg)("h2",{id:"4prometheus\u90e8\u7f72"},"4\u3001prometheus\u90e8\u7f72"),(0,a.yg)("p",null,"\u81ea\u5b9a\u4e49prometheus\u955c\u50cf"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},'[root@loaclhost data]# ls -l\ntotal 71384\ndrwxrwxrwx 3 root root       45 Nov  3 19:52 alertmanager\n-rw-r--r-- 1 root root      526 Nov  3 17:59 Dockerfile\ndrwxr-xr-x 5 root root      144 Nov  3 18:28 prometheus\n-rw-r--r-- 1 root root 73091480 Nov  3 16:31 prometheus-2.31.0.linux-amd64.tar.gz\n[root@loaclhost data]# cat Dockerfile \nFROM  centos:centos7\nADD prometheus-2.31.0.linux-amd64.tar.gz /\nRUN  ln -snf /usr/share/zoneinfo/Asia/Shanghai   /etc/localtime  &&  mv  prometheus-2.31.0.linux-amd64 prometheus\nWORKDIR  /prometheus\nENTRYPOINT ["/prometheus/prometheus"]\nCMD        [ "--config.file=/prometheus/prometheus.yml", \\\n             "--storage.tsdb.path=/prometheus/data", \\\n             "--web.console.libraries=/prometheus/console_libraries", \\\n             "--web.enable-lifecycle", \\\n             "--web.console.templates=/prometheus/consoles" ]\n\n#\u8bf4\u660e\uff0c\u521b\u5efa\u955c\u50cf\u4f7f\u7528 docker build -t myprometheus:1 . \n')),(0,a.yg)("p",null,"\u90e8\u7f72prometheus"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"1\u3001\u521b\u5efaprometheus\u4fdd\u5b58\u6587\u4ef6\u7684\u6570\u636e\u76ee\u5f55\nmkdir -p /data/prometheus\n\n2\u3001\u521b\u5efaprometheus\u5bb9\u5668\ndocker run -d   --restart=always  --name prometheus   -p 9090:9090   myprometheus:1\n\n3\u3001\u62f7\u8d1dprometheus\u7684\u914d\u7f6e\u6587\u6863\ndocker cp prometheus:/prometheus/  /data/prometheus\n\n4\u3001\u542f\u52a8prometheus\u5bb9\u5668\ndocker run -d   --restart=always  --name prometheus   -p 9090:9090  -v /data/prometheus:/prometheus  myprometheus:1\n")),(0,a.yg)("p",null,"\u90e8\u7f72alertmanager\u670d\u52a1"),(0,a.yg)("p",null,"\u53c2\u8003\u5b98\u65b9\uff1a  ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/prometheus/alertmanager"},"https://github.com/prometheus/alertmanager")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"1\u3001\u521b\u5efa\u76ee\u5f55\nmkdir -p /data/alertmanager /data/alertmanager/storage\n\n2\u3001\u542f\u52a8\u5bb9\u5668\ndocker run -d   -p 9093:9093   --name alertmanager   --restart=always   -v /etc/localtime:/etc/localtime   -v /data/alertmanager/storage:/alertmanager   prom/alertmanager\n\n3\u3001\u62f7\u8d1d\u5bb9\u5668\u4e2d\u7684alertmanager.yml\u6587\u4ef6\n docker cp alertmanager:/etc/alertmanager/alertmanager.yml /data/alertmanager\n\n4\u3001\u5bf9alertmanager.yml\u6587\u4ef6\u8fdb\u884c\u6302\u8f7d\ndocker run -d   -p 9093:9093   --name alertmanager   --restart=always   -v /etc/localtime:/etc/localtime   -v /data/alertmanager:/etc/alertmanager   -v /data/alertmanager/storage:/alertmanager   prom/alertmanager\n")),(0,a.yg)("p",null,"prometheus\u6dfb\u52a0alertmanager\u5730\u5740"),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/operator/image-20211103201601827.png",alt:"image-20211103201601827"})),(0,a.yg)("p",null,"\u6dfb\u52a0\u4e4b\u540e \u53c2\u8003\u5982\u4e0b\uff1a "),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/operator/image-20211103201620941.png",alt:"image-20211103201620941"})),(0,a.yg)("p",null,"Node_exporter\u5b89\u88c5"),(0,a.yg)("p",null,"1\u3001wget  ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/prometheus/node_exporter/releases/download/v1.2.2/node_exporter-1.2.2.linux-amd64.tar.gz"},"https://github.com/prometheus/node_exporter/releases/download/v1.2.2/node_exporter-1.2.2.linux-amd64.tar.gz")),(0,a.yg)("p",null,"2\u3001\u4e0b\u8f7d\u4e4b\u540e cd   node_exporter-xxx    && nohup  ./node_exporter\u8fd0\u884c\u5373\u53ef"),(0,a.yg)("p",null,"3\u3001 \u5728prometheus.yml\u4e2d\u6307\u5b9a\u6dfb\u52a0\u7684\u8282\u70b9 "),(0,a.yg)("p",null,"\u9489\u9489\u63d2\u4ef6\u5b98\u65b9\u5b89\u88c5\u94fe\u63a5\uff1a "),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://github.com/timonwong/prometheus-webhook-dingtalk/releases"},"https://github.com/timonwong/prometheus-webhook-dingtalk/releases")),(0,a.yg)("h2",{id:"promql\u8bed\u8a00"},"PromQL\u8bed\u8a00"),(0,a.yg)("p",null,"PromQL\u662fPrometheus\u81ea\u5b9a\u4e49\u7684\u4e00\u5957\u5f3a\u5927\u7684\u6570\u636e\u67e5\u8be2\u8bed\u8a00\uff0c\u9664\u4e86\u4f7f\u7528\u76d1\u63a7\u6307\u6807\u4f5c\u4e3a\u67e5\u8be2\u5173\u952e\u5b57\u4ee5\u4e3a\uff0c\u8fd8\u5185\u7f6e\u4e86\u5927\u91cf\u7684\u51fd\u6570\uff0c\u5e2e\u52a9\u7528\u6237\u8fdb\u4e00\u6b65\u5bf9\u65f6\u5e8f\u6570\u636e\u8fdb\u884c\u5904\u7406\u3002\u4f8b\u5982\u4f7f\u7528",(0,a.yg)("inlineCode",{parentName:"p"},"rate()"),"\u51fd\u6570\uff0c\u53ef\u4ee5\u8ba1\u7b97\u5728\u5355\u4f4d\u65f6\u95f4\u5185\u6837\u672c\u6570\u636e\u7684\u53d8\u5316\u60c5\u51b5\u5373\u589e\u957f\u7387\uff0c\u56e0\u6b64\u901a\u8fc7\u8be5\u51fd\u6570\u6211\u4eec\u53ef\u4ee5\u8fd1\u4f3c\u7684\u901a\u8fc7CPU\u4f7f\u7528\u65f6\u95f4\u8ba1\u7b97CPU\u7684\u5229\u7528\u7387\uff1a"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"")),(0,a.yg)("p",null,"\u67e5\u770bnode\u662f\u5426\u542f\u52a8\uff1a"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},'up{instance="192.168.100.232:9100",job="Host-test-232"}  #\u8fc7\u6ee4\n')),(0,a.yg)("p",null,"\u53c2\u8003\u6587\u6863\uff1a "),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://yunlzheng.gitbook.io/prometheus-book/parti-prometheus-ji-chu/promql/prometheus-promql-operators-v2"},"https://yunlzheng.gitbook.io/prometheus-book/parti-prometheus-ji-chu/promql/prometheus-promql-operators-v2")),(0,a.yg)("p",null,"\u9489\u9489\u6d4b\u8bd5\u53d1\u9001\u6d88\u606f\uff1a"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'curl  https://oapi.dingtalk.com/robot/send?access_token=d79446f315feb6b0207870151d8146f65b18fe262af19d661787408ab24ad56   -H \'Content-Type: application/json\' \\\n -d \'{"msgtype": "text","text": {"content":"\u6211\u5c31\u662f\u6211, \u662f\u4e0d\u4e00\u6837\u7684\u70df\u706b"}}\'\n')),(0,a.yg)("p",null,"\u91cd\u8f7dprometheus\u7684\u914d\u7f6e\u6587\u4ef6"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"curl -XPOST  http://10.51.8.110:9090/-/reload\n")),(0,a.yg)("h2",{id:"5back_box_exporter\u76d1\u63a7"},"5\u3001back_box_exporter\u76d1\u63a7"),(0,a.yg)("h4",{id:""}),(0,a.yg)("p",null,"\u76ee\u524d\u5728\u4f7f\u7528\u7684TCP\uff0cICMP\uff0cHTTPS\u670d\u52a1\u72b6\u6001\u76d1\u63a7 Prometheus Blackbox Exporter\uff0c\u5728\u4e00\u4e2a\u770b\u677f\u91cc\u9762\u5c55\u793a\uff0c\u505a\u4e86\u5c55\u793a\u6548\u679c\u7684\u4f18\u5316\uff0c\u652f\u6301\u591a\u670d\u52a1\u540c\u65f6\u5c55\u793a\uff0c\u9700\u8981\u4f7f\u7528\u7684\u53ef\u4ee5\u53c2\u8003\u4e0b\uff0c\u8bb0\u5f97\u6839\u636e\u81ea\u5df1\u7684\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\u4e0b\u53d8\u91cf\u3002"),(0,a.yg)("p",null,"blackbox_exporter\u662fPrometheus \u5b98\u65b9\u63d0\u4f9b\u7684 exporter \u4e4b\u4e00\uff0c\u53ef\u4ee5\u63d0\u4f9b http\u3001dns\u3001tcp\u3001icmp \u7684\u76d1\u63a7\u6570\u636e\u91c7\u96c6\u3002"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"blackbox_exporter \u5e94\u7528\u573a\u666f\uff1a")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"HTTP \u6d4b\u8bd5\uff1a")," \u5b9a\u4e49 Request Header \u4fe1\u606f\uff0c\u5224\u65ad Http status / Http Respones Header / Http Body \u5185\u5bb9"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"TCP \u6d4b\u8bd5\uff1a"),"\u4e1a\u52a1\u7ec4\u4ef6\u7aef\u53e3\u72b6\u6001\u76d1\u542c\uff0c \u5e94\u7528\u5c42\u534f\u8bae\u5b9a\u4e49\u4e0e\u76d1\u542c"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"ICMP \u6d4b\u8bd5\uff1a"),"\u4e3b\u673a\u63a2\u6d3b\u673a\u5236"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"POST \u6d4b\u8bd5\uff1a"),"\u63a5\u53e3\u8054\u901a\u6027"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"SSL \u8bc1\u4e66\u8fc7\u671f\u65f6\u95f4"))),(0,a.yg)("p",null,"\u5b89\u88c5blackbox_exporter"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"# wget https://github.com/prometheus/blackbox_exporter/releases/download/v0.16.0/blackbox_exporter-0.16.0.linux-amd64.tar.gz\n\n# tar xf blackbox_exporter-0.16.0.linux-amd64.tar.gz -C /usr/local/\n# ln -s /usr/local/blackbox_exporter-0.16.0.linux-amd64/ /usr/local/blackbox_exporter\n\n# \u4f7f\u7528systemd\u7ba1\u7406blackbox_exporter\u670d\u52a1\n# vim /usr/lib/systemd/system/blackbox_exporter.service\n[Unit]\nDescription=blackbox_exporter\nAfter=network.target\n\n[Service]\nUser=root\nType=simple\nExecStart=/usr/local/blackbox_exporter/blackbox_exporter --config.file=/usr/local/blackbox_exporter/blackbox.yml\nRestart=on-failure\n\n[Install]\nWantedBy=multi-user.target\n\n# systemctl daemon-reload\n# systemctl start blackbox_exporter\n# systemctl enable blackbox_exporter\n")),(0,a.yg)("p",null,"\u6a21\u677f\u4e0b\u8f7d\u5730\u5740\uff1a  ",(0,a.yg)("a",{parentName:"p",href:"https://grafana.com/grafana/dashboards/9965"},"https://grafana.com/grafana/dashboards/9965")),(0,a.yg)("p",null,"grafana\u63d2\u4ef6\u5b89\u88c5\u5730\u5740\uff1a "),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"docker exec -it  grafana /bin/sh \ngrafana-cli plugins install grafana-piechart-panel\n")),(0,a.yg)("p",null,"\u76f8\u5173\u76d1\u63a7\u6307\u6807\u53c2\u8003\uff1a "),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"1\u3001probe_success \u6307\u6807\u53ef\u4ee5\u5224\u65ad\u6211\u4eec\u7684 icmp\u3001tcp\u3001http\u3001post \u76d1\u6d4b\u662f\u5426\u6b63\u5e38\u3002\u503c\u4e3a 1 \u6b63\u5e38\uff0c0\u4e0d\u6b63\u5e38\u3002 \n2\u3001probe_http_status_code \u6307\u6807\u53ef\u4ee5\u77e5\u9053\u67d0\u4e2ahttp\u8bf7\u6c42\u8fd4\u56de\u7684\u54cd\u5e94\u7801\u3002\n3\u3001probe_ssl_earliest_cert_expiry \u6307\u6807\u53ef\u4ee5\u77e5\u9053ssl\u8bc1\u4e66\u4f55\u65f6\u8fc7\u671f\u3002\n")),(0,a.yg)("h4",{id:"-1"}),(0,a.yg)("p",null,"6\u3001\u5e38\u89c1\u51fd\u6570 "),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("p",{parentName:"li"},"round "),(0,a.yg)("p",{parentName:"li"},"#counter\u7c7b\u578b\uff0c\u7edf\u8ba1\u5404\u4e2a\u7f51\u5361\u7684\u5165\u6d41\u91cf  node_network_receive_bytes_total   "))),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'\u7edf\u8ba1\u67d0\u4e00\u4e2a\u8282\u70b9\nround((irate(node_network_receive_bytes_total{instance="172.17.224.119"}[1m]) / 1048576  ),0.001)\n\n\u7edf\u8ba1\u6240\u6709\u8282\u70b9\u7684\u7f51\u5361\u5165\u6d41\u91cf\u5927\u4e8e20M \nround((irate(node_network_receive_bytes_total{device!="lo"}[1m]) / 1048576  ),0.001) > 20\n')),(0,a.yg)("p",null,"\u4f7f\u7528round\u53ef\u4ee5\u7cbe\u786e\u5230\u540e\u4e09\u4f4d\u3002"),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/operator/image-20220114201924748.png",alt:"image-20220114201924748"})),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'#\u8282\u70b9\u7f51\u5361\u51fa\u6d41\u91cf\u8d85\u8fc78M\nround((irate(node_network_transmit_bytes_total{device!="lo"}[1m]) / 1048576  ),0.001) > 8\n')),(0,a.yg)("h2",{id:"10\u767d\u76d2\u76d1\u63a7\u548c\u9ed1\u76d2\u76d1\u63a7"},"10\u3001\u767d\u76d2\u76d1\u63a7\u548c\u9ed1\u76d2\u76d1\u63a7"),(0,a.yg)("p",null,"\u6211\u4eec\u76d1\u63a7\u4e3b\u673a\u7684\u8d44\u6e90\u7528\u91cf\u3001\u5bb9\u5668\u7684\u8fd0\u884c\u72b6\u6001\u3001\u6570\u636e\u5e93\u4e2d\u95f4\u4ef6\u7684\u8fd0\u884c\u6570\u636e\u3002\u8fd9\u4e9b\u90fd\u662f\u652f\u6301\u4e1a\u52a1\u548c\u670d\u52a1\u7684\u57fa\u7840\u8bbe\u65bd\uff0c\u901a\u8fc7\u767d\u76d2\u80fd\u591f\u4e86\u89e3\u5176\u5185\u90e8\u7684\u5b9e\u9645\u8fd0\u884c\u72b6\u6001\uff0c\u901a\u8fc7\u5bf9\u76d1\u63a7\u6307\u6807\u7684\u89c2\u5bdf\u80fd\u591f\u9884\u5224\u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898\uff0c\u4ece\u800c\u5bf9\u6f5c\u5728\u7684\u4e0d\u786e\u5b9a\u56e0\u7d20\u8fdb\u884c\u4f18\u5316\u3002\u800c\u4ece\u5b8c\u6574\u7684\u76d1\u63a7\u903b\u8f91\u7684\u89d2\u5ea6\uff0c\u9664\u4e86\u5927\u91cf\u7684\u5e94\u7528\u767d\u76d2\u76d1\u63a7\u4ee5\u5916\uff0c\u8fd8\u5e94\u8be5\u6dfb\u52a0\u9002\u5f53\u7684\u9ed1\u76d2\u76d1\u63a7\u3002\u9ed1\u76d2\u76d1\u63a7\u5373\u4ee5\u7528\u6237\u7684\u8eab\u4efd\u6d4b\u8bd5\u670d\u52a1\u7684\u5916\u90e8\u53ef\u89c1\u6027\uff0c\u5e38\u89c1\u7684\u9ed1\u76d2\u76d1\u63a7\u5305\u62ecHTTP\u63a2\u9488\u3001TCP\u63a2\u9488\u7b49\u7528\u4e8e\u68c0\u6d4b\u7ad9\u70b9\u6216\u8005\u670d\u52a1\u7684\u53ef\u8bbf\u95ee\u6027\uff0c\u4ee5\u53ca\u8bbf\u95ee\u6548\u7387\u7b49\u3002"),(0,a.yg)("p",null,"\u9ed1\u76d2\u76d1\u63a7\u76f8\u8f83\u4e8e\u767d\u76d2\u76d1\u63a7\u6700\u5927\u7684\u4e0d\u540c\u5728\u4e8e\u9ed1\u76d2\u76d1\u63a7\u662f\u4ee5\u6545\u969c\u4e3a\u5bfc\u5411\u5f53\u6545\u969c\u53d1\u751f\u65f6\uff0c\u9ed1\u76d2\u76d1\u63a7\u80fd\u5feb\u901f\u53d1\u73b0\u6545\u969c\uff0c\u800c\u767d\u76d2\u76d1\u63a7\u5219\u4fa7\u91cd\u4e8e\u4e3b\u52a8\u53d1\u73b0\u6216\u8005\u9884\u6d4b\u6f5c\u5728\u7684\u95ee\u9898\u3002\u4e00\u4e2a\u5b8c\u5584\u7684\u76d1\u63a7\u76ee\u6807\u662f\u8981\u80fd\u591f\u4ece\u767d\u76d2\u7684\u89d2\u5ea6\u53d1\u73b0\u6f5c\u5728\u95ee\u9898\uff0c\u80fd\u591f\u5728\u9ed1\u76d2\u7684\u89d2\u5ea6\u5feb\u901f\u53d1\u73b0\u5df2\u7ecf\u53d1\u751f\u7684\u95ee\u9898\u3002"),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/operator/image-20211110104346812.png",alt:"image-20211110104346812"})),(0,a.yg)("p",null,"11\u3001\u81ea\u5b9a\u4e49\u6a21\u677f"),(0,a.yg)("p",null,"\u5b98\u65b9\u8fde\u63a5\uff1a ",(0,a.yg)("a",{parentName:"p",href:"https://prometheus.io/docs/alerting/latest/notifications/#aler"},"https://prometheus.io/docs/alerting/latest/notifications/#aler")),(0,a.yg)("p",null,"\u538b\u529b\u6d4b\u8bd5:    "),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"stress  -c  1 -m  1  -d 1  -t   3500\n")),(0,a.yg)("p",null,"\u544a\u8b66\u6a21\u677f\u914d\u7f6e\u8be6\u60c5"),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/operator/image-20220111095525131.png",alt:"image-20220111095525131"})),(0,a.yg)("p",null,"alertmanager\u4e3b\u9898\u914d\u7f6e\u6a21\u677f\u53c2\u8003"),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/operator/image-20220111095323334.png",alt:"image-20220111095323334"})),(0,a.yg)("p",null,"\u8bed\u6cd5\u68c0\u67e5"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"alertmanager: \n docker exec alertmanager amtool check-config /etc/alertmanager/alertmanager.yml\namtool check-config  alertmanager.yml \n\n")),(0,a.yg)("h2",{id:"11\u5e38\u7528\u6307\u6807\u76d1\u63a7"},"11\u3001\u5e38\u7528\u6307\u6807\u76d1\u63a7"),(0,a.yg)("p",null,"\u975e\u5e38\u597d\u7684\u5b66\u4e60\u7f51\u5740\uff1a "),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://www.kancloud.cn/pshizhsysu/prometheus/1803793"},"https://www.kancloud.cn/pshizhsysu/prometheus/1803793")),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://www.zhukun.net/archives/8285"},"https://www.zhukun.net/archives/8285")),(0,a.yg)("h5",{id:"111-round-\u56db\u820d\u4e94\u5165\u53d6\u6574"},"11.1 round #\u56db\u820d\u4e94\u5165\u53d6\u6574"),(0,a.yg)("p",null,"\u6709\u4e24\u4e2a\u4f5c\u7528\uff1a"),(0,a.yg)("p",null,"\u7b2c\u4e00\u53d6\u6574\u6570"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},'round(avg_over_time(node_netstat_Tcp_CurrEstab{instance=~"172.17.224.51"}[4h]))\n')),(0,a.yg)("p",null,"\u7b2c\u4e8c\u4fdd\u7559\u5c0f\u6570\u4f4d\u540e\u4e09\u4f4d"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},'round(avg_over_time(node_netstat_Tcp_CurrEstab{instance=~"172.17.224.51"}[4h]),0.001)\n')),(0,a.yg)("h5",{id:"112-topk-\u51fd\u6570"},"11.2 topk \u51fd\u6570"),(0,a.yg)("p",null,"topk  \uff08\u7edf\u8ba1\u6700\u5927\u7684\u51e0\u4e2a\u503c)  ---\u7edf\u8ba1\u6240\u6709url\u4e2d\u8017\u65f6\u6700\u591a\u7684\u4e00\u6761"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"topk(1,avg_over_time(probe_duration_seconds[4h]))*1000)\n")),(0,a.yg)("h5",{id:"113-avg_over_time"},"11.3 avg_over_time"),(0,a.yg)("p",null,"#\u67e5\u8be2\u4e00\u5929\u7a7a\u95f2\u7a7a\u95f4\u7684\u5e73\u5747\u503c\uff0c\u76f8\u5173\u7684\u8fd8\u6709\u5982\u4e0b"),(0,a.yg)("p",null,"avg_over_time()  #\u6307\u5b9a\u95f4\u9694\u5185\u6240\u6709\u70b9\u7684\u5e73\u5747\u503c\u3002\nmin_over_time()  #\u6307\u5b9a\u95f4\u9694\u4e2d\u6240\u6709\u70b9\u7684\u6700\u5c0f\u503c\u3002\nmax_over_time()  #\u6307\u5b9a\u95f4\u9694\u5185\u6240\u6709\u70b9\u7684\u6700\u5927\u503c\u3002\nsum_over_time()  #\u6307\u5b9a\u65f6\u95f4\u95f4\u9694\u5185\u6240\u6709\u503c\u7684\u603b\u548c"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"avg_over_time(probe_duration_seconds[4h])) ###\u7edf\u8ba14\u5c0f\u65f6\u4e4b\u524d\u7684\u5ef6\u8fdf\u503c\n")),(0,a.yg)("p",null,"max_over_time"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"max_over_time(rate(http_request_total[5m])[1h:1m])\n\n#\u603b\u7684\u6765\u8bf4\u5c31\u662f\u7edf\u8ba1prometheus\u4e0a/metrics\u9875\u9762\u57285\u5206\u949f\u5185\u533a\u95f4\u5411\u91cf\u7684\u5e73\u5747\u503c\u7684\u70b9\n#\u57281\u4e2a\u5c0f\u65f6\u4e2d\u6bcf\u4e2a\u70b9\u7684\u503c\n\nrate(http_request_total[5m])[1h:1m]  \n#\u5b83\u5c06\u4e94\u5206\u949f\u7684\u6570\u636e\u805a\u5408\u6210\u4e00\u4e2a\u77ac\u65f6\u5411\u91cf\u3002\n#[1h\u5c31\u50cf\u8303\u56f4\u5411\u91cf\u9009\u62e9\u5668\u4e00\u6837\uff0c\u5b83\u5b9a\u4e49\u4e86\u76f8\u5bf9\u4e8e\u67e5\u8be2\u6c42\u503c\u65f6\u95f4\u7684\u8303\u56f4\u5927\u5c0f\u3002\n\n#:1m]\u8981\u4f7f\u7528\u7684\u95f4\u9694\u503c\u3002\u5982\u679c\u6ca1\u6709\u5b9a\u4e49\uff0c\u5b83\u9ed8\u8ba4\u4e3a\u5168\u5c40\u8ba1\u7b97\u533a\u95f4\n")),(0,a.yg)("h5",{id:"114-sort_desc-\u4ece\u5927\u5230\u5c0f\u6392\u5e8f"},"11.4 sort_desc \u4ece\u5927\u5230\u5c0f\u6392\u5e8f"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"sort_desc(round((1 - (node_memory_MemAvailable_bytes{} / (node_memory_MemTotal_bytes{})))*100,0.01))\n")),(0,a.yg)("h5",{id:"115-sort-\u4ece\u5c0f\u5230\u5927\u6392\u5e8f"},"11.5 sort \u4ece\u5c0f\u5230\u5927\u6392\u5e8f"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"sort_desc(round((1 - (node_memory_MemAvailable_bytes{} / (node_memory_MemTotal_bytes{})))*100,0.01))\n")),(0,a.yg)("h5",{id:"116--0-or-on-vector0-\u5982\u4f55\u5bf9\u63a7\u5236\u8bbe\u7f6e\u4e3a0"},"11.6  0 OR on() vector(0) \u5982\u4f55\u5bf9\u63a7\u5236\u8bbe\u7f6e\u4e3a0"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},'node_tcp_connection_states{state="syn_recv",instance="172.17.113.100"} > 0 OR on() vector(0)\n')),(0,a.yg)("p",null,"\u5982\u4f55\u67e5\u8a62\u4e0d\u5230\uff0c\u90a3\u4e48\u8be5\u503c\u8d4b\u503c\u4e3a0"),(0,a.yg)("p",null,"\u5176\u4ed6\u51fd\u6570:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"absent()               #\u53d6\u5e03\u5c14\u503c\nabs()                  #\u7edd\u5bf9\u503c\nsqrt()                 #\u5e73\u65b9\u6839\nceil()                 #\u5411\u4e0a\u53d6\u6574\nfloor()                #\u5411\u4e0b\u53d6\u6574\nchanges()              #\u663e\u793a\u53d8\u66f4\u6b21\u6570\nround()                #\u56db\u820d\u4e94\u5165\u53d6\u6574\nclamp_max()            #\u5f53\u5927\u4e8e\u6700\u5927\u503c\u65f6\uff0c\u5219\u4e3a\u6700\u5927\u503c\nclamp_min()            #\u5f53\u5c0f\u4e8e\u6700\u5c0f\u503c\u65f6\uff0c\u5219\u4e3a\u6700\u5c0f\u503c\nlable_join()           #\u65b0\u589e\u6807\u7b7e\nlable_replace()        #\u66ff\u6362\u6807\u7b7e\npredict_linear()       #\u57fa\u4e8e\u4e00\u6bb5\u65f6\u95f4\u5185\u7684\u589e\u957f\u503c\u6765\u9884\u6d4b\u591a\u4e45\u540e\u4f1a\u6ea2\u51fa\nrate()                 #\u8ba1\u7b97\u533a\u95f4\u5411\u91cf\u91cc\u7684\u5e73\u5747\u589e\u957f\u7387\nirate()                #\u8ba1\u7b97\u533a\u95f4\u5411\u91cf\u5185\u6700\u65b0\u548c\u6700\u540e\u7684\u77ac\u65f6\u5411\u91cf\u7684\u589e\u957f\u7387\nsort()                 #\u5347\u5e8f\u6392\u5e8f\nsort_desc()            #\u964d\u5e8f\u6392\u5e8f\ndelta()                #\u8ba1\u7b97\u533a\u95f4\u5411\u91cf\u91cc\u6700\u5927\u6700\u5c0f\u7684\u5dee\u503c\nincrease()             #\u8ba1\u7b97\u533a\u95f4\u5411\u91cf\u91cc\u6700\u540e\u4e00\u4e2a\u503c\u548c\u7b2c\u4e00\u4e2a\u503c\u7684\u5dee\u503c\n")),(0,a.yg)("h2",{id:"12alertmanager-routing-tree-editor"},"12\u3001alertmanager-routing-tree-editor"),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://prometheus.io/webtools/alerting/routing-tree-editor/"})),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/operator/image-20220330150108489.png",alt:"image-20220330150108489"})),(0,a.yg)("h2",{id:"13prometheus--\u76d1\u63a7\u8fde\u63a5\u6570"},"13\u3001prometheus  \u76d1\u63a7\u8fde\u63a5\u6570"),(0,a.yg)("h4",{id:"1\u5b9e\u73b0\u7cfb\u7edf\u7ea7\u522b\u7684\u8fde\u63a5\u6570\u76d1\u63a7"},"1\u3001\u5b9e\u73b0\u7cfb\u7edf\u7ea7\u522b\u7684\u8fde\u63a5\u6570\u76d1\u63a7"),(0,a.yg)("p",null,"\u5982\u4f55\u76d1\u63a7 netstat -ant | grep ESTABLISHED | wc -l    #\u67e5\u770b\u8fde\u63a5\u6570"),(0,a.yg)("p",null,"netstat -ntlp #\u83b7\u53d6listen"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"node_netstat_Tcp_CurrEstab\n")),(0,a.yg)("p",null,"\u89c4\u5219\u6587\u4ef6\uff1a "),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'  - alert: "\u6b63\u5e38\u8fde\u63a5\u6570\u8d85\u8fc710000"\n    expr: node_netstat_Tcp_CurrEstab{instance!~"172.17.224.50|172.17.224.51"}  > 8000\n    for: 3m\n    labels: {resType: \'Node\', severity: \'warning\'}\n    annotations:\n      summary: "\u6b63\u5e38\u8fde\u63a5\u6570\u8d85\u8fc710000[\u9636\u503c\u63d0\u9192]"\n      description: "{{$labels.device}}: \u6b63\u5e38\u8fde\u63a5\u6570\u8d85\u8fc710000 (\u5f53\u524d\u7684\u8fde\u63a5\u6570\u662f: {{ $value }})"\n      monname: "\u8fdb\u7a0b\u8fde\u63a5\u6570\u76d1\u63a7"\n\n    #\u4ee5\u4e0b\u8282\u70b9\u4e3a\u8d1f\u8f7d\uff0c\u8fde\u63a5\u6570\u8f83\u591a\u5355\u72ec\u544a\u8b66\n  - alert: "\u6b63\u5e38\u8fde\u63a5\u6570\u8d85\u8fc743000"\n    expr: node_netstat_Tcp_CurrEstab{instance=~"172.17.224.50|172.17.224.51"} > 43000\n    for: 3m\n    labels: {resType: \'Node\', severity: \'warning\'}\n    annotations:\n      summary: "\u6b63\u5e38\u8fde\u63a5\u6570\u8d85\u8fc743000[\u9636\u503c\u63d0\u9192]"\n      description: "{{$labels.device}}: \u6b63\u5e38\u8fde\u63a5\u6570\u8d85\u8fc743000 (\u5f53\u524d\u7684\u8fde\u63a5\u6570\u662f: {{ $value }})"\n      monname: "\u8fdb\u7a0b\u8fde\u63a5\u6570\u76d1\u63a7"\n\n')),(0,a.yg)("h4",{id:"2tomcat\u76d1\u63a7"},"2\u3001tomcat\u76d1\u63a7"),(0,a.yg)("p",null,"\u914d\u7f6e"),(0,a.yg)("p",null,"\u76d1\u63a7tomcat\u8fde\u63a5\u6570,\u5176\u4ed6\u7ec4\u4ef6\u53ef\u4ee5\u53c2\u8003\u5b98\u65b9\u6587\u6863\u5373\u53ef"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"\u5b98\u65b9\u6587\u6863: https://github.com/prometheus/jmx_exporter/tree/master/example_configs\n")),(0,a.yg)("p",null,"\u914d\u7f6e\u53c2\u8003\uff1a "),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'---   \nlowercaseOutputLabelNames: true\nlowercaseOutputName: true\nrules:\n- pattern: \'Catalina<type=GlobalRequestProcessor, name=\\"(\\w+-\\w+)-(\\d+)\\"><>(\\w+):\'\n  name: tomcat_$3_total\n  labels:\n    port: "$2"\n    protocol: "$1"\n  help: Tomcat global $3\n  type: COUNTER\n- pattern: \'Catalina<j2eeType=Servlet, WebModule=//([-a-zA-Z0-9+&@#/%?=~_|!:.,;]*[-a-zA-Z0-9+&@#/%=~_|]), name=([-a-zA-Z0-9+/$%~_-|!.]*), J2EEApplication=none, J2EEServer=none><>(requestCount|maxTime|processingTime|errorCount):\'\n  name: tomcat_servlet_$3_total\n  labels:\n    module: "$1"\n    servlet: "$2"\n  help: Tomcat servlet $3 total\n  type: COUNTER\n- pattern: \'Catalina<type=ThreadPool, name="(\\w+-\\w+)-(\\d+)"><>(currentThreadCount|currentThreadsBusy|keepAliveCount|pollerThreadCount|connectionCount):\'\n  name: tomcat_threadpool_$3\n  labels:\n    port: "$2"\n    protocol: "$1"\n  help: Tomcat threadpool $3\n  type: GAUGE\n- pattern: \'Catalina<type=Manager, host=([-a-zA-Z0-9+&@#/%?=~_|!:.,;]*[-a-zA-Z0-9+&@#/%=~_|]), context=([-a-zA-Z0-9+/$%~_-|!.]*)><>(processingTime|sessionCounter|rejectedSessions|expiredSessions):\'\n  name: tomcat_session_$3_total\n  labels:\n    context: "$2"\n    host: "$1"\n  help: Tomcat session $3 total\n  type: COUNTER\n')),(0,a.yg)("p",null,"\u6307\u6807\u8bf4\u660e\uff1a "),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"tomcat_threadpool_connectioncount    #tomcat\u8fde\u63a5\u6570\n")),(0,a.yg)("p",null,"\u89c4\u5219\u6587\u4ef6"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},'\n  - alert: "jvm\u5806\u5185\u5b58\u8d85\u8fc785%"\n    expr: jvm_memory_bytes_used{area="heap",job="jvm_tomcat_monitor"} / jvm_memory_bytes_max{area="heap",job="jvm_tomcat_monitor"} * 100 >  85\n    for: 30s\n    labels: {resType: \'Node\', severity: \'warning\'}\n    annotations:\n      summary: "jvm\u5806\u5185\u5b58\u4f7f\u7528\u7387"\n      description: "{{$labels.instance}}: \u5185\u5b58\u4f7f\u7528\u7387\u8d85\u8fc785% (\u5f53\u524d\u7684\u4f7f\u7528\u7387\u662f: {{ $value }}"\n      hostname: "{{$labels.job}}"\n                \n  - alert: "tomcat\u8fde\u63a5\u6570\u8d85\u8fc7400"\n    expr: tomcat_threadpool_connectioncount > 400\n    for: 30s\n    labels: {resType: \'Node\', severity: \'warning\'}\n    annotations:\n      summary: "tomcat\u8fde\u63a5\u6570\u76d1\u63a7"\n      description: "{{$labels.instance}}: tomcat\u8fde\u63a5\u6570\u8d85\u8fc7400  (\u5f53\u524d\u8fde\u63a5\u6570\u662f: {{ $value }}"\n      hostname: "{{$labels.job}}"\n')),(0,a.yg)("h2",{id:"14\u6309\u7167\u7b49\u7ea7\u8fdb\u884c\u544a\u8b66"},"14\u3001\u6309\u7167\u7b49\u7ea7\u8fdb\u884c\u544a\u8b66"),(0,a.yg)("p",null,"\u5728rules.yml\u6587\u4ef6\u4e2d\uff0cseverity\u76f4\u63a5\u5199\u5728labels\u4e2d\uff0c\u6709\u4e09\u79cd\u7b49\u7ea7\uff0c\u5206\u522b\u4e3awarning\u3001critical\u548cemergency\u3002\u4e25\u91cd\u7b49\u7ea7\u4f9d\u6b21\u9012\u589e\u3002\u5982\u679c\u540c\u4e00\u4e2arule\u89c4\u5219\u544a\u8b66\uff0c\u6ee1\u8db3\u591a\u4e2a\u7b49\u7ea7\u7684\u65f6\u5019\uff0c\u544a\u8b66\u7684\u65f6\u5019\u6309\u7167\u767b\u8bb0\u6700\u9ad8\u7684\u544a\u8b66"),(0,a.yg)("p",null,"\u5982\uff1a\u7f51\u5361\u544a\u8b66\u5728rule\u4e2d\u5b9a\u4e49"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},'    ###\u7f51\u5361\u5165\u53e3\u6d41\u91cf\n  - alert: "\u8282\u70b9\u7f51\u5361\u5165\u6d41\u91cf\u8d85\u8fc725M"\n    expr: round((irate(node_network_receive_bytes_total{device!="lo",instance!="172.17.113.105",instance!="172.17.224.119"}[1m]) / 1048576  ),0.001) > 25\n    for: 30s\n    labels: {resType: \'Node\', severity: \'warning\'}\n    annotations:\n      summary: "\u660e\u7ec6\u7f51\u5361\u5165\u53e3\u6d41\u91cf\u8d85\u8fc725M"\n      description: "{{$labels.device}}: \u7f51\u5361\u5165\u53e3\u6d41\u91cf\u8d85\u8fc725M\uff0c\u660e\u7ec6\u6d41\u91cf\u53ef\u4ee5\u6839\u636e\u60c5\u51b5\u5ffd\u7565 !!!(\u5f53\u524d1\u5206\u949f\u7684\u4f7f\u7528\u7387\u662f: {{ $value }}M)"\n      hostname: "{{$labels.job}}"\n\n\n  - alert: "\u8282\u70b9\u7f51\u5361\u5165\u6d41\u91cf\u8d85\u8fc750M"\n    expr: round((irate(node_network_receive_bytes_total{device!="lo",instance!="172.17.113.105",instance!="172.17.224.119"}[1m]) / 1048576  ),0.001) > 50\n    for: 30s\n    labels: {resType: \'Node\', severity: \'critical\'}\n    annotations:\n      summary: "\u7f51\u5361\u5165\u53e3\u6d41\u91cf\u8d85\u8fc750M"\n      description: "{{$labels.device}}: \u7f51\u5361\u5165\u53e3\u6d41\u91cf\u8d85\u8fc750M,\u7b49\u7ea7-\u4e25\u91cd,\u8bf7\u524d\u5f80\u670d\u52a1\u5668\u67e5\u770b !!!(\u5f53\u524d1\u5206\u949f\u7684\u4f7f\u7528\u7387\u662f: {{ $value }}M)"\n      hostname: "{{$labels.job}}"\n\n')),(0,a.yg)("p",null,"\u5728alertmanager\u4e2d\u914d\u7f6e"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-yaml"},"inhibit_rules:\n  - source_match:\n      severity: 'critical'\n    target_match:\n      severity: 'warning'\n    equal: ['instance']\n")),(0,a.yg)("p",null,"\u4ee5\u4e0a\u544a\u8b66\u6ee1\u8db3equal\u540c\u4e00\u8282\u70b9\uff0c\u6ce8\u610f\uff0cequal\u5982\u679c\u6709\u591a\u4e2a\uff0c\u5fc5\u987b\u540c\u65f6\u6ee1\u8db3\uff1b \u4f1a\u6291\u5236\u544a\u8b66\uff0c\u53ea\u4f1a\u544a\u8b66critical\u3002 "),(0,a.yg)("h2",{id:"15windows_exporter\u76d1\u63a7"},"15\u3001windows_exporter\u76d1\u63a7"),(0,a.yg)("p",null,"\u5b98\u65b9\u5730\u5740:"),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://github.com/prometheus-community/windows_exporter"},"https://github.com/prometheus-community/windows_exporter")),(0,a.yg)("p",null,"\u4e0b\u8f7d\u5b98\u65b9msi\u6587\u4ef6"),(0,a.yg)("p",null,"prometheus\u914d\u7f6ewindows_exporter"),(0,a.yg)("p",null,"\u5728c\u76d8\u521b\u5efa  C:\\windows_exporter \u76ee\u5f55"),(0,a.yg)("p",null,"\u8bbf\u95ee\u6587\u4ef6  windows_exporter-0.18.0-386.msi"),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/operator/image-20230220120000395.png",alt:"image-20230220120000395"})),(0,a.yg)("p",null,"\u5b89\u88c5: \u7cbe\u7b80\u7248 - \u4e0d\u652f\u6301\u7edf\u8ba1\u8fdb\u7a0b-\u76ee\u524d\u751f\u4ea7\u5728\u7528"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"C:\\Users\\Administrator>msiexec /i C:\\windows_exporter\\windows_exporter-0.18.0-386.msi ENABLED_COLLECTORS=ad,memory,os,cs,cpu,logical_disk  LISTEN_PORT=9100\n")),(0,a.yg)("p",null,"\u6807\u51c6\u76d1\u63a7\u6307\u6807"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"msiexec /i C:\\windows_exporter\\windows_exporter-0.18.0-386.msi ENABLED_COLLECTORS=ad,iis,logon,memory,process,os,cs,cpu,logical_disk  LISTEN_PORT=9100\n")),(0,a.yg)("p",null,"\u5b89\u88dd\u5b8c\u4e4b\u540e\u53ef\u4ee5\u9a8c\u8bc1"),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/operator/image-20230220120244275.png",alt:"image-20230220120244275"})),(0,a.yg)("p",null,"\u5177\u4f53\u5b89\u88c5\u6587\u6863\u53ef\u4ee5\u53c2\u8003\u5b98\u65b9: "),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://github.com/prometheus-community/windows_exporter?spm=a2c4g.11186623.0.0.84e8490bysmVRG#using-a-configuration-file"},"https://github.com/prometheus-community/windows_exporter?spm=a2c4g.11186623.0.0.84e8490bysmVRG#using-a-configuration-file")),(0,a.yg)("p",null,"\u8bbf\u95ee: ",(0,a.yg)("a",{parentName:"p",href:"http://x.x.x.x:9100/metrics"},"http://x.x.x.x:9100/metrics")," "),(0,a.yg)("p",null,"\u9ed8\u8ba4\u7aef\u53e3  9182"),(0,a.yg)("p",null," CPU\u9ad8\u8d1f\u8377"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},'100 - (avg by (instance,job) (irate(windows_cpu_time_total{mode="idle"}[2m])) * 100) > 30\n')),(0,a.yg)("p",null,"\u5185\u5b58\u4f7f\u7528\u7387\u8fc7\u9ad8"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"100 - 100 * windows_os_physical_memory_free_bytes / windows_cs_physical_memory_bytes > 90\n")),(0,a.yg)("p",null,"\u5185\u5b58\u5229\u7528\u7387"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"100 - 100 * windows_os_physical_memory_free_bytes / windows_cs_physical_memory_bytes\n")),(0,a.yg)("p",null,"\u786c\u76d8\u4f7f\u7528\u7387"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"100- 100 * (windows_logical_disk_free_bytes / windows_logical_disk_size_bytes)\n")),(0,a.yg)("p",null,"\u7f51\u5361sent\u901f\u7387"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"((sum(rate (windows_net_bytes_sent_total{device!~'tap.*|veth.*|br.*|docker.*|virbr*|lo*'}[5m])) by (instance,job)) / 100)\n\n")),(0,a.yg)("p",null,"\u7f51\u5361received\u901f\u7387"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"((sum(rate (windows_net_bytes_received_total{device!~'tap.*|veth.*|br.*|docker.*|virbr*|lo*'}[5m])) by (instance,job)) / 100)\n")),(0,a.yg)("p",null,"\u76f8\u5173\u6307\u6807\u76d1\u63a7\u94fe\u63a5:"),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://www.modb.pro/db/569736"},"https://www.modb.pro/db/569736")),(0,a.yg)("p",null,"16\u3001\u751f\u4ea7\u5de1\u68c0\u7edf\u8ba1"),(0,a.yg)("p",null,"\u901a\u8fc7api\u7edf\u8ba1\u6240\u6709\u4e3b\u673a\u7684IP \uff0c\u5982\u679c\u53ea\u60f3\u663e\u793a\u4e00\u5217hostname,\u6216\u8005Ip,\u9700\u8981\u505a\u6c47\u805a"),(0,a.yg)("p",null,"\u901a\u8fc7post\u65b9\u5f0f\u6765\u5b9e\u73b0\u83b7\u53d6\u6240\u6709\u7684\u4e3b\u673a\u540d"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"curl  -sd 'query=sum(node_uname_info) by(hostname)' -d \"time=1674973283\"  -d \"end=1674973283\" -d 'step=15s' -X  POST  http://39.105.15.20:9090/api/v1/query?  |jq -r '.data.result' | jq .[].metric.hostname\n")),(0,a.yg)("p",null,"\u83b7\u53d6\u6240\u6709\u7684ip"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-powershell"},"curl  -sd 'query=sum(node_uname_info) by(instance)' -d \"time=1674973283\"  -d \"end=1674973283\" -d 'step=15s' -X  POST  http://39.105.15.20:9090/api/v1/query?  |jq -r '.data.result' | jq .[].metric.instance\n")),(0,a.yg)("h2",{id:"\u76f8\u5173\u94fe\u63a5"},"\u76f8\u5173\u94fe\u63a5"),(0,a.yg)("p",null,"jq\u53c2\u8003\u94fe\u63a5:",(0,a.yg)("a",{parentName:"p",href:"https://www.cnblogs.com/liwenchao1995/p/16284648.html"},"https://www.cnblogs.com/liwenchao1995/p/16284648.html")),(0,a.yg)("p",null,"prometheus rule\u76f8\u5173\u53c2\u8003\u6587\u6863\uff1a** "),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://segmentfault.com/a/1190000023533570"},"https://segmentfault.com/a/1190000023533570")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"docker-compose\u53c2\u8003\u6587\u6863\uff1a")," "),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://blog.51cto.com/hongchen99/2308932"},"https://blog.51cto.com/hongchen99/2308932")),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://www.cnblogs.com/namedgx/p/14919857.html"},"https://www.cnblogs.com/namedgx/p/14919857.html")),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://blog.51cto.com/hongchen99/2308932"},"https://blog.51cto.com/hongchen99/2308932")),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://prometheus.io/docs/instrumenting/writing_clientlibs/"},"https://prometheus.io/docs/instrumenting/writing_clientlibs/")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"blackbox Exporter\u53c2\u8003\u6587\u6863")),(0,a.yg)("p",null,"\u200b    #\u5b98\u65b9\u6587\u6863"),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://prometheus.io/docs/guides/multi-target-exporter/"},"https://prometheus.io/docs/guides/multi-target-exporter/")),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://github.com/prometheus/blackbox_exporter/blob/master/example.yml"},"https://github.com/prometheus/blackbox_exporter/blob/master/example.yml")),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://github.com/prometheus/blackbox_exporter/blob/master/CONFIGURATION.md"},"https://github.com/prometheus/blackbox_exporter/blob/master/CONFIGURATION.md")),(0,a.yg)("p",null,"\u200b     #\u76f8\u5173\u6307\u6807\u7684\u89e3\u91ca"),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"http://itocm.com/a/FE5EB54826E3475C97E77A671E2AF533"},"http://itocm.com/a/FE5EB54826E3475C97E77A671E2AF533"),"   "),(0,a.yg)("p",null,"\u200b     #\u914d\u7f6e\u6848\u4f8b"),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/exporter/commonly-eporter-usage/install_blackbox_exporter"},"https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/exporter/commonly-eporter-usage/install_blackbox_exporter"),"  "),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/exporter/commonly-eporter-usage/install_blackbox_exporter"},"https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/exporter/commonly-eporter-usage/install_blackbox_exporter")),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://www.cnblogs.com/abner123/p/13226239.html"},"https://www.cnblogs.com/abner123/p/13226239.html")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"alertmanager\u53c2\u8003\u6587\u6863")),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/netcoolomnibus/8?topic=monitoring-configuring-prometheus-in-kubernetes-from-command-line"},"https://www.ibm.com/docs/en/netcoolomnibus/8?topic=monitoring-configuring-prometheus-in-kubernetes-from-command-line")),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"dingtalk\u53c2\u8003")),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://www.cnblogs.com/Atonement/p/14688870.html"},"https://www.cnblogs.com/Atonement/p/14688870.html")),(0,a.yg)("p",null,"promehteus\u5b58\u50a8\u76f8\u5173"),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"https://prometheus.io/docs/prometheus/latest/storage/"},"https://prometheus.io/docs/prometheus/latest/storage/")))}u.isMDXComponent=!0}}]);