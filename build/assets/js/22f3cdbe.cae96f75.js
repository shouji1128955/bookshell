"use strict";(self.webpackChunkbookshell=self.webpackChunkbookshell||[]).push([[8089],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>c});var a=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var s=a.createContext({}),d=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=d(e.components);return a.createElement(s.Provider,{value:n},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},g=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=d(t),g=l,c=u["".concat(s,".").concat(g)]||u[g]||m[g]||r;return t?a.createElement(c,o(o({ref:n},p),{},{components:t})):a.createElement(c,o({ref:n},p))}));function c(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,o=new Array(r);o[0]=g;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[u]="string"==typeof e?e:l,o[1]=i;for(var d=2;d<r;d++)o[d]=t[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}g.displayName="MDXCreateElement"},8482:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>d});var a=t(7462),l=(t(7294),t(3905));const r={},o=void 0,i={unversionedId:"Golang/golang\u8fdb\u9636/gin\u6846\u67b62023/Gin\u6846\u67b6",id:"Golang/golang\u8fdb\u9636/gin\u6846\u67b62023/Gin\u6846\u67b6",title:"Gin\u6846\u67b6",description:"\u9884\u5907\u77e5\u8bc6\u70b9",source:"@site/docs/Golang/golang\u8fdb\u9636/1.gin\u6846\u67b62023/Gin\u6846\u67b6.md",sourceDirName:"Golang/golang\u8fdb\u9636/1.gin\u6846\u67b62023",slug:"/Golang/golang\u8fdb\u9636/gin\u6846\u67b62023/Gin\u6846\u67b6",permalink:"/docs/Golang/golang\u8fdb\u9636/gin\u6846\u67b62023/Gin\u6846\u67b6",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Golang/golang\u8fdb\u9636/1.gin\u6846\u67b62023/Gin\u6846\u67b6.md",tags:[],version:"current",lastUpdatedBy:"AMiner",lastUpdatedAt:1719072900,formattedLastUpdatedAt:"2024\u5e746\u670822\u65e5",frontMatter:{},sidebar:"GoalngJinjie",next:{title:"Mysql",permalink:"/docs/Golang/golang\u8fdb\u9636/mysql\u6570\u636e\u5e93/Mysql\u57fa\u7840"}},s={},d=[{value:"1.1\u3001web\u5e94\u7528\u7a0b\u5e8f",id:"11web\u5e94\u7528\u7a0b\u5e8f",level:2},{value:"1.2\u3001http\u534f\u8bae",id:"12http\u534f\u8bae",level:2},{value:"\uff081\uff09\u7b80\u4ecb",id:"1\u7b80\u4ecb",level:4},{value:"\uff082\uff09http\u534f\u8bae\u7279\u6027",id:"2http\u534f\u8bae\u7279\u6027",level:4},{value:"\uff083\uff09http\u8bf7\u6c42\u534f\u8bae\u4e0e\u54cd\u5e94\u534f\u8bae",id:"3http\u8bf7\u6c42\u534f\u8bae\u4e0e\u54cd\u5e94\u534f\u8bae",level:4},{value:"1.3\u3001quick start",id:"13quick-start",level:2},{value:"1.3.1\u3001\u5b89\u88c5",id:"131\u5b89\u88c5",level:3},{value:"1.3.2\u3001quick start",id:"132quick-start",level:3},{value:"1.3.3\u3001mvc",id:"133mvc",level:3},{value:"1.3.3\u3001timer\u6848\u4f8b",id:"133timer\u6848\u4f8b",level:3},{value:"1.3.4\u3001\u767b\u9646\u6848\u4f8b",id:"134\u767b\u9646\u6848\u4f8b",level:3},{value:"2.1\u3001\u8def\u7531\u65b9\u6cd5",id:"21\u8def\u7531\u65b9\u6cd5",level:2},{value:"2.2\u3001\u8def\u7531\u5206\u7ec4",id:"22\u8def\u7531\u5206\u7ec4",level:2},{value:"3.1\u3001\u8bf7\u6c42\u6570\u636e",id:"31\u8bf7\u6c42\u6570\u636e",level:2},{value:"\uff081\uff09\u83b7\u53d6\u57fa\u672c\u8bf7\u6c42\u6570\u636e",id:"1\u83b7\u53d6\u57fa\u672c\u8bf7\u6c42\u6570\u636e",level:3},{value:"\uff082\uff09\u83b7\u53d6\u8def\u5f84\u53c2\u6570",id:"2\u83b7\u53d6\u8def\u5f84\u53c2\u6570",level:3},{value:"\uff083\uff09\u83b7\u53d6\u67e5\u8be2\u53c2\u6570",id:"3\u83b7\u53d6\u67e5\u8be2\u53c2\u6570",level:3},{value:"\uff084\uff09\u83b7\u53d6PostForm\u6570\u636e",id:"4\u83b7\u53d6postform\u6570\u636e",level:3},{value:"\uff085\uff09ShouldBind\u51fd\u6570",id:"5shouldbind\u51fd\u6570",level:3},{value:"3.2\u3001\u54cd\u5e94\u6570\u636e",id:"32\u54cd\u5e94\u6570\u636e",level:2},{value:"3.2.1\u3001\u54cd\u5e94\u4e0d\u540c\u7684\u6570\u636e\u683c\u5f0f",id:"321\u54cd\u5e94\u4e0d\u540c\u7684\u6570\u636e\u683c\u5f0f",level:3},{value:"\uff081\uff09\u54cd\u5e94\u7b80\u5355\u5b57\u7b26\u4e32",id:"1\u54cd\u5e94\u7b80\u5355\u5b57\u7b26\u4e32",level:4},{value:"\uff082\uff09\u54cd\u5e94html\u9875\u9762",id:"2\u54cd\u5e94html\u9875\u9762",level:4},{value:"\uff083\uff09\u54cd\u5e94json",id:"3\u54cd\u5e94json",level:4},{value:"\uff084\uff09\u54cd\u5e94xml\u6570\u636e",id:"4\u54cd\u5e94xml\u6570\u636e",level:4},{value:"\uff085\uff09\u54cd\u5e94protobuf\u683c\u5f0f",id:"5\u54cd\u5e94protobuf\u683c\u5f0f",level:4},{value:"3.2.2\u3001\u9759\u6001\u6587\u4ef6",id:"322\u9759\u6001\u6587\u4ef6",level:3},{value:"3.2.3\u3001\u91cd\u5b9a\u5411",id:"323\u91cd\u5b9a\u5411",level:3},{value:"3.2.4\u3001\u5f02\u6b65\u54cd\u5e94",id:"324\u5f02\u6b65\u54cd\u5e94",level:3},{value:"4.1 \u3001\u53d8\u91cf\u6e32\u67d3",id:"41-\u53d8\u91cf\u6e32\u67d3",level:2},{value:"4.2 \u3001\u63a7\u5236\u7ed3\u6784",id:"42-\u63a7\u5236\u7ed3\u6784",level:2},{value:"\uff081\uff09\u5206\u652f\u7ed3\u6784",id:"1\u5206\u652f\u7ed3\u6784",level:4},{value:"\uff082\uff09\u5faa\u73af\u7ed3\u6784",id:"2\u5faa\u73af\u7ed3\u6784",level:4},{value:"\uff083\uff09\u53d8\u91cf\u8d4b\u503c",id:"3\u53d8\u91cf\u8d4b\u503c",level:4},{value:"\uff084\uff09\u6ce8\u91ca",id:"4\u6ce8\u91ca",level:4},{value:"4.3\u3001Gin\u7684\u6a21\u677f\u51fd\u6570",id:"43gin\u7684\u6a21\u677f\u51fd\u6570",level:2},{value:"\uff081\uff09\u9ed8\u8ba4\u6a21\u677f\u51fd\u6570",id:"1\u9ed8\u8ba4\u6a21\u677f\u51fd\u6570",level:4},{value:"\uff082\uff09\u81ea\u5b9a\u4e49\u6a21\u677f\u51fd\u6570",id:"2\u81ea\u5b9a\u4e49\u6a21\u677f\u51fd\u6570",level:4},{value:"4.4\u3001\u5d4c\u5957\u4e0e\u7ee7\u627f",id:"44\u5d4c\u5957\u4e0e\u7ee7\u627f",level:2},{value:"\uff081\uff09 \u5d4c\u5957\uff1adefine\u548ctemplate",id:"1-\u5d4c\u5957define\u548ctemplate",level:4},{value:"\uff082\uff09\u7ee7\u627f\uff1ablock\u5757",id:"2\u7ee7\u627fblock\u5757",level:4},{value:"\uff083\uff09\u7ee7\u627f\u6848\u4f8b",id:"3\u7ee7\u627f\u6848\u4f8b",level:4},{value:"5.1\u3001gorm\u4ecb\u7ecd",id:"51gorm\u4ecb\u7ecd",level:2},{value:"5.2\u3001\u8fde\u63a5\u6570\u636e\u5e93",id:"52\u8fde\u63a5\u6570\u636e\u5e93",level:2},{value:"5.2.1\u3001\u8fde\u63a5\u6570\u636e\u5e93",id:"521\u8fde\u63a5\u6570\u636e\u5e93",level:3},{value:"5.2.2\u3001\u914d\u7f6e\u65e5\u5fd7\u8fde\u63a5",id:"522\u914d\u7f6e\u65e5\u5fd7\u8fde\u63a5",level:3},{value:"5.2.3\u3001\u6570\u636e\u5e93\u8fde\u63a5\u6c60",id:"523\u6570\u636e\u5e93\u8fde\u63a5\u6c60",level:3},{value:"5.3\u3001\u6570\u636e\u5e93\u8868\u64cd\u4f5c",id:"53\u6570\u636e\u5e93\u8868\u64cd\u4f5c",level:2},{value:"5.3.1\u3001\u6a21\u578b\u58f0\u660e",id:"531\u6a21\u578b\u58f0\u660e",level:3},{value:"5.3.2\u3001\u6a21\u578b\u8fc1\u79fb",id:"532\u6a21\u578b\u8fc1\u79fb",level:3},{value:"5.3.3\u3001\u8868\u5b57\u6bb5\u64cd\u4f5c",id:"533\u8868\u5b57\u6bb5\u64cd\u4f5c",level:3},{value:"5.4\u3001\u6570\u636e\u5e93\u8868\u8bb0\u5f55\u64cd\u4f5c",id:"54\u6570\u636e\u5e93\u8868\u8bb0\u5f55\u64cd\u4f5c",level:2},{value:"5.4.1\u3001\u6dfb\u52a0\u8bb0\u5f55",id:"541\u6dfb\u52a0\u8bb0\u5f55",level:3},{value:"\uff081\uff09\u6dfb\u52a0\u5355\u8868\u8bb0\u5f55",id:"1\u6dfb\u52a0\u5355\u8868\u8bb0\u5f55",level:4},{value:"\uff082\uff09\u6279\u91cf\u6dfb\u52a0\u591a\u5bf9\u4e00\u5173\u8054\u8868\u7684\u8bb0\u5f55",id:"2\u6279\u91cf\u6dfb\u52a0\u591a\u5bf9\u4e00\u5173\u8054\u8868\u7684\u8bb0\u5f55",level:4},{value:"\uff083\uff09\u6dfb\u52a0\u591a\u5bf9\u591a\u5173\u8054\u8868\u7684\u8bb0\u5f55",id:"3\u6dfb\u52a0\u591a\u5bf9\u591a\u5173\u8054\u8868\u7684\u8bb0\u5f55",level:4},{value:"5.4.2\u3001\u5355\u8868\u67e5\u8be2",id:"542\u5355\u8868\u67e5\u8be2",level:3},{value:"\uff081\uff09 \u67e5\u8be2\u5168\u90e8\u8bb0\u5f55",id:"1-\u67e5\u8be2\u5168\u90e8\u8bb0\u5f55",level:4},{value:"\uff082\uff09\u67e5\u8be2\u5355\u6761\u8bb0\u5f55",id:"2\u67e5\u8be2\u5355\u6761\u8bb0\u5f55",level:4},{value:"\uff083\uff09 Where\u67e5\u8be2",id:"3-where\u67e5\u8be2",level:4},{value:"\uff084\uff09\u5176\u4ed6\u67e5\u8be2\u8bed\u53e5",id:"4\u5176\u4ed6\u67e5\u8be2\u8bed\u53e5",level:4},{value:"5.4.3\u3001\u5220\u9664\u8bb0\u5f55",id:"543\u5220\u9664\u8bb0\u5f55",level:3},{value:"5.4.4\u3001\u66f4\u65b0\u8bb0\u5f55",id:"544\u66f4\u65b0\u8bb0\u5f55",level:3},{value:"5.4.5\u3001\u5173\u8054\u8868\u67e5\u8be2",id:"545\u5173\u8054\u8868\u67e5\u8be2",level:3},{value:"\uff081\uff09Preload",id:"1preload",level:4},{value:"\uff082\uff09Joins \u67e5\u8be2",id:"2joins-\u67e5\u8be2",level:4},{value:"5.5\u3001\u7ae0\u8282\u4f5c\u4e1a",id:"55\u7ae0\u8282\u4f5c\u4e1a",level:2},{value:"7.1\u3001\u4f1a\u8bdd\u6280\u672f",id:"71\u4f1a\u8bdd\u6280\u672f",level:2},{value:"7.1.1\u3001Cookie",id:"711cookie",level:3},{value:"<strong>1.</strong> Cookie\u662f\u4ec0\u4e48",id:"1-cookie\u662f\u4ec0\u4e48",level:4},{value:"<strong>2.</strong> \u8bfb\u5199Cookie",id:"2-\u8bfb\u5199cookie",level:4},{value:"\uff081\uff09\u767b\u5f55\u6848\u4f8b",id:"1\u767b\u5f55\u6848\u4f8b",level:4},{value:"\uff082\uff09\u6700\u540e\u8bbf\u95ee\u65f6\u95f4\u6848\u4f8b",id:"2\u6700\u540e\u8bbf\u95ee\u65f6\u95f4\u6848\u4f8b",level:4},{value:"7.1.2\u3001session",id:"712session",level:3},{value:"7.1.3\u3001\u57fa\u4e8esession\u7684\u767b\u5f55\u9a8c\u8bc1",id:"713\u57fa\u4e8esession\u7684\u767b\u5f55\u9a8c\u8bc1",level:3},{value:"7.2\u3001\u4e2d\u95f4\u4ef6",id:"72\u4e2d\u95f4\u4ef6",level:2},{value:"7.2.1\u3001\u4e2d\u95f4\u4ef6\u8bed\u6cd5",id:"721\u4e2d\u95f4\u4ef6\u8bed\u6cd5",level:3},{value:"7.2.2\u3001\u4e2d\u95f4\u4ef6\u5e94\u7528\u4e00\uff1aCORS",id:"722\u4e2d\u95f4\u4ef6\u5e94\u7528\u4e00cors",level:3},{value:"7.2.3\u3001\u4e2d\u95f4\u4ef6\u5e94\u7528\u4e8c\uff1a\u6743\u9650\u8bbf\u95ee\u63a7\u5236",id:"723\u4e2d\u95f4\u4ef6\u5e94\u7528\u4e8c\u6743\u9650\u8bbf\u95ee\u63a7\u5236",level:3},{value:"7.3\u3001validator",id:"73validator",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:3},{value:"\u57fa\u672c\u4f7f\u7528",id:"\u57fa\u672c\u4f7f\u7528",level:3},{value:"\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u5668",id:"\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u5668",level:3},{value:"\u8de8\u5b57\u6bb5\u9a8c\u8bc1",id:"\u8de8\u5b57\u6bb5\u9a8c\u8bc1",level:3},{value:"\u7ed3\u8bba",id:"\u7ed3\u8bba",level:3},{value:"7.4 \u3001Ajax\u65b9\u6cd5",id:"74-ajax\u65b9\u6cd5",level:2},{value:"Ajax\u4ecb\u7ecd",id:"ajax\u4ecb\u7ecd",level:3},{value:"axios\u6a21\u5757",id:"axios\u6a21\u5757",level:3},{value:"\u5e94\u7528\u6848\u4f8b",id:"\u5e94\u7528\u6848\u4f8b",level:3},{value:"8.1\u3001web\u5e94\u7528\u6a21\u5f0f",id:"81web\u5e94\u7528\u6a21\u5f0f",level:2},{value:"8.2\u3001restful api\u89c4\u8303",id:"82restful-api\u89c4\u8303",level:2}],p={toc:d},u="wrapper";function m(e){let{components:n,...t}=e;return(0,l.kt)(u,(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-handlebars"},"-- \u4eca\u5929\u662f2025\u5e741\u67081\u65e5\n\n-- \u8bfe\u7a0b\u76ee\u6807\uff1a\u901a\u8fc7gin\u6846\u67b6\u7684\u5b66\u4e60\u5b9e\u73b0\u4e00\u4e2a\u5b66\u751f\u9009\u8bfe\u7cfb\u7edf\u7684\u5b9e\u6218\u9879\u76ee\n-- 1. \u5b66\u4e60gin\u7684\u8def\u7531\uff0c\u8bf7\u6c42\u4e0e\u54cd\u5e94\uff0c\u6a21\u677f\u4ee5\u53ca\u6700\u91cd\u8981\u7684gorm\u5b8c\u6210\u9009\u8bfe\u7cfb\u7edf\u7684\u5173\u4e8e\u73ed\u7ea7\uff0c\u8bfe\u7a0b\u4ee5\u53ca\u5b66\u5458\u7684\u57fa\u672c\u589e\u5220\u6539\u67e5\n-- 2. \u901a\u8fc7gorm\u7684\u8fdb\u9636\u5b66\u4e60\u3010\u5168\u7ad9\u6700\u597d\u7684gorm\u8bfe\u7a0b\u3011,\u5b8c\u6210\u4e86\u50cf\u641c\u7d22\u6846\u4ee5\u53ca\u9009\u8bfe\u7b49\u6570\u636e\u5e93\u67e5\u8be2\n-- 3. \u5b66\u4e60cookie\uff0csession\u4f1a\u8bdd\u6280\u672f\u5b9e\u73b0\u9879\u76ee\u7684\u767b\u5f55\u9a8c\u8bc1\n-- 4. \u901a\u8fc7\u4e2d\u95f4\u4ef6\u7684\u5b66\u4e60\u5b9e\u73b0\u57fa\u4e8erbac\u7684\u6743\u9650\u8bbf\u95ee\u63a7\u5236\n\n-- \u5373\u4e00\u8fb9\u5b66\u8bfe\u7a0b\uff0c\u4e00\u8fb9\u5199\u9879\u76ee\uff0c\u8bfe\u7a0b\u7ed3\u675f\uff0cgolang\u5f00\u53d1\u4fbf\u662f\u5c0f\u83dc\u4e00\u789f\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"\u9884\u5907\u77e5\u8bc6\u70b9")),(0,l.kt)("ol",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("strong",{parentName:"li"},"Golang\u57fa\u7840\uff08\u6570\u636e\u7c7b\u578b\uff0c\u6d41\u7a0b\u63a7\u5236\u8bed\u53e5\uff0c\u51fd\u6570\uff0c\u7ed3\u6784\u4f53\u7b49\uff09")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("strong",{parentName:"li"},"Mysql\u7684\u57fa\u672csql\u8bed\u53e5")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("strong",{parentName:"li"},"HTML + CSS")))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u4ec0\u4e48\u662f\u6846\u67b6\uff0c\u7c7b\u4f3c\u5199\u4f5c\u6587\u7684\u6a21\u677f\u4e00\u6837\uff0c\u6bd4\u5982\u5165\u515a\u7533\u8bf7\u4e66....")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/golang/assets/gin%E5%92%8Cgo-0245512-0245514.png",alt:null})),(0,l.kt)("h1",{id:"gin\u6846\u67b6\u5165\u95e8\u5230\u7cbe\u901a"},"Gin\u6846\u67b6\u5165\u95e8\u5230\u7cbe\u901a"),(0,l.kt)("h1",{id:"\u4e00gin\u5f00\u7bc7"},"\u4e00\u3001Gin\u5f00\u7bc7"),(0,l.kt)("h2",{id:"11web\u5e94\u7528\u7a0b\u5e8f"},"1.1\u3001web\u5e94\u7528\u7a0b\u5e8f"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/golang/assets/image-20220901214542004.png",alt:"image-20220901214542004"})),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "fmt"\n    "net"\n)\n\nfunc main() {\n\n    listener, err := net.Listen("tcp", "127.0.0.1:8888")\n    if err != nil {\n        fmt.Println(err)\n        return\n    }\n    defer listener.Close()\n    // 2.\u670d\u52a1\u7aef\u4e0d\u65ad\u7b49\u5f85\u8bf7\u6c42\u5904\u7406\n    for {\n        // \u963b\u585e\u7b49\u5f85\u5ba2\u6237\u7aef\u8fde\u63a5\n        fmt.Println("server is waiting...")\n        conn, err := listener.Accept()\n        if err != nil {\n            fmt.Println(err)\n            continue\n        }\n        data := make([]byte, 1024)\n        n, err := conn.Read(data)\n        fmt.Println("receive data:\\n", string(data[:n]))\n        conn.Write([]byte("HTTP/1.1 200 OK\\r\\n\\r\\n<h1>Welcome to Web World!</h1>"))\n        conn.Close()\n    }\n\n}\n')),(0,l.kt)("h2",{id:"12http\u534f\u8bae"},"1.2\u3001http\u534f\u8bae"),(0,l.kt)("h4",{id:"1\u7b80\u4ecb"},"\uff081\uff09\u7b80\u4ecb"),(0,l.kt)("p",null,"HTTP\u534f\u8bae\u662fHyper Text Transfer Protocol\uff08\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae\uff09\u7684\u7f29\u5199,\u662f\u7528\u4e8e\u4e07\u7ef4\u7f51\uff08WWW:World Wide Web \uff09\u670d\u52a1\u5668\u4e0e\u672c\u5730\u6d4f\u89c8\u5668\u4e4b\u95f4\u4f20\u8f93\u8d85\u6587\u672c\u7684\u4f20\u9001\u534f\u8bae\u3002HTTP\u662f\u4e00\u4e2a\u5c5e\u4e8e\u5e94\u7528\u5c42\u7684\u9762\u5411\u5bf9\u8c61\u7684\u534f\u8bae\uff0c\u7531\u4e8e\u5176\u7b80\u6377\u3001\u5feb\u901f\u7684\u65b9\u5f0f\uff0c\u9002\u7528\u4e8e\u5206\u5e03\u5f0f\u8d85\u5a92\u4f53\u4fe1\u606f\u7cfb\u7edf\u3002\u5b83\u4e8e1990\u5e74\u63d0\u51fa\uff0c\u7ecf\u8fc7\u51e0\u5e74\u7684\u4f7f\u7528\u4e0e\u53d1\u5c55\uff0c\u5f97\u5230\u4e0d\u65ad\u5730\u5b8c\u5584\u548c\u6269\u5c55\u3002HTTP\u534f\u8bae\u5de5\u4f5c\u4e8e\u5ba2\u6237\u7aef-\u670d\u52a1\u7aef\u67b6\u6784\u4e3a\u4e0a\u3002\u6d4f\u89c8\u5668\u4f5c\u4e3aHTTP\u5ba2\u6237\u7aef\u901a\u8fc7URL\u5411HTTP\u670d\u52a1\u7aef\u5373WEB\u670d\u52a1\u5668\u53d1\u9001\u6240\u6709\u8bf7\u6c42\u3002Web\u670d\u52a1\u5668\u6839\u636e\u63a5\u6536\u5230\u7684\u8bf7\u6c42\u540e\uff0c\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u54cd\u5e94\u4fe1\u606f\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/golang/assets/%E6%88%AA%E5%B1%8F2022-08-28%2020.18.31.png",alt:"\u622a\u5c4f2022-08-28 20.18.31"})),(0,l.kt)("h4",{id:"2http\u534f\u8bae\u7279\u6027"},"\uff082\uff09http\u534f\u8bae\u7279\u6027"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"(1) \u57fa\u4e8eTCP/IP\u534f\u8bae\n\nhttp\u534f\u8bae\u662f\u57fa\u4e8eTCP/IP\u534f\u8bae\u4e4b\u4e0a\u7684\u5e94\u7528\u5c42\u534f\u8bae\u3002\n\n(2) \u57fa\u4e8e\u8bf7\u6c42\uff0d\u54cd\u5e94\u6a21\u5f0f\n\nHTTP\u534f\u8bae\u89c4\u5b9a,\u8bf7\u6c42\u4ece\u5ba2\u6237\u7aef\u53d1\u51fa,\u6700\u540e\u670d\u52a1\u5668\u7aef\u54cd\u5e94\u8be5\u8bf7\u6c42\u5e76 \u8fd4\u56de\u3002\u6362\u53e5\u8bdd\u8bf4,\u80af\u5b9a\u662f\u5148\u4ece\u5ba2\u6237\u7aef\u5f00\u59cb\u5efa\u7acb\u901a\u4fe1\u7684,\u670d\u52a1\u5668\u7aef\u5728\u6ca1\u6709 \u63a5\u6536\u5230\u8bf7\u6c42\u4e4b\u524d\u4e0d\u4f1a\u53d1\u9001\u54cd\u5e94\n\n(3) \u65e0\u72b6\u6001\u4fdd\u5b58\n\nHTTP\u662f\u4e00\u79cd\u4e0d\u4fdd\u5b58\u72b6\u6001,\u5373\u65e0\u72b6\u6001(stateless)\u534f\u8bae\u3002HTTP\u534f\u8bae \u81ea\u8eab\u4e0d\u5bf9\u8bf7\u6c42\u548c\u54cd\u5e94\u4e4b\u95f4\u7684\u901a\u4fe1\u72b6\u6001\u8fdb\u884c\u4fdd\u5b58\u3002\u4e5f\u5c31\u662f\u8bf4\u5728HTTP\u8fd9\u4e2a \u7ea7\u522b,\u534f\u8bae\u5bf9\u4e8e\u53d1\u9001\u8fc7\u7684\u8bf7\u6c42\u6216\u54cd\u5e94\u90fd\u4e0d\u505a\u6301\u4e45\u5316\u5904\u7406\u3002\n\n\u4f7f\u7528HTTP\u534f\u8bae,\u6bcf\u5f53\u6709\u65b0\u7684\u8bf7\u6c42\u53d1\u9001\u65f6,\u5c31\u4f1a\u6709\u5bf9\u5e94\u7684\u65b0\u54cd\u5e94\u4ea7 \u751f\u3002\u534f\u8bae\u672c\u8eab\u5e76\u4e0d\u4fdd\u7559\u4e4b\u524d\u4e00\u5207\u7684\u8bf7\u6c42\u6216\u54cd\u5e94\u62a5\u6587\u7684\u4fe1\u606f\u3002\u8fd9\u662f\u4e3a\u4e86\u66f4\u5feb\u5730\u5904\u7406\u5927\u91cf\u4e8b\u52a1,\u786e\u4fdd\u534f\u8bae\u7684\u53ef\u4f38\u7f29\u6027,\u800c\u7279\u610f\u628aHTTP\u534f\u8bae\u8bbe\u8ba1\u6210 \u5982\u6b64\u7b80\u5355\u7684\u3002\n\n(4) \u77ed\u8fde\u63a5\u548c\u957f\u8fde\u63a5\n\nHTTP1.0\u9ed8\u8ba4\u4f7f\u7528\u7684\u662f\u77ed\u8fde\u63a5\u3002\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u6bcf\u8fdb\u884c\u4e00\u6b21HTTP\u64cd\u4f5c\uff0c\u5c31\u5efa\u7acb\u4e00\u6b21\u8fde\u63a5\uff0c\u4efb\u52a1\u7ed3\u675f\u5c31\u4e2d\u65ad\u8fde\u63a5\u3002\nHTTP/1.1\u8d77\uff0c\u9ed8\u8ba4\u4f7f\u7528\u957f\u8fde\u63a5\u3002\u8981\u4f7f\u7528\u957f\u8fde\u63a5\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7684HTTP\u9996\u90e8\u7684Connection\u90fd\u8981\u8bbe\u7f6e\u4e3akeep-alive\uff0c\u624d\u80fd\u652f\u6301\u957f\u8fde\u63a5\u3002\nHTTP\u957f\u8fde\u63a5\uff0c\u6307\u7684\u662f\u590d\u7528TCP\u8fde\u63a5\u3002\u591a\u4e2aHTTP\u8bf7\u6c42\u53ef\u4ee5\u590d\u7528\u540c\u4e00\u4e2aTCP\u8fde\u63a5\uff0c\u8fd9\u5c31\u8282\u7701\u4e86TCP\u8fde\u63a5\u5efa\u7acb\u548c\u65ad\u5f00\u7684\u6d88\u8017\u3002\n")),(0,l.kt)("h4",{id:"3http\u8bf7\u6c42\u534f\u8bae\u4e0e\u54cd\u5e94\u534f\u8bae"},"\uff083\uff09http\u8bf7\u6c42\u534f\u8bae\u4e0e\u54cd\u5e94\u534f\u8bae"),(0,l.kt)("p",null,"http\u534f\u8bae\u5305\u542b\u7531\u6d4f\u89c8\u5668\u53d1\u9001\u6570\u636e\u5230\u670d\u52a1\u5668\u9700\u8981\u9075\u5faa\u7684\u8bf7\u6c42\u534f\u8bae\u4e0e\u670d\u52a1\u5668\u53d1\u9001\u6570\u636e\u5230\u6d4f\u89c8\u5668\u9700\u8981\u9075\u5faa\u7684\u8bf7\u6c42\u534f\u8bae\u3002\u7528\u4e8eHTTP\u534f\u8bae\u4ea4\u4e92\u7684\u4fe1\u88ab\u4e3aHTTP\u62a5\u6587\u3002\u8bf7\u6c42\u7aef(\u5ba2\u6237\u7aef)\u7684HTTP\u62a5\u6587 \u505a\u8bf7\u6c42\u62a5\u6587,\u54cd\u5e94\u7aef(\u670d\u52a1\u5668\u7aef)\u7684 \u505a\u54cd\u5e94\u62a5\u6587\u3002HTTP\u62a5\u6587\u672c\u8eab\u662f\u7531\u591a\u884c\u6570\u636e\u6784\u6210\u7684\u5b57\u6587\u672c\u3002"),(0,l.kt)("p",null,"\u200b\t\t\t\t",(0,l.kt)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/golang/assets/http%E5%8D%8F%E8%AE%AE.png",alt:"http\u534f\u8bae"})),(0,l.kt)("blockquote",null,(0,l.kt)("ol",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ol"},"\u4e00\u4e2a\u5b8c\u6574\u7684URL\u5305\u62ec\uff1a\u534f\u8bae\u3001ip\u3001\u7aef\u53e3\u3001\u8def\u5f84\u3001\u53c2\u6570  ")),(0,l.kt)("p",{parentName:"blockquote"},"\u4f8b\u5982\uff1a ",(0,l.kt)("a",{parentName:"p",href:"https://www.baidu.com/s?wd=yuan"},"https://www.baidu.com/s?wd=yuan"),"     \u5176\u4e2dhttps\u662f\u534f\u8bae\uff0c",(0,l.kt)("a",{parentName:"p",href:"http://www.baidu.com"},"www.baidu.com"),"\xa0\u662fIP\uff0c\u7aef\u53e3\u9ed8\u8ba480\uff0c/s\u662f\u8def\u5f84\uff0c\u53c2\u6570\u662fwd=yuan"),(0,l.kt)("ol",{parentName:"blockquote",start:2},(0,l.kt)("li",{parentName:"ol"},"\u8bf7\u6c42\u65b9\u5f0f: get\u4e0epost\u8bf7\u6c42")),(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},"GET\u63d0\u4ea4\u7684\u6570\u636e\u4f1a\u653e\u5728URL\u4e4b\u540e\uff0c\u4ee5?\u5206\u5272URL\u548c\u4f20\u8f93\u6570\u636e\uff0c\u53c2\u6570\u4e4b\u95f4\u4ee5&\u76f8\u8fde\uff0c\u5982EditBook?name=test1&id=123456. POST\u65b9\u6cd5\u662f\u628a\u63d0\u4ea4\u7684\u6570\u636e\u653e\u5728HTTP\u5305\u7684\u8bf7\u6c42\u4f53\u4e2d."),(0,l.kt)("li",{parentName:"ul"},"GET\u63d0\u4ea4\u7684\u6570\u636e\u5927\u5c0f\u6709\u9650\u5236\uff08\u56e0\u4e3a\u6d4f\u89c8\u5668\u5bf9URL\u7684\u957f\u5ea6\u6709\u9650\u5236\uff09\uff0c\u800cPOST\u65b9\u6cd5\u63d0\u4ea4\u7684\u6570\u636e\u6ca1\u6709\u9650\u5236")),(0,l.kt)("ol",{parentName:"blockquote",start:3},(0,l.kt)("li",{parentName:"ol"},"\u54cd\u5e94\u72b6\u6001\u7801\uff1a\u72b6\u6001\u7801\u7684\u804c \u662f\u5f53\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u7aef\u53d1\u9001\u8bf7\u6c42\u65f6, \u8fd4\u56de\u7684\u8bf7\u6c42 \u7ed3\u679c\u3002\u501f\u52a9\u72b6\u6001\u7801,\u7528\u6237\u53ef\u4ee5\u77e5\u9053\u670d\u52a1\u5668\u7aef\u662f\u6b63\u5e38 \u7406\u4e86\u8bf7\u6c42,\u8fd8\u662f\u51fa \u73b0\u4e86 \u3002\u72b6\u6001\u7801\u5982200 OK,\u4ee53\u4f4d\u6570\u5b57\u548c\u539f\u56e0 \u7ec4\u6210\u3002"))),(0,l.kt)("h2",{id:"13quick-start"},"1.3\u3001quick start"),(0,l.kt)("p",null,"Gin \u662f\u4e00\u4e2a\u7528 Go (Golang) \u7f16\u5199\u7684 web \u6846\u67b6\uff08web\u6846\u67b6\u5c31\u662fweb\u5e94\u7528\u7a0b\u5e8f\u6846\u67b6\uff09\u3002 \u5b83\u662f\u4e00\u4e2a\u7c7b\u4f3c\u4e8e ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/go-martini/martini"},"martini")," \u4f46\u62e5\u6709\u66f4\u597d\u6027\u80fd\u7684 API \u6846\u67b6, \u7531\u4e8e ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/julienschmidt/httprouter"},"httprouter"),"\uff0c\u901f\u5ea6\u63d0\u9ad8\u4e86\u8fd1 40 \u500d\u3002 \u5982\u679c\u4f60\u662f\u6027\u80fd\u548c\u9ad8\u6548\u7684\u8ffd\u6c42\u8005, \u4f60\u4f1a\u7231\u4e0a Gin."),(0,l.kt)("h3",{id:"131\u5b89\u88c5"},"1.3.1\u3001\u5b89\u88c5"),(0,l.kt)("p",null,"\u8981\u5b89\u88c5 Gin \u8f6f\u4ef6\u5305\uff0c\u9700\u8981\u5148\u5b89\u88c5 Go \u5e76\u8bbe\u7f6e Go \u5de5\u4f5c\u533a\u3002"),(0,l.kt)("p",null,"1.\u4e0b\u8f7d\u5e76\u5b89\u88c5 gin\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"$ go get -u github.com/gin-gonic/gin\n")),(0,l.kt)("p",null,"2.\u5c06 gin \u5f15\u5165\u5230\u4ee3\u7801\u4e2d\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'import "github.com/gin-gonic/gin"\n')),(0,l.kt)("p",null,"3.\uff08\u53ef\u9009\uff09\u5982\u679c\u4f7f\u7528\u8bf8\u5982 ",(0,l.kt)("inlineCode",{parentName:"p"},"http.StatusOK")," \u4e4b\u7c7b\u7684\u5e38\u91cf\uff0c\u5219\u9700\u8981\u5f15\u5165 ",(0,l.kt)("inlineCode",{parentName:"p"},"net/http")," \u5305\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'import "net/http"\n')),(0,l.kt)("h3",{id:"132quick-start"},"1.3.2\u3001quick start"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "github.com/gin-gonic/gin"\n    "net/http"\n)\n\nfunc main() {\n    r := gin.Default()\n    // \u8fd4\u56de\u4e00\u4e2ajson\u6570\u636e\n    r.GET("/user", func(c *gin.Context) {\n        c.JSON(200, gin.H{\n            "user": "yuan",\n        })\n    })\n\n    // \u8fd4\u56de\u4e00\u4e2ahtml\u9875\u9762\n    r.LoadHTMLGlob("templates/*")\n    r.GET("/index", func(c *gin.Context) {\n        c.HTML(http.StatusOK, "index.html", nil)\n    })\n\n    r.Run() // \u76d1\u542c\u5e76\u5728 0.0.0.0:8080 \u4e0a\u542f\u52a8\u670d\u52a1\n}\n')),(0,l.kt)("h3",{id:"133mvc"},"1.3.3\u3001mvc"),(0,l.kt)("p",null,"\u5e7f\u4e49\u770bMVC\uff0cM\u662f\u6307\u4e1a\u52a1\u6a21\u578b\uff0cV\u662f\u6307\u7528\u6237\u754c\u9762\uff0cC\u5219\u662f\u63a7\u5236\u5668\uff0c\u4f7f\u7528MVC\u7684\u76ee\u7684\u662f\u5c06M\u548cV\u7684\u5b9e\u73b0\u4ee3\u7801\u5206\u79bb\uff0c\u4ece\u800c\u4f7f\u540c\u4e00\u4e2a\u7a0b\u5e8f\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u8868\u73b0\u5f62\u5f0f\u3002\u5176\u4e2d\uff0cView\u7684\u5b9a\u4e49\u6bd4\u8f83\u6e05\u6670\uff0c\u5c31\u662f\u7528\u6237\u754c\u9762\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/golang/assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ3NzE0Mjg4,size_16,color_FFFFFF,t_70-9027201-9027242.png",alt:"img"})),(0,l.kt)("blockquote",null,(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},"\u89c6\u56fe\u5c42\uff08View\uff09\uff1a\u8d1f\u8d23\u683c\u5f0f\u5316\u6570\u636e\u5e76\u628a\u5b83\u4eec\u5448\u73b0\u7ed9\u7528\u6237\uff0c\u5305\u62ec\u6570\u636e\u5c55\u793a\u3001\u7528\u6237\u4ea4\u4e92\u3001\u6570\u636e\u9a8c\u8bc1\u3001\u754c\u9762\u8bbe\u8ba1\u7b49\u529f\u80fd\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u63a7\u5236\u5c42\uff08Controller\uff09\uff1a\u8d1f\u8d23\u63a5\u6536\u5e76\u8f6c\u53d1\u8bf7\u6c42\uff0c\u5bf9\u8bf7\u6c42\u8fdb\u884c\u5904\u7406\u540e\uff0c\u6307\u5b9a\u89c6\u56fe\u5e76\u5c06\u54cd\u5e94\u7ed3\u679c\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u6570\u636e\u6a21\u578b\u5c42\uff08Model\uff09\uff1a\u6a21\u578b\u5bf9\u8c61\u62e5\u6709\u6700\u591a\u7684\u5904\u7406\u4efb\u52a1\uff0c\u662f\u5e94\u7528\u7a0b\u5e8f\u7684\u4e3b\u4f53\u90e8\u5206\uff0c\u5b83\u8d1f\u8d23\u6570\u636e\u903b\u8f91\uff08\u4e1a\u52a1\u89c4\u5219\uff09\u7684\u5904\u7406\u548c\u5b9e\u73b0\u6570\u636e\u64cd\u4f5c\uff08\u5373\u5bf9\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u589e\u5220\u6539\u67e5\uff09\u3002"))),(0,l.kt)("p",null,"MVC(Model-View-Controller) \u6a21\u5f0f\u7684\u57fa\u672c\u601d\u60f3\u662f\uff1a\u6570\u636e \uff0c\u663e\u793a\u548c\u5904\u7406\u76f8\u5206\u79bb\u3002"),(0,l.kt)("p",null,"Gin\u6846\u67b6\u7684\u6d41\u7a0b\u56fe:"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/golang/assets/Gin%E6%A1%86%E6%9E%B6%E6%B5%81%E7%A8%8B%E5%9B%BE-5321444-5321446.png",alt:"Gin\u6846\u67b6\u6d41\u7a0b\u56fe"})),(0,l.kt)("h3",{id:"133timer\u6848\u4f8b"},"1.3.3\u3001timer\u6848\u4f8b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"")),(0,l.kt)("h3",{id:"134\u767b\u9646\u6848\u4f8b"},"1.3.4\u3001\u767b\u9646\u6848\u4f8b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"")),(0,l.kt)("h1",{id:"\u4e8cgin\u8def\u7531"},"\u4e8c\u3001Gin\u8def\u7531"),(0,l.kt)("h2",{id:"21\u8def\u7531\u65b9\u6cd5"},"2.1\u3001\u8def\u7531\u65b9\u6cd5"),(0,l.kt)("p",null,"\u8def\u7531\u7cfb\u7edf\u652f\u6301\u4efb\u610f\u65b9\u5f0f\u7684\u8bf7\u6c42\uff0c\u5982\u4e0b\u7684\u65b9\u6cd5\u7528\u6765\u63d0\u4f9b\u5bf9\u5e94\u65b9\u6cd5\u6765\u63a5\u6536\u8bf7\u6c42\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},"\nfunc (group *RouterGroup) DELETE(relativePath string, handlers ...HandlerFunc) IRoutes\nfunc (group *RouterGroup) GET(relativePath string, handlers ...HandlerFunc) IRoutes\nfunc (group *RouterGroup) HEAD(relativePath string, handlers ...HandlerFunc) IRoutes\nfunc (group *RouterGroup) OPTIONS(relativePath string, handlers ...HandlerFunc) IRoutes\nfunc (group *RouterGroup) PATCH(relativePath string, handlers ...HandlerFunc) IRoutes\nfunc (group *RouterGroup) POST(relativePath string, handlers ...HandlerFunc) IRoutes\nfunc (group *RouterGroup) PUT(relativePath string, handlers ...HandlerFunc) IRoutes\n// \u4efb\u610f\u8def\u7531\nfunc (group *RouterGroup) ANY(relativePath string, handlers ...HandlerFunc) IRoutes\n\n")),(0,l.kt)("p",null,"\u6848\u4f8b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'func main() {\n    r := gin.Default()\n    r.GET("/book", func(c *gin.Context) {\n        c.JSON(200, gin.H{\n            "message": "GET",\n        })\n    })\n\n    r.POST("/book", func(c *gin.Context) {\n        c.JSON(200, gin.H{\n            "message": "POST",\n        })\n    })\n\n    r.PUT("/book", func(c *gin.Context) {\n        c.JSON(200, gin.H{\n            "message": "PUT",\n        })\n    })\n\n    r.DELETE("/book", func(c *gin.Context) {\n        c.JSON(200, gin.H{\n            "message": "DELETE",\n        })\n    })\n  \n  // \u8def\u7531\u5339\u914d\u4e0d\u6210\u529f\n    r.NoRoute(func(c *gin.Context) {\n        c.HTML(http.StatusNotFound, "404.html", nil)\n    })\n  \n}\n')),(0,l.kt)("h2",{id:"22\u8def\u7531\u5206\u7ec4"},"2.2\u3001\u8def\u7531\u5206\u7ec4"),(0,l.kt)("p",null,"\u8def\u7531\u5206\u7ec4\u7528\u4e8e\u5c06\u591a\u4e2a\u8def\u7531\u8fdb\u884c\u7edf\u4e00\u7684\u5904\u7406"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// \u4e66\u7c4d\u76f8\u5173\u7684\u8def\u7531\nr := gin.Default()\n\nbookRoute := r.Group("/books")\n{\n  bookRoute.GET("/", GetBook)\n    bookRoute.POST("/add", AddBook)\n    bookRoute.GET("/edit", EditBook)\n    bookRoute.GET("/delete", DeleteBook)\n}\n\n// \u51fa\u7248\u793e\u76f8\u5173\u7684\u8def\u7531\npublishRoute := r.Group("/publish")\n{\n  publishRoute.GET("/", GetPublish)\n    publishRoute.POST("/add", AddPublish)\n    publishRoute.GET("/edit",EditPublish)\n    publishRoute.GET("/delete",DeletePublish)\n}\nr.Run(":8080")\n\n\n')),(0,l.kt)("h1",{id:"\u4e09\u8bf7\u6c42\u4e0e\u54cd\u5e94"},"\u4e09\u3001\u8bf7\u6c42\u4e0e\u54cd\u5e94"),(0,l.kt)("h2",{id:"31\u8bf7\u6c42\u6570\u636e"},"3.1\u3001\u8bf7\u6c42\u6570\u636e"),(0,l.kt)("h3",{id:"1\u83b7\u53d6\u57fa\u672c\u8bf7\u6c42\u6570\u636e"},"\uff081\uff09\u83b7\u53d6\u57fa\u672c\u8bf7\u6c42\u6570\u636e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'  r.GET("/test", func(c *gin.Context) {\n  // \u83b7\u53d6\u57fa\u672c\u8bf7\u6c42\u4fe1\u606f\n  fmt.Println(c.Request.Method)     // GET\n  fmt.Println(c.Request.URL)        // /test\n  fmt.Println(c.Request.RemoteAddr) // 127.0.0.1:58581\n  fmt.Println(c.ClientIP())         // 127.0.0.1\n  // \u83b7\u53d6\u8bf7\u6c42\u5934\n  fmt.Println(c.Request.Header)\n  fmt.Println(c.Request.Header["User-Agent"])\n  fmt.Println(c.GetHeader("User-Agent"))\n\n  c.String(200, "test OK!") \n\n})\n')),(0,l.kt)("h3",{id:"2\u83b7\u53d6\u8def\u5f84\u53c2\u6570"},"\uff082\uff09\u83b7\u53d6\u8def\u5f84\u53c2\u6570"),(0,l.kt)("p",null,"\u83b7\u53d6URL\u8def\u5f84\u53c2\u6570\uff0c\u6307\u7684\u662f\u83b7\u53d6/user/:id\u8fd9\u7c7b\u578b\u8def\u7531\u7ed1\u5b9a\u7684\u53c2\u6570\uff0c\u8fd9\u4e2a\u4f8b\u2f26\u7ed1\u5b9a\u4e86\u2f00\u4e2a\u53c2\u6570id\uff0c\u83b7\u53d6url\u8def\u5f84\u53c2\u6570\u5e38\u2f64\u51fd\u6570\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},"func(c*Context)Param(keystring)string\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// \u4f8b\u2f26\uff1a\nr:=gin.Default()\nr.GET("/user/:id",func(c*gin.Context){\n    //\u83b7\u53d6url\u53c2\u6570id\n    id:=c.Param("id")\n})\n')),(0,l.kt)("h3",{id:"3\u83b7\u53d6\u67e5\u8be2\u53c2\u6570"},"\uff083\uff09\u83b7\u53d6\u67e5\u8be2\u53c2\u6570"),(0,l.kt)("p",null,"Get\u8bf7\u6c42url\u4f8b\u5b50\uff1a",(0,l.kt)("inlineCode",{parentName:"p"},"/path?kd=yuan")),(0,l.kt)("p",null,"\u83b7\u53d6Get\u8bf7\u6c42\u53c2\u6570\u7684\u5e38\u7528\u51fd\u6570\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-haskell"},"func(c*Context)Query(keystring)string\nfunc(c*Context)DefaultQuery(key,defaultValuestring)string\nfunc(c*Context)GetQuery(keystring)(string,bool)\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'// \u4f8b\u2f26\uff1a\nfuncHandler(c *gin.Context){\n    //\u83b7\u53d6name\u53c2\u6570,\u901a\u8fc7Query\u83b7\u53d6\u7684\u53c2\u6570\u503c\u662fString\u7c7b\u578b\u3002\n    name:=c.Query("name")\n    //\u83b7\u53d6name\u53c2\u6570,\u8ddfQuery\u51fd\u6570\u7684\u533a\u522b\u662f\uff0c\u53ef\u4ee5\u901a\u8fc7\u7b2c\u2f06\u4e2a\u53c2\u6570\u8bbe\u7f6e\u9ed8\u8ba4\u503c\u3002\n    name:=c.DefaultQuery("name","root")\n    //\u83b7\u53d6id\u53c2\u6570,\u901a\u8fc7GetQuery\u83b7\u53d6\u7684\u53c2\u6570\u503c\u4e5f\u662fString\u7c7b\u578b,\n    //\u533a\u522b\u662fGetQuery\u8fd4\u56de\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u2f00\u4e2a\u662f\u53c2\u6570\u503c\uff0c\u7b2c\u2f06\u4e2a\u53c2\u6570\u662f\u53c2\u6570\u662f\u5426\u5b58\u5728\u7684bool\u503c\uff0c\u53ef\u4ee5\u2f64\u6765\u5224\u65ad\u53c2\u6570\u662f\u5426\u5b58\u5728\u3002\n    id,ok:=c.GetQuery("id")\n    if!ok{\n    //\u53c2\u6570\u4e0d\u5b58\u5728\n    }\n}\n// \u63d0\u2f70\uff1aGetQuery\u51fd\u6570\uff0c\u5224\u65ad\u53c2\u6570\u662f\u5426\u5b58\u5728\u7684\u903b\u8f91\u662f\uff0c\u53c2\u6570\u503c\u4e3a\u7a7a\uff0c\u53c2\u6570\u4e5f\u7b97\u5b58\u5728\uff0c\u53ea\u6709\u6ca1\u6709\u63d0\u4ea4\u53c2\u6570\uff0c\u624d\u7b97\u53c2\u6570\u4e0d\u5b58\u5728\u3002\n')),(0,l.kt)("h3",{id:"4\u83b7\u53d6postform\u6570\u636e"},"\uff084\uff09\u83b7\u53d6PostForm\u6570\u636e"),(0,l.kt)("p",null,"\u83b7\u53d6Post\u8bf7\u6c42\u53c2\u6570\u7684\u5e38\u7528\u51fd\u6570\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},"func(c*Context)PostForm(keystring)string\nfunc(c*Context)DefaultPostForm(key,defaultValuestring)string\nfunc(c*Context)GetPostForm(keystring)(string,bool)\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'// \u4f8b\u2f26\uff1a\nfuncHandler(c *gin.Context){\n    //\u83b7\u53d6name\u53c2\u6570,\u901a\u8fc7PostForm\u83b7\u53d6\u7684\u53c2\u6570\u503c\u662fString\u7c7b\u578b\u3002\n    name:=c.PostForm("name")\n    //\u8ddfPostForm\u7684\u533a\u522b\u662f\u53ef\u4ee5\u901a\u8fc7\u7b2c\u2f06\u4e2a\u53c2\u6570\u8bbe\u7f6e\u53c2\u6570\u9ed8\u8ba4\u503c\n    name:=c.DefaultPostForm("name","root")\n    //\u83b7\u53d6id\u53c2\u6570,\u901a\u8fc7GetPostForm\u83b7\u53d6\u7684\u53c2\u6570\u503c\u4e5f\u662fString\u7c7b\u578b,\n        //\u533a\u522b\u662fGetPostForm\u8fd4\u56de\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u2f00\u4e2a\u662f\u53c2\u6570\u503c\uff0c\u7b2c\u2f06\u4e2a\u53c2\u6570\u662f\u53c2\u6570\u662f\u5426\u5b58\u5728\u7684bool\u503c\uff0c\u53ef\u4ee5\u2f64\u6765\u5224\u65ad\u53c2\u6570\u662f\u5426\u5b58\u5728\u3002\n    id,ok:=c.GetPostForm("id")\n    if!ok{\n    //\u53c2\u6570\u4e0d\u5b58\u5728\n    }\n    // \u83b7\u53d6PostForm\u7684\u6570\u7ec4\u503c\n    names:=c.PostFormArray("names")\n}\n')),(0,l.kt)("h3",{id:"5shouldbind\u51fd\u6570"},"\uff085\uff09ShouldBind\u51fd\u6570"),(0,l.kt)("p",null,"\u524d\u2faf\u83b7\u53d6\u53c2\u6570\u7684\u2f45\u5f0f\u90fd\u662f\u2f00\u4e2a\u4e2a\u53c2\u6570\u7684\u8bfb\u53d6\uff0c\u2f50\u8f83\u2fc7\u70e6\uff0cGin\u6846\u67b6\u2f40\u6301\u5c06\u8bf7\u6c42\u53c2\u6570\u2f83\u52a8\u7ed1\u5b9a\u5230\u2f00\u4e2astruct\u5bf9\u8c61\uff0c\u8fd9\u79cd\u2f45\u5f0f\u2f40\u6301Get/Post\u8bf7\u6c42\uff0c\u4e5f\u2f40\u6301http\u8bf7\u6c42body\u5185\u5bb9\u4e3ajson/xml\u683c\u5f0f\u7684\u53c2\u6570\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"ShouldBind"),"\u5f3a\u5927\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u57fa\u4e8e\u8bf7\u6c42\u7684",(0,l.kt)("strong",{parentName:"p"},"Content-Type"),"\u8bc6\u522b\u8bf7\u6c42\u6570\u636e\u7c7b\u578b\u5e76\u5229\u7528\u53cd\u5c04\u673a\u5236\u81ea\u52a8\u63d0\u53d6\u8bf7\u6c42\u4e2dquerystring\u3001form\u8868\u5355\u3001JSON\u3001XML\u7b49\u53c2\u6570\u5230\u7ed3\u6784\u4f53\u4e2d\u3002\u80fd\u591f\u57fa\u4e8e\u8bf7\u6c42\u81ea\u52a8\u63d0\u53d6JSON\u3001form\u8868\u5355\u548cquerystring\u7c7b\u578b\u7684\u6570\u636e\uff0c\u5e76\u628a\u503c\u7ed1\u5b9a\u5230\u6307\u5b9a\u7684\u7ed3\u6784\u4f53\u5bf9\u8c61\u3002"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},'struct\u6807\u7b7e\u8bf4\u660e\uff1a\n\uff081\uff09json:"name" \u6570\u636e\u683c\u5f0f\u4e3ajson\u683c\u5f0f\uff0c\u5e76\u4e14json\u5b57\u6bb5\u540d\u4e3aname\n\uff082\uff09form:"name" \u8868\u5355\u53c2\u6570\u540d\u4e3aname\n\u63d0\u2f70\uff1a\u4f60\u53ef\u4ee5\u6839\u636e\u2f83\u2f30\u7684\u9700\u8981\u9009\u62e9\u2f40\u6301\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4f8b\u5982\u9700\u8981\u2f40\u6301json\u6570\u636e\u683c\u5f0f\uff0c\u53ef\u4ee5\u8fd9\u6837\u5b9a\u4e49\u5b57\u6bb5\u6807\u7b7e:json:"name"')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'package main\n\nimport (\n    "github.com/gin-gonic/gin"\n    "log"\n)\n\ntype User struct {\n    Name  string `json:"name" form:"name"`\n    Age   int    `json:"age" form:"age"`\n    Email string `json:"email" form:"email"`\n}\n\nfunc main() {\n    // 1.\u521b\u5efa\u8def\u7531\n    r := gin.Default()\n\n    r.POST("/user/", func(c *gin.Context) {\n        //\u521d\u59cb\u5316User\n        user := User{}\n        //\u901a\u8fc7ShouldBind\u51fd\u6570\uff0c\u5c06\u8bf7\u6c42\u53c2\u6570\u7ed1\u5b9a\u5230struct\u5bf9\u8c61\uff0c\u5904\u7406json\u8bf7\u6c42\u4ee3\u7801\u662f\u2f00\u6837\u7684\u3002\n        //\u5982\u679c\u662fpost\u8bf7\u6c42\u5219\u6839\u636eContent-Type\u5224\u65ad\uff0c\u63a5\u6536\u7684\u662fjson\u6570\u636e\uff0c\u8fd8\u662f\u666e\u901a\u7684http\u8bf7\u6c42\u53c2\u6570\n        if c.ShouldBind(&user) == nil {\n            //\u7ed1\u5b9a\u6210\u529f\uff0c\u6253\u5370\u8bf7\u6c42\u53c2\u6570\n            log.Println("user:", user)\n        }\n        //http\u8bf7\u6c42\u8fd4\u56de\u2f00\u4e2a\u5b57\u7b26\u4e32\n        c.JSON(200, gin.H{\n            "msg":             "parser Success",\n            "\u8bf7\u6c42\u7684content-type": c.ContentType(),\n            "\u89e3\u6784\u540e\u7684\u6570\u636e":          user,\n        })\n    })\n\n    r.Run(":8080")\n}\n')),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/golang/assets/image-20221202134138674-9959700-9959848.png",alt:"image-20221202134138674"})),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/golang/assets/image-20221202134224622-9959745-9959864.png",alt:"image-20221202134224622"})),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/golang/assets/image-20221202134317876-9959799.png",alt:"image-20221202134317876"})),(0,l.kt)("p",null,"ShouldBind\u6709\u2f00\u7cfb\u5217\u51fd\u6570\uff0c\u2f24\u81f4\u5c31\u662f\u628a\u524d\u2faf\u7684\u2f45\u5f0f\u7ed1\u5b9a\u5230\u7ed3\u6784\u4f53\u7684\u2f45\u5f0f\uff0c\u5982\uff1aShouldBindUri()\u3001ShouldBindQuery()\u7b49\u7b49\uff0c\u2f64\u6cd5\u548cShouldBind\u7c7b\u4f3c\uff0c\u8fd9\u2fa5\u5c31\u4e0d\u5c55\u5f00\u4ecb\u7ecd\u4e86\u3002"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u63d0\u2f70\uff1a\u5982\u679c\u4f60\u901a\u8fc7http\u8bf7\u6c42body\u4f20\u9012json\u683c\u5f0f\u7684\u8bf7\u6c42\u53c2\u6570\uff0c\u5e76\u4e14\u901a\u8fc7post\u8bf7\u6c42\u7684\u2f45\u5f0f\u63d0\u4ea4\u53c2\u6570\uff0c\u5219\u9700\u8981\u5c06Content-Type\u8bbe\u7f6e\u4e3aapplication/json,\u5982\u679c\u662fxml\u683c\u5f0f\u7684\u6570\u636e\uff0c\u5219\u8bbe\u7f6e\u4e3aapplication/xml")),(0,l.kt)("h2",{id:"32\u54cd\u5e94\u6570\u636e"},"3.2\u3001\u54cd\u5e94\u6570\u636e"),(0,l.kt)("h3",{id:"321\u54cd\u5e94\u4e0d\u540c\u7684\u6570\u636e\u683c\u5f0f"},"3.2.1\u3001\u54cd\u5e94\u4e0d\u540c\u7684\u6570\u636e\u683c\u5f0f"),(0,l.kt)("h4",{id:"1\u54cd\u5e94\u7b80\u5355\u5b57\u7b26\u4e32"},"\uff081\uff09\u54cd\u5e94\u7b80\u5355\u5b57\u7b26\u4e32"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'r.GET("/str", func(c *gin.Context) {\n        c.String(200, "hello world!")\n})\n')),(0,l.kt)("h4",{id:"2\u54cd\u5e94html\u9875\u9762"},"\uff082\uff09\u54cd\u5e94html\u9875\u9762"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'  r.LoadHTMLGlob("templates/*")\n    r.GET("/index", func(c *gin.Context) {\n        c.HTML(http.StatusOK, "index.html",nil)\n    })\n')),(0,l.kt)("h4",{id:"3\u54cd\u5e94json"},"\uff083\uff09\u54cd\u5e94json"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// \u8fd4\u56de\u4e00\u4e2ajson\u6570\u636e\n    r.GET("/json", func(c *gin.Context) {\n        c.JSON(200, gin.H{\n            "message": "json\u6570\u636e",\n        })\n    })\n')),(0,l.kt)("h4",{id:"4\u54cd\u5e94xml\u6570\u636e"},"\uff084\uff09\u54cd\u5e94xml\u6570\u636e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'// \u8fd4\u56de\u4e00\u4e2axml\u6570\u636e\n    r.GET("/xml", func(c *gin.Context) {\n        c.XML(http.StatusOK, gin.H{"message": "xml\u6d88\u606f"})\n    })\n')),(0,l.kt)("h4",{id:"5\u54cd\u5e94protobuf\u683c\u5f0f"},"\uff085\uff09\u54cd\u5e94protobuf\u683c\u5f0f"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'func indexHandler(c *gin.Context) {\n\n    //c.XML(http.StatusOK, gin.H{"message":"\u6d88\u606f"})\n    //c.YAML(http.StatusOK, gin.H{"message":"\u6d88\u606f"})\n    reps := []int64{int64(9),int64(55)}\n\n    // \u81ea\u5b9a\u4e49\u6570\u636e\n    label := "\u4f60\u597d\u554a,\u4eca\u5929\u5929\u6c14\u633a\u597d\u7684"\n\n    // \u4f20protobuf\u683c\u5f0f\u6570\u636e\n    data := &protoexample.Test{\n        Label: &label,\n        Reps: reps,\n    }\n    fmt.Println(data)\n    c.ProtoBuf(200,data)\n}\n')),(0,l.kt)("h3",{id:"322\u9759\u6001\u6587\u4ef6"},"3.2.2\u3001\u9759\u6001\u6587\u4ef6"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// \u9759\u6001\u6587\u4ef6\u914d\u7f6e\nr.Static("/static", "./static")\n')),(0,l.kt)("h3",{id:"323\u91cd\u5b9a\u5411"},"3.2.3\u3001\u91cd\u5b9a\u5411"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'c.Redirect(http.StatusMovedPermanently, "http://www.baidu.com")\nc.Redirect(http.StatusMovedPermanently, "/xml")\n')),(0,l.kt)("h3",{id:"324\u5f02\u6b65\u54cd\u5e94"},"3.2.4\u3001\u5f02\u6b65\u54cd\u5e94"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'package main\n\nimport (\n    "log"\n    "time"\n    "github.com/gin-gonic/gin"\n)\n\nfunc main() {\n    // 1.\u521b\u5efa\u8def\u7531\n    // \u9ed8\u8ba4\u4f7f\u7528\u4e862\u4e2a\u4e2d\u95f4\u4ef6Logger(), Recovery()\n    r := gin.Default()\n    // 1.\u5f02\u6b65\n    r.GET("/async", func(c *gin.Context) {\n        // \u9700\u8981\u641e\u4e00\u4e2a\u526f\u672c\n        copyContext := c.Copy()\n        // \u5f02\u6b65\u5904\u7406\n        go func() {\n            time.Sleep(3 * time.Second)\n            log.Println("\u5f02\u6b65\u6267\u884c\uff1a" + copyContext.Request.URL.Path)\n        }()\n\n        c.JSON(200, gin.H{"msg": "\u5f02\u6b65\u6267\u884c\u4e2d"})\n\n    })\n    // 2.\u540c\u6b65\n    r.GET("/sync", func(c *gin.Context) {\n        time.Sleep(3 * time.Second)\n        log.Println("\u540c\u6b65\u6267\u884c\uff1a" + c.Request.URL.Path)\n        c.JSON(200, gin.H{"msg": "\u540c\u6b65\u6267\u884c\u7ed3\u675f"})\n    })\n\n    r.Run(":8080")\n}\n\n')),(0,l.kt)("h1",{id:"\u56dbgin\u6a21\u677f"},"\u56db\u3001Gin\u6a21\u677f"),(0,l.kt)("p",null,"\u6a21\u677f\u5728web\u5f00\u53d1\u4e2d\u2f34\u6cdb\u4f7f\u2f64\uff0c\u5b83\u80fd\u591f\u6709\u6548\u7684\u5c06\u4e1a\u52a1\u903b\u8f91\u548c\u9875\u2faf\u903b\u8f91\u5206\u5f00\uff0c\u4f7f\u4ee3\u7801\u53ef\u8bfb\u6027\u589e\u5f3a\u3001\u5e76\u4e14\u66f4\u52a0\u5bb9\u6613\u7406\u89e3\u548c\u7ef4\u62a4\u3002 \u6a21\u677f\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u2f00\u4e2a\u5176\u4e2d\u5305\u6db5\u5360\u4f4d\u53d8\u91cf\u8868\u2f70\u52a8\u6001\u7684\u90e8\u5206\u7684\u2f42\u4ef6\uff0c\u6a21\u677f\u2f42\u4ef6\u5728\u7ecf\u8fc7\u52a8\u6001\u8d4b\u503c\u540e\uff0c\u8fd4\u56de\u7ed9\u2f64\u6237\u3002"),(0,l.kt)("h2",{id:"41-\u53d8\u91cf\u6e32\u67d3"},"4.1 \u3001\u53d8\u91cf\u6e32\u67d3"),(0,l.kt)("p",null,"\u89c6\u56fe\u90e8\u5206\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport "github.com/gin-gonic/gin"\n\ntype Student struct {\n    Name string\n    Age  int\n}\n\nfunc main() {\n    // \u57fa\u4e8e\u83b7\u53d6\u5f15\u64ce\u5bf9\u8c61\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u8def\u7531\u5bf9\u8c61\n    r := gin.Default()\n    // \u52a0\u8f7d\u6a21\u677f\u6587\u4ef6\n    r.LoadHTMLGlob("templates/*")\n\n    r.GET("/index", func(context *gin.Context) {\n\n        context.HTML(200, "index.html", gin.H{\n            "user":       "yuan",\n            "state":      "\u5728\u7ebf",\n            "booksSlice": []string{"\u91d1\u74f6\u6885", "\u804a\u658b", "\u526a\u706f\u65b0\u8bdd", "\u56fd\u8272\u5929\u9999"},\n            "stuMap": map[string]interface{}{\n                "name":  "rain",\n                "age":   22,\n                "hobby": []string{"\u8db3\u7403", "\u7bee\u7403", "\u53cc\u8272\u7403"},\n            },\n            "stuStruct": Student{Name: "yuan", Age: 22},\n        })\n    })\n\n    // \u542f\u52a8:\u9ed8\u8ba4\u672c\u673a\u76848080\u7aef\u53e3\n    r.Run()\n}\n\n')),(0,l.kt)("p",null,"\u6a21\u677fhtml\u6587\u4ef6\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>Title</title>\n</head>\n<body>\n<h3>\u53d8\u91cf\u6e32\u67d3</h3>\n{{ . }}\n<p>{{.booksSlice}}</p>\n<p>{{index .booksSlice 0 }}</p>\n<p>{{index .booksSlice 1}}</p>\n<p>{{index .booksSlice 2}}</p>\n<p>{{.stuMap}}</p>\n<p>{{.stuMap.name}}</p>\n<p>{{.stuStruct}}</p>\n<p>{{.stuStruct.Name}}</p>\n\n</body>\n</html>\n')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u5207\u7247\u7684\u6df1\u5ea6\u67e5\u8be2\u4f9d\u9760\u5185\u7f6e\u51fd\u6570index\uff0cmap\u5bf9\u8c61\u548c\u7ed3\u6784\u4f53\u5bf9\u8c61\u7684\u6df1\u5ea6\u67e5\u8be2\u901a\u8fc7\u53e5\u70b9\u7b26\u5b9e\u73b0\uff01")),(0,l.kt)("h2",{id:"42-\u63a7\u5236\u7ed3\u6784"},"4.2 \u3001\u63a7\u5236\u7ed3\u6784"),(0,l.kt)("h4",{id:"1\u5206\u652f\u7ed3\u6784"},"\uff081\uff09\u5206\u652f\u7ed3\u6784"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},"{{if  pipeline}} T1 {{end}}\n{{if  pipeline}} T1 {{else}} T0 {{end}}\n{{if  pipeline}} T1 {{else if pipeline}} T0 {{end}}\n")),(0,l.kt)("blockquote",null,(0,l.kt)("ol",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ol"},"if\u7c7b\u4f3c\u4e0eGo\u7684if\u8bed\u53e5\uff0c\u5b83\u4e5f\u5177\u6709\u5355\u5206\u2f40\uff0c\u591a\u5206\u2f40\u7b49\u591a\u79cd\u7ed3\u6784\uff0c\u4e0d\u540c\u7684\u662f\u9700\u8981\u4f7f\u2f64end\u5173\u952e\u5b57\u7ed3\u675f\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u8868\u8fbe\u5f0f\u4e3afalse\u7684\u60c5\u51b5\u662f\u5404\u79cd\u6570\u636e\u5bf9\u8c61\u76840\u503c\uff1a\u6570\u503c0\uff0c\u6307\u9488\u6216\u63a5\u53e3\u662fnil\uff0c\u6570\u7ec4\u3001slice\u3001map\u6216string\u5219\u662flen\u4e3a0\u3002"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},"<h3>\u5206\u652f\u7ed3\u6784</h3>\n{{if gt .stuStruct.Age 18 }}\n<p>{{index .booksSlice 0 }}</p>\n<p>{{index .booksSlice 1}}</p>\n<p>{{index .booksSlice 2}}</p>\n<p>{{index .booksSlice 3}}</p>\n{{else}}\n<p>\u672a\u6210\u5e74\u533a</p>\n{{end}}\n")),(0,l.kt)("h4",{id:"2\u5faa\u73af\u7ed3\u6784"},"\uff082\uff09\u5faa\u73af\u7ed3\u6784"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u8868\u8fbe\u5f0f\u4e3afalse\u7684\u60c5\u51b5\u662f\u5404\u79cd\u6570\u636e\u5bf9\u8c61\u76840\u503c\uff1a\u6570\u503c0\uff0c\u6307\u9488\u6216\u63a5\u53e3\u662fnil\uff0c\u6570\u7ec4\u3001slice\u3001map\u6216string\u5219\u662flen\u4e3a0\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},"{{range $value := .}} {{end}}\n{{range $key,$value := .}} {{end}}\n")),(0,l.kt)("blockquote",null,(0,l.kt)("ol",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ol"},"\u5982\u679crange\u4e2d\u53ea\u8d4b\u503c\u7ed9\u4e00\u4e2a\u53d8\u91cf\uff0c\u5219\u8fd9\u4e2a\u53d8\u91cf\u662f\u5f53\u524d\u6b63\u5728\u8fed\u4ee3\u5143\u7d20\u7684\u503c\u3002\u5982\u679c\u8d4b\u503c\u7ed9\u4e24\u4e2a\u53d8\u91cf\uff0c\u5219\u7b2c\u4e00\u4e2a\u53d8\u91cf\u662f\u7d22\u5f15\u503c\uff0c\u7b2c\u4e8c\u4e2a\u53d8\u91cf\u662f\u5f53\u524d\u6b63\u5728\u8fed\u4ee3\u5143\u7d20\u7684\u503c\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u53d8\u91cf\u540d\u4ee5",(0,l.kt)("inlineCode",{parentName:"li"},"$"),"\u5f00\u5934"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},"<h3>\u5faa\u73af\u7ed3\u6784</h3>\n<p>\u56db\u5927\u540d\u8457</p>\n{{range $index,$value := .booksSlice}}\n<p>{{$index}} : {{$value}} </p>\n{{end}}\n\n<p>stuMap\u5b66\u751f\u7684\u6240\u6709\u7231\u597d</p>\n{{range $index,$value := .stuMap.hobby}}\n<p>{{$index}} : {{$value}} </p>\n{{end}}\n")),(0,l.kt)("h4",{id:"3\u53d8\u91cf\u8d4b\u503c"},"\uff083\uff09\u53d8\u91cf\u8d4b\u503c"),(0,l.kt)("p",null,"\u53ef\u4ee5\u5728template\u4e2d\u5b9a\u4e49\u53d8\u91cf\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},"// \u672a\u5b9a\u4e49\u8fc7\u7684\u53d8\u91cf\n{{$var := pipeline}}\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},". \u662f\u6709\u4f5c\u7528\u57df\u7684")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'// \u5c55\u793a\u5e74\u9f84\u5927\u4e8erain\u7684\u6240\u6709\u5b66\u751f\n// "students": []Student{{Name: "yuan", Age: 22}, {Name: "alvin", Age: 16}, {Name: "eric", Age: 23}},\n\n// \u9519\u8bef\u5199\u6cd5\n{{range $index,$student := .students}}\n\n{{if gt $student.Age .stuMap.age }}   // \u6b64\u65f6\u7684.\u5df2\u7ecf\u4e0d\u662f\u5168\u5c40\u7684\u5bf9\u8c61\uff0c\u800c\u662f\u5f53\u524d\u904d\u5386\u7684$student\u5bf9\u8c61\n<p>{{$student.Name}},{{$student.Age}}</p>\n{{end}}\n\n{{end}}\n\n// \u6b63\u786e\u5199\u6cd5\n{{$rainAge := .stuMap.age}}\n{{range $index,$student := .students}}\n{{if gt $student.Age $rainAge }}\n<p>{{$student.Name}},{{$student.Age}}</p>\n{{end}}\n{{end}}\n')),(0,l.kt)("h4",{id:"4\u6ce8\u91ca"},"\uff084\uff09\u6ce8\u91ca"),(0,l.kt)("p",null,"\u6ce8\u91ca\uff0c\u6267\u884c\u65f6\u4f1a\u5ffd\u7565\u3002\u53ef\u4ee5\u591a\u884c\u3002\u6ce8\u91ca\u4e0d\u80fd\u5d4c\u5957\uff0c\u5e76\u4e14\u5fc5\u987b\u7d27\u8d34\u5206\u754c\u7b26\u59cb\u6b62\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},"{{/* a comment */}}   \n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"{/ \u4e00\u5b9a\u8981\u7d27\u8d34")),(0,l.kt)("h2",{id:"43gin\u7684\u6a21\u677f\u51fd\u6570"},"4.3\u3001Gin\u7684\u6a21\u677f\u51fd\u6570"),(0,l.kt)("h4",{id:"1\u9ed8\u8ba4\u6a21\u677f\u51fd\u6570"},"\uff081\uff09\u9ed8\u8ba4\u6a21\u677f\u51fd\u6570"),(0,l.kt)("p",null,"\u8bed\u6cd5\u683c\u5f0f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"functionName [Argument...]\n")),(0,l.kt)("p",null,"Argument\u53c2\u6570\u662f\u53ef\u9009\u7684\uff0c\u5982\u679c\u6709\u591a\u4e2a\u53c2\u6570\uff0c\u53c2\u6570\u76f4\u63a5\u7528\u7a7a\u683c\u5206\u9694\u3002"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"\u51fd\u6570\u540d"),(0,l.kt)("th",{parentName:"tr",align:"left"},"\u51fd\u6570\u8c03\u7528\u683c\u5f0f"),(0,l.kt)("th",{parentName:"tr",align:"left"},"\u5bf9\u5e94\u5173\u7cfb\u8fd0\u7b97"),(0,l.kt)("th",{parentName:"tr",align:"left"},"\u8bf4\u660e"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"eq"),(0,l.kt)("td",{parentName:"tr",align:"left"},"eq arg1 arg2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"arg1 == arg2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"arg1\u7b49\u4e8earg2\u5219\u8fd4\u56detrue")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"ne"),(0,l.kt)("td",{parentName:"tr",align:"left"},"ne arg1 arg2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"arg1 != arg2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"arg1\u4e0d\u7b49\u4e8earg2\u5219\u8fd4\u56detrue")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"lt"),(0,l.kt)("td",{parentName:"tr",align:"left"},"lt arg1 arg2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"arg1 < arg2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"arg1\u5c0f\u4e8earg2\u5219\u8fd4\u56detrue")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"le"),(0,l.kt)("td",{parentName:"tr",align:"left"},"le arg1 arg2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"arg1 <= arg2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"arg1\u5c0f\u4e8e\u7b49\u4e8earg2\u5219\u8fd4\u56detrue")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"gt"),(0,l.kt)("td",{parentName:"tr",align:"left"},"gt arg1 arg2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"arg1 > arg2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"arg1\u5927\u4e8earg2\u5219\u8fd4\u56detrue")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"ge"),(0,l.kt)("td",{parentName:"tr",align:"left"},"ge arg1 arg2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"arg1 >= arg2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"arg1\u5927\u4e8e\u7b49\u4e8earg2\u5219\u8fd4\u56detrue")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"and"),(0,l.kt)("td",{parentName:"tr",align:"left"},"and \u8868\u8fbe\u5f0f1 \u8868\u8fbe\u5f0f2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u8868\u8fbe\u5f0f1 && \u8868\u8fbe\u5f0f2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u8868\u8fbe\u5f0f1\u548c\u8868\u8fbe\u5f0f2\u90fd\u4e3a\u771f\u7684\u65f6\u5019\u8fd4\u56detrue")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"or"),(0,l.kt)("td",{parentName:"tr",align:"left"},"or \u8868\u8fbe\u5f0f1 \u8868\u8fbe\u5f0f2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u8868\u8fbe\u5f0f1 ","|","|"," \u8868\u8fbe\u5f0f2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u8868\u8fbe\u5f0f1\u548c\u8868\u8fbe\u5f0f2\u5176\u4e2d\u4e00\u4e2a\u4e3a\u771f\u7684\u65f6\u5019\u8fd4\u56detrue")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"not"),(0,l.kt)("td",{parentName:"tr",align:"left"},"not \u8868\u8fbe\u5f0f"),(0,l.kt)("td",{parentName:"tr",align:"left"},"!\u8868\u8fbe\u5f0f"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u8868\u8fbe\u5f0f\u4e3afalse\u5219\u8fd4\u56detrue, \u53cd\u4e4b\u8fd4\u56defalse")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"index"),(0,l.kt)("td",{parentName:"tr",align:"left"},"index  arg \u7d22\u5f15/\u952e"),(0,l.kt)("td",{parentName:"tr",align:"left"},"index x 2 \u5373x","[2]"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u6bcf\u4e2a\u88ab\u7d22\u5f15\u7684\u4e3b\u4f53\u5fc5\u987b\u662f\u6570\u7ec4\u3001\u5207\u7247\u6216\u8005\u5b57\u5178")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"len"),(0,l.kt)("td",{parentName:"tr",align:"left"},"len arg"),(0,l.kt)("td",{parentName:"tr",align:"left"},"len x \u5373x\u7684\u5143\u7d20\u4e2a\u6570"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u7528\u4e8e\u8ba1\u7b97\u6570\u7ec4\u5927\u5c0f")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"urlquery"),(0,l.kt)("td",{parentName:"tr",align:"left"},"urlquery arg"),(0,l.kt)("td",{parentName:"tr",align:"left"},"urlquery url"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u7528\u4e8eurl\u7f16\u7801")))),(0,l.kt)("h4",{id:"2\u81ea\u5b9a\u4e49\u6a21\u677f\u51fd\u6570"},"\uff082\uff09\u81ea\u5b9a\u4e49\u6a21\u677f\u51fd\u6570"),(0,l.kt)("p",null,"\u89c6\u56fe\u90e8\u5206\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'func main() {\n\n    router := gin.Default()\n    router.SetFuncMap(template.FuncMap{\n        "add": func(x, y int) int {\n            return x + y\n        },\n    })\n    // \u8fd4\u56de\u4e00\u4e2ahtml\u9875\u9762\n    router.LoadHTMLGlob("templates/*")\n    router.GET("/index", index)\n    router.Run() // \u76d1\u542c\u5e76\u5728 0.0.0.0:8080 \u4e0a\u542f\u52a8\u670d\u52a1\n}\n')),(0,l.kt)("p",null,"\u6a21\u677f\u90e8\u5206\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},"{{add 2 3}}\n")),(0,l.kt)("h2",{id:"44\u5d4c\u5957\u4e0e\u7ee7\u627f"},"4.4\u3001\u5d4c\u5957\u4e0e\u7ee7\u627f"),(0,l.kt)("p",null,"Gin\u6846\u67b6\u9ed8\u8ba4\u90fd\u662f\u4f7f\u7528\u5355\u6a21\u677f\uff0c\u5982\u679c\u9700\u8981\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"block template"),"\u529f\u80fd\uff0c\u53ef\u4ee5\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},'"https://github.com/gin-contrib/multitemplate"'),"\u5e93\u5b9e\u73b0"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'import (\n    "github.com/gin-contrib/multitemplate"\n    "github.com/gin-gonic/gin"\n)\n')),(0,l.kt)("h4",{id:"1-\u5d4c\u5957define\u548ctemplate"},"\uff081\uff09 \u5d4c\u5957\uff1adefine\u548ctemplate"),(0,l.kt)("p",null,"\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\uff0c\u6211\u4eec\u4e0d\u53ef\u80fd\u53ea\u6709\u4e00\u4e2a\u6a21\u677f\uff0c\u4e00\u822c\u6765\u8bf4\u90fd\u6709\u5f88\u591a\u4e2a\u6a21\u677f\uff0c\u800c\u4e14\u8fd9\u4e9b\u6a21\u677f\u4e5f\u4f1a\u5171\u4eab\u4e00\u4e9b\u516c\u5171\u7684\u6a21\u677f\uff0c\u8fd9\u4e9b\u516c\u5171\u7684\u6a21\u677f\u6211\u4eec\u90fd\u53ef\u4ee5\u5b9a\u4e49\u6210\u5b50\u6a21\u677f\uff0c\u5728\u9700\u8981\u7684\u65f6\u5019\u8c03\u7528\u5b50\u6a21\u677f\uff0c\u5c31\u53ef\u4ee5\u5c06\u5b50\u6a21\u677f\u7684\u5185\u5bb9\u5d4c\u5165\u5f53\u524d\u6a21\u677f\u4e2d\u3002"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u63d0\u793a\uff1a\u5728\u9879\u76ee\u4e2d\u4f7f\u7528\u5b50\u6a21\u677f\uff0c\u53ef\u4ee5\u8ba9\u9879\u76ee\u6a21\u677f\u5177\u6709\u6a21\u5757\u5316\u7684\u80fd\u529b\uff0c\u63d0\u9ad8\u6a21\u5757\u590d\u7528\u80fd\u529b\u548c\u53ef\u7ef4\u62a4\u6027\u3002")),(0,l.kt)("p",null,"define\u53ef\u4ee5\u76f4\u63a5\u5728\u5f85\u89e3\u6790\u5185\u5bb9\u4e2d\u5b9a\u4e49\u4e00\u4e2a\u6a21\u677f,\u5b9a\u4e49\u4e86\u6a21\u677f\u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528template\u8fd9\u4e2aaction\u6765\u6267\u884c\u6a21\u677f\u3002template\u6709\u4e24\u79cd\u683c\u5f0f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'{{template "name"}}\n{{template "name" pipeline}}\n')),(0,l.kt)("p",null,'\u7b2c\u4e00\u79cd\u662f\u76f4\u63a5\u6267\u884c\u540d\u4e3aname\u7684template\uff0c\u70b9\u8bbe\u7f6e\u4e3anil\u3002\u7b2c\u4e8c\u79cd\u662f\u70b9"."\u8bbe\u7f6e\u4e3apipeline\u7684\u503c\uff0c\u5e76\u6267\u884c\u540d\u4e3aname\u7684template\u3002\u53ef\u4ee5\u5c06template\u770b\u4f5c\u662f\u51fd\u6570\uff1a'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'template("name)\ntemplate("name",pipeline)\n')),(0,l.kt)("p",null,"\u793a\u4f8b\uff1a\u5728t1\u9875\u9762\u4e2d\u548ct2\u9875\u9762\u4e2d\u5d4c\u5165\u4e00\u4e2a\u5e7f\u544a\u9875\u9762\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "github.com/gin-contrib/multitemplate"\n    "github.com/gin-gonic/gin"\n)\n\nfunc createMyRender() multitemplate.Renderer {\n    r := multitemplate.NewRenderer()\n    r.AddFromFiles("t1.html", "templates/t1.html", "templates/adv.html")\n    r.AddFromFiles("t2.html", "templates/t2.html", "templates/adv.html")\n    return r\n}\n\nfunc main() {\n    // \u57fa\u4e8e\u83b7\u53d6\u5f15\u64ce\u5bf9\u8c61\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u8def\u7531\u5bf9\u8c61\n    r := gin.Default()\n    // \u52a0\u8f7d\u6a21\u677f\u6587\u4ef6\n    //r.LoadHTMLGlob("templates/*")\n    r.HTMLRender = createMyRender()\n\n    r.GET("/test01", func(context *gin.Context) {\n        context.HTML(200, "t1.html", nil)\n    })\n    r.GET("/test02", func(context *gin.Context) {\n        context.HTML(200, "t2.html", nil)\n    })\n\n    // \u542f\u52a8:\u9ed8\u8ba4\u672c\u673a\u76848080\u7aef\u53e3\n    r.Run()\n}\n\n')),(0,l.kt)("p",null,"t1.html,t2.html"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html lang="en">\n\n<head>\n    <meta charset="utf-8">\n    <meta http-equiv="X-UA-Compatible" content="IE=9">\n    <title>Go Web Programming</title>\n</head>\n\n<body>\n\n<div>This is t1.html</div>\n{{ template "adv.html" }}\n\n</body>\n\n</html>\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html lang="en">\n\n<head>\n    <meta charset="utf-8">\n    <meta http-equiv="X-UA-Compatible" content="IE=9">\n    <title>Go Web Programming</title>\n</head>\n\n<body>\n\n<div>This is t2.html</div>\n{{ template "adv.html" }}\n\n</body>\n\n</html>\n')),(0,l.kt)("p",null,"adv.html"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'<div style="background-color: rebeccapurple;line-height: 200px;color: white;text-align: center">\n    \u8fd9\u662f\u4e00\u6761\u5e7f\u544a\u4fe1\u606f<br/>\n</div>\n')),(0,l.kt)("h4",{id:"2\u7ee7\u627fblock\u5757"},"\uff082\uff09\u7ee7\u627f\uff1ablock\u5757"),(0,l.kt)("p",null,'\u6839\u636e\u5b98\u65b9\u6587\u6863\u7684\u89e3\u91ca\uff1ablock\u7b49\u4ef7\u4e8edefine\u5b9a\u4e49\u4e00\u4e2a\u6a21\u677f\uff0c\u5e76\u5728"\u6709\u9700\u8981"\u7684\u5730\u65b9\u6267\u884c\u8fd9\u4e2a\u6a21\u677f\uff0c\u6267\u884c\u65f6\u5c06"."\u8bbe\u7f6e\u4e3apipeline\u7684\u503c\u3002'),(0,l.kt)("p",null,"\u4f46\u5e94\u8be5\u6ce8\u610f\uff0cblock\u7684\u7b2c\u4e00\u4e2a\u52a8\u4f5c\u662f\u6267\u884c\u540d\u4e3aname\u7684\u6a21\u677f\uff0c\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219\u5728\u6b64\u5904\u81ea\u52a8\u5b9a\u4e49\u8fd9\u4e2a\u6a21\u677f\uff0c\u5e76\u6267\u884c\u8fd9\u4e2a\u4e34\u65f6\u5b9a\u4e49\u7684\u6a21\u677f\u3002\u6362\u53e5\u8bdd\u8bf4\uff0cblock\u53ef\u4ee5\u8ba4\u4e3a\u662f\u8bbe\u7f6e\u4e00\u4e2a\u9ed8\u8ba4\u6a21\u677f\u3002"),(0,l.kt)("p",null,"\u4f8b\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'{{block "T1" .}} one {{end}}\n')),(0,l.kt)("p",null,"\u5b83\u9996\u5148\u8868\u793a",(0,l.kt)("inlineCode",{parentName:"p"},'{{template "T1" .}}'),"\uff0c\u4e5f\u5c31\u662f\u8bf4\u5148\u627e\u5230T1\u6a21\u677f\uff0c\u5982\u679cT1\u5b58\u5728\uff0c\u5219\u6267\u884c\u627e\u5230\u7684T1\uff0c\u5982\u679c\u6ca1\u627e\u5230T1\uff0c\u5219\u4e34\u65f6\u5b9a\u4e49\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},'{{define "T1"}} one {{end}}'),"\uff0c\u5e76\u6267\u884c\u5b83\u3002"),(0,l.kt)("p",null,'\u5728\u6b64\u6587\u4ef6\u4e2d\u6307\u5b9a\u4e86\u8981\u6267\u884c\u4e00\u4e2a\u540d\u4e3a"content"\u7684\u6a21\u677f\uff0c\u4f46\u6b64\u6587\u4ef6\u4e2d\u6ca1\u6709\u4f7f\u7528define\u5b9a\u4e49\u8be5\u6a21\u677f\uff0c\u6240\u4ee5\u9700\u8981\u5728\u5176\u5b83\u6587\u4ef6\u4e2d\u5b9a\u4e49\u540d\u4e3acontent\u7684\u6a21\u677f\u3002\u73b0\u5728\u5206\u522b\u5728\u4e24\u4e2a\u6587\u4ef6\u4e2d\u5b9a\u4e49\u4e24\u4e2acontent\u6a21\u677f\uff1a'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'{{ define "content" }}\n\n{{ end }}\n')),(0,l.kt)("p",null,"\u5982\u679c\u4f7f\u7528block\uff0c\u90a3\u4e48\u53ef\u4ee5\u8bbe\u7f6e\u9ed8\u8ba4\u7684content\u6a21\u677f\u3002\u4f8b\u5982\u5c06\u539f\u672c\u5b9a\u4e49\u5728blue.html\u4e2d\u7684content\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u6a21\u677f\u3002"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://www.cnblogs.com/f-ck-need-u/p/10035768.html"},"\u6a21\u677f\u89e3\u6790\u539f\u7406")),(0,l.kt)("h4",{id:"3\u7ee7\u627f\u6848\u4f8b"},"\uff083\uff09\u7ee7\u627f\u6848\u4f8b"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/golang/assets/%E6%88%AA%E5%B1%8F2022-11-19%2021.31.18-8864689.png",alt:"\u622a\u5c4f2022-11-19 21.31.18"})),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"base.html")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jinja2"},'...\n\n{{block "title" .}}\n<title>Theme Template for Bootstrap</title>\n{{end}}  \n\n...\n\n<div class="content">\n  {{block "content" .}}\n  {{end}}\n</div>\n\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"student.html")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jinja2"},'{{template "base.html" .}}\n\n{{define "title"}}\n<title>\u5b66\u751f\u7ba1\u7406</title>\n{{end}}\n\n{{define "content"}}\n<h3>\u5b66\u751f\u7ba1\u7406</h3>\n{{end}}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"course.html")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jinja2"},'{{template "base.html" .}}\n\n{{define "title"}}\n<title>\u8bfe\u7a0b\u7ba1\u7406</title>\n{{end}}\n\n{{define "content"}}\n<h3>\u8bfe\u7a0b\u7ba1\u7406</h3>\n{{end}}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"class.html")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jinja2"},'{{template "base.html" .}}\n\n{{define "content"}}\n<h3>\u73ed\u7ea7\u7ba1\u7406</h3>\n{{end}}\n\n{{define "title"}}\n<title>\u73ed\u7ea7\u7ba1\u7406</title>\n{{end}}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"main.go")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "github.com/gin-contrib/multitemplate"\n    "github.com/gin-gonic/gin"\n    "net/http"\n)\n\nfunc index(c *gin.Context) {\n    c.HTML(http.StatusOK, "index", gin.H{})\n}\nfunc student(c *gin.Context) {\n    c.HTML(http.StatusOK, "student", gin.H{})\n}\n\nfunc course(c *gin.Context) {\n    c.HTML(http.StatusOK, "course", gin.H{})\n}\n\nfunc class(c *gin.Context) {\n    c.HTML(http.StatusOK, "class", gin.H{})\n}\n\nfunc createMyRender() multitemplate.Renderer {\n    r := multitemplate.NewRenderer()\n    r.AddFromFiles("index", "templates/base.html", "templates/index.html")\n    r.AddFromFiles("student", "templates/base.html", "templates/student.html")\n    r.AddFromFiles("course", "templates/base.html", "templates/course.html")\n    r.AddFromFiles("class", "templates/base.html", "templates/class.html")\n\n    return r\n}\n\nfunc main() {\n\n    router := gin.Default()\n    // \u8fd4\u56de\u4e00\u4e2ahtml\u9875\u9762\n    // router.LoadHTMLGlob("templates/*")  // \u7ee7\u627f\u4f1a\u53d1\u751fblock\u8986\u76d6\n    router.HTMLRender = createMyRender()\n    router.GET("/", index)\n    router.GET("/student", student)\n    router.GET("/course", course)\n    router.GET("/class", class)\n    router.Run() // \u76d1\u542c\u5e76\u5728 0.0.0.0:8080 \u4e0a\u542f\u52a8\u670d\u52a1\n}\n\n')),(0,l.kt)("h1",{id:"\u4e94gorm"},"\u4e94\u3001Gorm"),(0,l.kt)("h2",{id:"51gorm\u4ecb\u7ecd"},"5.1\u3001gorm\u4ecb\u7ecd"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/golang/assets/image-20221103182526222-7471127.png",alt:"image-20221103182526222"})),(0,l.kt)("p",null,"\u662f\u5f53\u4eca\u6bd4\u8f83\u70ed\u95e8\u7684 golang \u7684 orm \u64cd\u4f5c\u6570\u636e\u5e93\u7684\u5de5\u5177\uff0c\u4f7f\u7528\u4e0a\u4e3b\u8981\u662f\u628a struct \u7c7b\u548c\u6570\u636e\u5e93\u8868\u8fdb\u884c\u6620\u5c04\uff0c\u64cd\u4f5c\u6570\u636e\u5e93\u65f6\u65e0\u9700\u624b\u5199 sql\u3002\u672c\u8d28\u5c31\u662f\u63d0\u4f9b\u4e00\u7ec4\u51fd\u6570\u6765\u5e2e\u52a9\u6211\u4eec\u5feb\u901f\u62fc\u63a5 sql \u8bed\u53e5\uff0c\u5c3d\u91cf\u51cf\u5c11 sql \u7684\u7f16\u5199\u3002"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://gorm.io/"},"gorm\u6587\u6863"),"\u548c",(0,l.kt)("a",{parentName:"p",href:"https://www.kancloud.cn/sliver_horn/gorm/1861152"},"gorm\u4e2d\u6587\u6587\u6863")),(0,l.kt)("p",null,"\u5b89\u88c5\u5305\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},"go get -u gorm.io/gorm\ngo get -u gorm.io/driver/mysql\n")),(0,l.kt)("h2",{id:"52\u8fde\u63a5\u6570\u636e\u5e93"},"5.2\u3001\u8fde\u63a5\u6570\u636e\u5e93"),(0,l.kt)("h3",{id:"521\u8fde\u63a5\u6570\u636e\u5e93"},"5.2.1\u3001\u8fde\u63a5\u6570\u636e\u5e93"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "fmt"\n    "gorm.io/driver/mysql"\n    "gorm.io/gorm"\n)\n\nfunc main() {\n    // \u53c2\u8003 https://github.com/go-sql-driver/mysql#dsn-data-source-name \u83b7\u53d6\u8be6\u60c5\n    dsn := "user:pwd@tcp(127.0.0.1:3306)/database?charset=utf8mb4&parseTime=True&loc=Local"\n    db, err := gorm.Open(mysql.Open(dsn), &gorm.Config{})\n    fmt.Println(db, err)\n}\n')),(0,l.kt)("h3",{id:"522\u914d\u7f6e\u65e5\u5fd7\u8fde\u63a5"},"5.2.2\u3001\u914d\u7f6e\u65e5\u5fd7\u8fde\u63a5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'package main\n\nimport (\n    "fmt"\n    "gorm.io/driver/mysql"\n    "gorm.io/gorm"\n    "gorm.io/gorm/logger"\n    "log"\n    "os"\n)\n\nfunc main() {\n    // \u53c2\u8003 https://github.com/go-sql-driver/mysql#dsn-data-source-name \u83b7\u53d6\u8be6\u60c5\n    dsn := "root:yuan0316@tcp(127.0.0.1:3306)/go10?charset=utf8mb4&parseTime=True&loc=Local"\n    // \u521b\u5efa\u65e5\u5fd7\u5bf9\u8c61\n    newLogger := logger.New(\n        log.New(os.Stdout, "\\r\\n", log.LstdFlags), // io writer\n        logger.Config{\n            //SlowThreshold: time.Second,   // \u6162 SQL \u9608\u503c\n            LogLevel: logger.Info, // Log level\n        },\n    )\n\n    db, err := gorm.Open(mysql.Open(dsn), &gorm.Config{\n        Logger: newLogger, // \u65e5\u5fd7\u914d\u7f6e\n    })\n\n    if err != nil {\n        panic("failed to connect database")\n    }\n    fmt.Println(db)\n}\n')),(0,l.kt)("h3",{id:"523\u6570\u636e\u5e93\u8fde\u63a5\u6c60"},"5.2.3\u3001\u6570\u636e\u5e93\u8fde\u63a5\u6c60"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// \u5168\u5c40\u6570\u636e\u5e93 db\nvar db *gorm.DB\n\n// \u5305\u521d\u59cb\u5316\u51fd\u6570\uff0c\u53ef\u4ee5\u7528\u6765\u521d\u59cb\u5316 gorm\nfunc init() {\n  // \u914d\u7f6e dsn\n\n  // err\n  var err error\n  // \u8fde\u63a5 mysql \u83b7\u53d6 db \u5b9e\u4f8b\n  db, err = gorm.Open(mysql.Open(dsn), &gorm.Config{})\n  if err != nil {\n    panic("\u8fde\u63a5\u6570\u636e\u5e93\u5931\u8d25, error=" + err.Error())\n  }\n\n  // \u8bbe\u7f6e\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u53c2\u6570\n  sqlDB, _ := db.DB()\n  // \u8bbe\u7f6e\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\n  sqlDB.SetMaxOpenConns(100)\n  // \u8fde\u63a5\u6c60\u6700\u5927\u5141\u8bb8\u7684\u7a7a\u95f2\u8fde\u63a5\u6570\uff0c\u5982\u679c\u6ca1\u6709sql\u4efb\u52a1\u9700\u8981\u6267\u884c\u7684\u8fde\u63a5\u6570\u5927\u4e8e20\uff0c\u8d85\u8fc7\u7684\u8fde\u63a5\u4f1a\u88ab\u8fde\u63a5\u6c60\u5173\u95ed\n  sqlDB.SetMaxIdleConns(20)\n}\n\n// \u83b7\u53d6 gorm db\uff0c\u5176\u4ed6\u5305\u8c03\u7528\u6b64\u65b9\u6cd5\u5373\u53ef\u62ff\u5230 db\n// \u65e0\u9700\u62c5\u5fc3\u4e0d\u540c\u534f\u7a0b\u5e76\u53d1\u65f6\u4f7f\u7528\u8fd9\u4e2a db \u5bf9\u8c61\u4f1a\u516c\u7528\u4e00\u4e2a\u8fde\u63a5\uff0c\u56e0\u4e3a db \u5728\u8c03\u7528\u5176\u65b9\u6cd5\u65f6\u5019\u4f1a\u4ece\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u83b7\u53d6\u65b0\u7684\u8fde\u63a5\nfunc GetDB() *gorm.DB {\n  return db\n}\n\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},"func main() {\n  // \u83b7\u53d6 db\n  db := tools.GetDB()\n  // \u6267\u884c\u6570\u636e\u5e93\u67e5\u8be2\u64cd\u4f5c\n}\n")),(0,l.kt)("h2",{id:"53\u6570\u636e\u5e93\u8868\u64cd\u4f5c"},"5.3\u3001\u6570\u636e\u5e93\u8868\u64cd\u4f5c"),(0,l.kt)("h3",{id:"531\u6a21\u578b\u58f0\u660e"},"5.3.1\u3001\u6a21\u578b\u58f0\u660e"),(0,l.kt)("p",null,"\u6211\u4eec\u4ee5\u9009\u8bfe\u7cfb\u7edf\u4e3a\u4f8b\u5b50\uff1a"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u5b66\u751f\u8868"),(0,l.kt)("p",{parentName:"blockquote"},"\u8001\u5e08\u8868"),(0,l.kt)("p",{parentName:"blockquote"},"\u73ed\u7ea7\u8868"),(0,l.kt)("p",{parentName:"blockquote"},"\u8bfe\u7a0b\u8868")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "gorm.io/driver/mysql"\n    "gorm.io/gorm"\n    "gorm.io/gorm/logger"\n    "log"\n    "os"\n    "time"\n)\n\ntype BaseModel struct {\n    ID         int       `gorm:"primaryKey"`\n    CreateTime *time.Time `gorm:"autoCreateTime"`\n    UpdateTime *time.Time `gorm:"autoCreateTime"`\n    Name       string     `gorm:"type:varchar(32);unique;not null"`\n}\n\n\ntype Teacher struct {\n    BaseModel\n    Tno    int\n    Pwd    string `gorm:"type:varchar(100);not null"`\n    Tel    string `gorm:"type:char(11);"`\n    Birth  *time.Time\n    Remark string `gorm:"type:varchar(255);"`\n}\n\n\ntype Class struct {\n    BaseModel\n    Num     int\n    TutorID int\n    Tutor   Teacher\n}\n\ntype Course struct {\n    BaseModel\n    Credit int\n    Period int\n\n    // \u591a\u5bf9\u4e00\n    TeacherID int\n    Teacher   Teacher\n}\n\ntype Student struct {\n    BaseModel\n    Sno    int\n    Pwd    string `gorm:"type:varchar(100);not null"`\n    Tel    string `gorm:"type:char(11);"`\n    Gender byte   `gorm:"default:1"`\n    Birth  *time.Time\n    Remark string `gorm:"type:varchar(255);"`\n\n    // \u591a\u5bf9\u4e00\n    ClassID int\n    Class   Class `gorm:"foreignKey:ClassID"`\n    // \u591a\u5bf9\u591a\n    Courses []Course `gorm:"many2many:student2course;constraint:OnDelete:CASCADE;"`\n}\n\n\n')),(0,l.kt)("p",null,"\u6ce8\u610f\u4e8b\u9879\uff1a"),(0,l.kt)("blockquote",null,(0,l.kt)("ol",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cGORM \u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"ID")," \u4f5c\u4e3a\u4e3b\u952e\uff0c\u4f7f\u7528\u7ed3\u6784\u4f53\u540d\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"\u86c7\u5f62\u590d\u6570")," \u4f5c\u4e3a\u8868\u540d\uff0c\u5b57\u6bb5\u540d\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"\u86c7\u5f62")," \u4f5c\u4e3a\u5217\u540d\uff0c\u5e76\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"CreatedAt"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"UpdatedAt")," \u5b57\u6bb5\u8ffd\u8e2a\u521b\u5efa\u3001\u66f4\u65b0\u65f6\u95f4\u3002")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u5355\u72ec\u8bbe\u7f6e\u8868\u540d\uff1a"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-go"},'func (u User) TableName() string {\n  return "user"\n}\n'))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"GORM \u5b9a\u4e49\u4e00\u4e2a ",(0,l.kt)("inlineCode",{parentName:"p"},"gorm.Model")," \u7ed3\u6784\u4f53\uff0c\u5176\u5305\u62ec\u5b57\u6bb5 ",(0,l.kt)("inlineCode",{parentName:"p"},"ID"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"CreatedAt"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"UpdatedAt"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"DeletedAt")),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// gorm.Model \u7684\u5b9a\u4e49\ntype Model struct {\n  ID        uint           `gorm:"primaryKey"`\n  CreatedAt time.Time\n  UpdatedAt time.Time\n  DeletedAt gorm.DeletedAt `gorm:"index"`\n}\n'))))),(0,l.kt)("h3",{id:"532\u6a21\u578b\u8fc1\u79fb"},"5.3.2\u3001\u6a21\u578b\u8fc1\u79fb"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'func main() {\n\n    dsn := "root:yuan0316@tcp(127.0.0.1:3306)/go10?charset=utf8mb4&parseTime=True&loc=Local"\n    // \u521b\u5efa\u65e5\u5fd7\u5bf9\u8c61\n    newLogger := logger.New(\n        log.New(os.Stdout, "\\r\\n", log.LstdFlags), // io writer\n        logger.Config{\n            // SlowThreshold: time.Second,   // \u6162 SQL \u9608\u503c\n            LogLevel: logger.Info, // Log level\n        },\n    )\n\n    db, err := gorm.Open(mysql.Open(dsn), &gorm.Config{\n        Logger: newLogger, // \u65e5\u5fd7\u914d\u7f6e\n    })\n\n    if err != nil {\n        panic("failed to connect database")\n    }\n\n    // \u81ea\u52a8\u8fc1\u79fb\n    db.AutoMigrate(&Teacher{})\n    db.AutoMigrate(&Course{})\n    db.AutoMigrate(&Class{})\n    db.AutoMigrate(&Student{})\n}\n\n')),(0,l.kt)("p",null,"AutoMigrate \u652f\u6301\u5efa\u8868\uff0c\u5982\u679c\u8868\u5b58\u5728\u5219\u4e0d\u4f1a\u518d\u521b\u5efa"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-haskell"},'-- \u5efa\u8868\ndb.AutoMigrate(&Teacher{})\n-- \u5efa\u8868\ndb.Migrator().CreateTable(&Teacher{})\n-- \u5efa 3 \u8868\ndb.AutoMigrate(&Teacher{}, &Class{}, &Course{})\n-- \u53ef\u4ee5\u901a\u8fc7 Set \u8bbe\u7f6e\u9644\u52a0\u53c2\u6570\uff0c\u4e0b\u9762\u8bbe\u7f6e\u8868\u7684\u5b58\u50a8\u5f15\u64ce\u4e3a InnoDB\ndb.Set("gorm:table_options", "ENGINE=InnoDB").AutoMigrate(&Teacher{})\n')),(0,l.kt)("p",null,"\u68c0\u6d4b\u8868\u5b58\u5728\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'// \u68c0\u6d4bTeacher\u7ed3\u6784\u4f53\u5bf9\u5e94\u7684\u8868\u662f\u5426\u5b58\u5728\ndb.Migrator().HasTable(&Teacher{})\n// \u68c0\u6d4b\u8868\u540dteachers\u662f\u5426\u5b58\u5728\ndb.Migrator().HasTable("teachers")\n')),(0,l.kt)("h3",{id:"533\u8868\u5b57\u6bb5\u64cd\u4f5c"},"5.3.3\u3001\u8868\u5b57\u6bb5\u64cd\u4f5c"),(0,l.kt)("p",null,"AutoMigrate\u4e0d\u652f\u6301\u5b57\u6bb5\u4fee\u6539\u5220\u9664\uff0c\u4e3a\u907f\u514d\u6570\u636e\u610f\u5916\u4e22\u5931."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-haskell"},'-- \u5220\u9664 Teacher \u7ed3\u6784\u4f53\u5bf9\u5e94\u7684\u8868\ndb.Migrator().DropTable(&Teacher{})\n-- \u4f9d\u636e\u8868\u540d\u5220\u9664\u8868\ndb.Migrator().DropTable("teachers")\n-- \u5220\u9664\u5b57\u6bb5\ndb.Migrator().DropColumn(&Teacher{}, "Name")\n-- \u4e3a\u5b57\u6bb5\u6dfb\u52a0\u7d22\u5f15\ndb.Migrator().CreateIndex(&Teacher{}, "Name")\n-- \u4fee\u6539\u7d22\u5f15\u540d\ndb.Migrator().RenameIndex(&Teacher{}, "Name", "Name2")\n-- \u4e3a\u5b57\u6bb5\u5220\u9664\u7d22\u5f15\ndb.Migrator().DropIndex(&Teacher{}, "Name")\n-- \u68c0\u67e5\u7d22\u5f15\u5b58\u5728\ndb.Migrator().HasIndex(&Teacher{}, "Name")\n')),(0,l.kt)("h2",{id:"54\u6570\u636e\u5e93\u8868\u8bb0\u5f55\u64cd\u4f5c"},"5.4\u3001\u6570\u636e\u5e93\u8868\u8bb0\u5f55\u64cd\u4f5c"),(0,l.kt)("p",null,"\u8fd9\u662f\u91cd\u70b9"),(0,l.kt)("h3",{id:"541\u6dfb\u52a0\u8bb0\u5f55"},"5.4.1\u3001\u6dfb\u52a0\u8bb0\u5f55"),(0,l.kt)("h4",{id:"1\u6dfb\u52a0\u5355\u8868\u8bb0\u5f55"},"\uff081\uff09\u6dfb\u52a0\u5355\u8868\u8bb0\u5f55"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'t1 := Teacher{BaseModel: BaseModel{Name: "yuan"}, Tno: 1001, Pwd: "123"}\ndb.Create(&t1)\nfmt.Println(t1.ID)\nt2 := Teacher{BaseModel: BaseModel{Name: "rain"}, Tno: 1002, Pwd: "234"}\ndb.Create(&t2)\nt3 := Teacher{BaseModel: BaseModel{Name: "eric"}, Tno: 1002, Pwd: "345"}\ndb.Create(&t3)\n')),(0,l.kt)("p",null,"GORM \u5c06\u751f\u6210\u4e00\u6761 SQL \u8bed\u53e5\u6765\u63d2\u5165\u6570\u636e\u5e76",(0,l.kt)("strong",{parentName:"p"},"\u56de\u586b\u4e3b\u952e\u503c")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("inlineCode",{parentName:"p"},"db.Debug()")," \u4f1a\u6253\u5370sql\u65e5\u5fd7")),(0,l.kt)("h4",{id:"2\u6279\u91cf\u6dfb\u52a0\u591a\u5bf9\u4e00\u5173\u8054\u8868\u7684\u8bb0\u5f55"},"\uff082\uff09\u6279\u91cf\u6dfb\u52a0\u591a\u5bf9\u4e00\u5173\u8054\u8868\u7684\u8bb0\u5f55"),(0,l.kt)("p",null,"\u8981\u6709\u6548\u5730\u63d2\u5165\u5927\u91cf\u8bb0\u5f55\uff0c\u8bf7\u5c06\u5207\u7247\u4f20\u9012\u7ed9\u8be5Create\u65b9\u6cd5\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'class01 := Class{BaseModel: BaseModel{Name: "\u8f6f\u4ef61\u73ed"}, TutorID: 1}\nclass02 := Class{BaseModel: BaseModel{Name: "\u8f6f\u4ef62\u73ed"}, TutorID: 1}\nclass03 := Class{BaseModel: BaseModel{Name: "\u8ba1\u7b97\u673a\u79d1\u5b66\u4e0e\u6280\u672f1\u73ed"}, TutorID: 2}\nclass04 := Class{BaseModel: BaseModel{Name: "\u8ba1\u7b97\u673a\u79d1\u5b66\u4e0e\u6280\u672f2\u73ed"}, TutorID: 2}\nclasses := []Class{class01, class02, class03, class04}\ndb.Create(&classes)\n\nfor _, class := range classes {\nfmt.Println(class.ID) // 1,2,3\n}\n\ncourse01 := Course{BaseModel: BaseModel{Name: "\u8ba1\u7b97\u673a\u7f51\u7edc"}, Credit: 3, Period: 16, TeacherID: 1}\ncourse02 := Course{BaseModel: BaseModel{Name: "\u6570\u636e\u7ed3\u6784"}, Credit: 2, Period: 24, TeacherID: 1}\ncourse03 := Course{BaseModel: BaseModel{Name: "\u6570\u636e\u5e93"}, Credit: 2, Period: 16, TeacherID: 2}\ncourse04 := Course{BaseModel: BaseModel{Name: "\u6570\u5b57\u7535\u8def"}, Credit: 3, Period: 12, TeacherID: 2}\ncourse05 := Course{BaseModel: BaseModel{Name: "\u6a21\u62df\u7535\u8def"}, Credit: 1, Period: 8, TeacherID: 2}\ncourses := []Course{course01, course02, course03, course04, course05}\ndb.Create(&courses)\n')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6307\u5b9a\u6279\u91cf\u5927\u5c0f\uff1adb.CreateInBatches(users, 100 )")),(0,l.kt)("h4",{id:"3\u6dfb\u52a0\u591a\u5bf9\u591a\u5173\u8054\u8868\u7684\u8bb0\u5f55"},"\uff083\uff09\u6dfb\u52a0\u591a\u5bf9\u591a\u5173\u8054\u8868\u7684\u8bb0\u5f55"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'// \u7ed1\u5b9a\u8bfe\u7a0b\u5bf9\u8c61\u5207\u7247\nvar courses []Course\ndb.Where("name in ?", []string{"\u6570\u636e\u7ed3\u6784", "\u6570\u636e\u5e93"}).Find(&courses)\nfmt.Println("courses:", courses)\n\n// \u6dfb\u52a0\u5b66\u751f1\ns1 := Student{BaseModel: BaseModel{Name: "\u5f20\u4e09"}, Sno: 2001, Pwd: "123", ClassID: 1}\ndb.Create(&s1)\n\n// \u591a\u5bf9\u591a\u6dfb\u52a0\u65b9\u5f0f1\ns2 := Student{BaseModel: BaseModel{Name: "\u674e\u56db"},\n              Sno:     2002,\n              Pwd:     "234",\n              ClassID: 1,\n              Courses: courses,\n             }\ndb.Create(&s2)\n\n// \u591a\u5bf9\u591a\u6dfb\u52a0\u65b9\u5f0f2\ns3 := Student{BaseModel: BaseModel{Name: "\u738b\u4e94"}, Sno: 2003, Pwd: "234", ClassID: 1}\ndb.Create(&s3)\nfmt.Println("s3 id:", s3.ID)\ndb.Model(&s3).Association("Courses").Append(courses) // \u6ce8\u610f\uff1aCourses\u662f\u591a\u5bf9\u591a\u5173\u8054\u5b57\u6bb5\uff0c\u4e0d\u662f\u5173\u8054\u8868\n\n// \u5148\u67e5\u8be2\u518d\u64cd\u4f5c\u6dfb\u52a0\u65b9\u5f0f3\nvar student = Student{}\ndb.Where("name = ?", "\u738b\u4e94").First(&student)\nfmt.Println(student)\ndb.Model(&student).Association("Courses").Clear()\nvar courses []Course\ndb.Where("name in ?", []string{"\u6570\u5b57\u7535\u8def", "\u6a21\u62df\u7535\u8def"}).Find(&courses)\ndb.Model(&student).Association("Courses").Append(courses)\n\n')),(0,l.kt)("h3",{id:"542\u5355\u8868\u67e5\u8be2"},"5.4.2\u3001\u5355\u8868\u67e5\u8be2"),(0,l.kt)("p",null,"gorm \u4f7f\u7528\u94fe\u5f0f\u51fd\u6570\u6765\u67e5\u8be2\u7684\u3002"),(0,l.kt)("h4",{id:"1-\u67e5\u8be2\u5168\u90e8\u8bb0\u5f55"},"\uff081\uff09 \u67e5\u8be2\u5168\u90e8\u8bb0\u5f55"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// Find \u67e5\u8be2\u591a\u6761\u8bb0\u5f55\uff0c\u8fd4\u56de\u6570\u7ec4\n// select * from students;\nstudents := []Student{}  // \u4f7f\u7528Find\u8981\u58f0\u660e\u6570\u7ec4\uff0c\u5982\u679c\u58f0\u660e\u4e00\u4e2a\u5bf9\u8c61\uff08var s Student\uff09\uff0c\u5c31\u4f1a\u5c06\u7b2c\u4e00\u4e2a\u5bf9\u8c61\nresult := db.Find(&students)\nfmt.Println(result.RowsAffected)\nfmt.Println(students)\n\nfor _, student := range students {\n  fmt.Println(student.ID, student.Name, student.Sno)\n}\n\n/*   \n\n    students := []Student{} \n    db.Find(&students)\n     \n    (1) select * from students;\n    5,2022-11-29 16:53:23.823,2022-11-29 16:53:23.823,\u5f20\u4e09,2001,123,"",1,2022-11-15 00:00:00,"",1,1\n    6,2022-11-29 16:53:50.756,2022-11-29 16:53:50.756,\u674e\u56db,2002,123,"",1,2022-11-10 00:00:00,"",3,2\n    7,2022-11-29 16:54:11.471,2022-11-29 16:54:11.471,\u738b\u4e94,2003,123,"",1,2022-11-18 00:00:00,"",2,3\n\n    (2) \n    [\n        Student{\n            BaseModel\uff1a      {1 2022-11-03 17:59:02.188 +0800 CST 2022-11-03 17:59:02.188 +0800 CST \u5f20\u4e09}\n            Sno:                   2001\n            Pwd:                   123\n            Gender:                1\n            Birth:               <nil>\n            ClassID:                 1\n            Class\u5bf9\u8c61:            {\n                        BaseModel: {0 <nil> <nil> }\n                        Num: 0\n                        TutorID: 0\n                        Tutor\u5bf9\u8c61: {{0 <nil> <nil> } 0 <nil>}\n                        students: []\n                                     }\n            Courses:                []\n\n         },\n         ...\n         ]\n*/\n')),(0,l.kt)("h4",{id:"2\u67e5\u8be2\u5355\u6761\u8bb0\u5f55"},"\uff082\uff09\u67e5\u8be2\u5355\u6761\u8bb0\u5f55"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},"student := Student{}\n// Take \u67e5\u8be2\u4e00\u6761\u8bb0\u5f55\n// SELECT * FROM `user` LIMIT 1\ndb.Take(&student)\n\n// First \u6839\u636e\u4e3b\u952e id \u6392\u5e8f\u540e\u7684\u7b2c\u4e00\u6761\n// SELECT * FROM `user` ORDER BY `id` LIMIT 1\ndb.First(&student)\n\n// Last \u6839\u636e\u4e3b\u952e id \u6392\u5e8f\u540e\u6700\u540e\u4e00\u6761\n// SELECT * FROM `user` ORDER BY `id` DESC LIMIT 1\ndb.Last(&student)\n\n// Where \u8868\u793a\u6761\u4ef6\uff0c\u5176\u4e2d\u5199 sql \u90e8\u5206\n// SELECT * FROM `user` WHERE (id = '10') LIMIT 1\ndb.Where(\"id = ?\", 10).Take(&user)\n")),(0,l.kt)("h4",{id:"3-where\u67e5\u8be2"},"\uff083\uff09 Where\u67e5\u8be2"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u57fa\u4e8estring\u7684where\u8bed\u53e5")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'var student Student\ndb.Where("name = ?", "\u674e\u56db").First(&student)\nfmt.Println(student)\n\nvar students []Student\ndb.Where("Sno between ? and ?", 2001, 2003).Find(&students)\nfmt.Println(students)\n\nvar students []Student\ndb.Where("Sno in ?", []int64{2001, 2003}).Find(&students)\nfmt.Println(students)\n\nvar students []Student\ndb.Where("name like  ?", "\u674e%").Find(&students)\nfmt.Println(students)\n\nvar students []Student\ndb.Where("create_time >  ?", "2021-01-01 00:00:00").Find(&students)\nfmt.Println(students)\n\nvar students []Student\ndb.Where("create_time > ? AND create_time < ?", "2022-01-01 00:00:00", "2022-12-31 00:00:00").Find(&students)\nfmt.Println(students)\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u57fa\u4e8eStruct & Map \u6761\u4ef6\u7684where\u8bed\u53e5")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'// Struct\u6761\u4ef6\nvar students []Student\ndb.Where(&Student{BaseModel: BaseModel{Name: "\u5f20\u4e09"}, Gender: 1}).Find(&students)\nfmt.Println(students)\n\n// \u6ce8\u610f: \u4f7f\u7528\u7ed3\u6784\u4f5c\u4e3a\u6761\u4ef6\u67e5\u8be2\u65f6\uff0cGORM \u53ea\u4f1a\u67e5\u8be2\u975e\u96f6\u503c\u5b57\u6bb5\u3002\u4f8b\u5982\uff1a\ndb.Where(&Student{BaseModel: BaseModel{Name: "\u5f20\u4e09"}, Gender: 0}).Find(&students)\nfmt.Println(students)\n// SELECT * FROM `students` WHERE `students`.`name` = \'\u5f20\u4e09\'\n\n// Map\u6761\u4ef6\ndb.Where(map[string]interface{}{"Name": "\u5f20\u4e09", "Gender": 0}).Find(&students)\nfmt.Println(students)\n')),(0,l.kt)("h4",{id:"4\u5176\u4ed6\u67e5\u8be2\u8bed\u53e5"},"\uff084\uff09\u5176\u4ed6\u67e5\u8be2\u8bed\u53e5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-haskell"},'-- Select\u8bed\u53e5 \u8868\u793a\u9009\u62e9\uff0c\u5176\u4e2d\u5199 sql \u90e8\u5206\n-- SELECT name,sno FROM `students` WHERE id = 10 LIMIT 1\nvar student Student\ndb.Select("name,sno").Where("id = ?", 10).Take(&student)\nlog.Println(student)\ndb.Omit("name", "sno").Find(&students)\nfmt.Println(students)\n\n-- Not\u8bed\u53e5  \nvar students []Student\ndb.Not("sno between ? and ?", 2001, 2002).Find(&students) --  Not\u8bed\u53e5:\u7528\u6cd5\u7c7b\u4f3c\u4e8eWhere\nfmt.Println(students)\n\n-- Or\u8bed\u53e5  \nvar students []Student\ndb.Where("sno = ?", 2001).Or("name like  ?", "\u738b%").Find(&students)\nfmt.Println(students)\n\n-- Order \u8868\u793a\u6392\u5e8f\u65b9\u5f0f\uff0c\u5176\u4e2d\u5199 sql \u90e8\u5206\n-- SELECT * FROM `students` WHERE create_time >= \'2018-11-06 00:00:00\' ORDER BY create_time desc,id\nvar students []Student\ndb.Where("create_time >= ?", "2018-11-06 00:00:00").Order("create_time desc,id").Find(&students)\nlog.Println(students)\n\n-- Limit Offset \u5206\u9875\u5e38\u7528\n--SELECT * FROM `students` ORDER BY create_time desc LIMIT 10 OFFSET 1\nvar students []Student\ndb.Order("create_time desc").Limit(10).Offset(1).Find(&students)\nlog.Println(students)\n\n-- Count \u8ba1\u7b97\u884c\u6570\n-- SELECT count(*) FROM `students`\nvar total int64\ndb.Model(&Student{}).Where("age >= ?", 18).Count(&total)\nfmt.Println(total)\n\n-- Group Having \u5206\u7ec4\u67e5\u8be2\uff0c\u5176\u4e2d\u5199 sql \u90e8\u5206,Group \u5fc5\u987b\u548c Select \u4e00\u8d77\u8fde\u7528\ntype Result struct {\n        ClassID int\n        Total   int\n    }\nvar results []Result\n--  SELECT class_id, Count(*) as total FROM `students` GROUP BY `class_id` HAVING total>1\ndb.Model(Student{}).Select("class_id,Count(*) as total").Group("class_id").Having("total>0").Scan(&results)\nlog.Println(results)\n\n')),(0,l.kt)("p",null,"\u5728GORM\u4e2d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"db.Model"),"\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff0c\u7528\u4e8e\u6307\u5b9a\u8981\u6267\u884c\u64cd\u4f5c\u7684\u6a21\u578b\u6216\u8868\u540d\u3002\u8fd9\u4e2a\u53c2\u6570\u53ef\u4ee5\u662f\u4e00\u4e2a\u5b9e\u4f8b\u6307\u9488\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002\u5982\u679c\u4f60\u4f20\u9012\u4e00\u4e2a\u5b9e\u4f8b\u6307\u9488\u4f5c\u4e3a\u53c2\u6570\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u662f\u5426\u8981\u5728\u6307\u9488\u524d\u9762\u52a0\u4e0a",(0,l.kt)("inlineCode",{parentName:"p"},"&"),"\u7b26\u53f7\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u8fd9\u5e76\u4e0d\u4f1a\u4ea7\u751f\u660e\u663e\u7684\u533a\u522b\uff0c\u56e0\u4e3a\u6307\u9488\u672c\u8eab\u4e5f\u662f\u4e00\u4e2a\u5730\u5740\u3002"),(0,l.kt)("p",null,"\u4f8b\u5982\uff0c\u5047\u8bbe\u4f60\u6709\u4e00\u4e2a\u540d\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"User"),"\u7684\u6a21\u578b\uff0c\u5e76\u4e14\u4f60\u60f3\u67e5\u8be2\u6240\u6709\u7528\u6237\u8bb0\u5f55\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'var users []User\ndb.Model(&User{}).Find(&users)\nvar userDetails []UserDetails\ndb.Model("user_details").Find(&userDetails)\n')),(0,l.kt)("p",null,"\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"&User{}"),"\u8868\u793a\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"User"),"\u7c7b\u578b\u7684\u5b9e\u4f8b\u6307\u9488\uff0c\u5b83\u88ab\u4f20\u9012\u7ed9\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"db.Model"),"\u65b9\u6cd5\u3002\u4f60\u53ef\u4ee5\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"&User{}"),"\u524d\u9762\u52a0\u4e0a",(0,l.kt)("inlineCode",{parentName:"p"},"&"),"\u7b26\u53f7\uff0c\u4e5f\u53ef\u4ee5\u7701\u7565\u5b83\uff0c\u8fd9\u4e0d\u4f1a\u5f71\u54cd\u7ed3\u679c\u3002"),(0,l.kt)("h3",{id:"543\u5220\u9664\u8bb0\u5f55"},"5.4.3\u3001\u5220\u9664\u8bb0\u5f55"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// \u5220\u9664\u4e00\u6761\u8bb0\u5f55\nstudent := Student{BaseModel: BaseModel{ID: 3}}\ndb.Delete(&student)\n// \u6309\u6761\u4ef6\u5220\u9664\ndb.Where("sno between ? and ?", 2001, 2002).Delete(Student{})\n// \u5220\u9664\u6240\u6709\u8bb0\u5f55\ndb.Where("1 = 1").Delete(&Student{})\n')),(0,l.kt)("h3",{id:"544\u66f4\u65b0\u8bb0\u5f55"},"5.4.4\u3001\u66f4\u65b0\u8bb0\u5f55"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// Save \u66f4\u65b0\u67d0\u6761\u8bb0\u5f55\u7684\u6240\u6709\u5b57\u6bb5\nstu01 := Student{}\ndb.First(&stu01)\nstu01.Name = "\u5f20\u4e09\u4e09"\ndb.Save(&stu01)\n\n// Update \u57fa\u4e8e\u4e3b\u952e\u66f4\u65b0\u67d0\u6761\u8bb0\u5f55\u7684\u5355\u4e2a\u5b57\u6bb5\nstu02 := Student{BaseModel: BaseModel{ID: 1}}\ndb.Model(&stu02).Update("name", "\u5f20\u4e09")\n\n// Update \u8ddf\u65b0\u6240\u6709\u8bb0\u5f55\u7684\u5355\u4e2a\u5b57\u6bb5\ndb.Model(&Student{}).Update("price", 25)\n\n// Update \u81ea\u5b9a\u4e49\u6761\u4ef6\u800c\u975e\u4e3b\u952e\u8bb0\u5f55\u66f4\u65b0\u67d0\u5b57\u6bb5\ndb.Model(&Student{}).Where("create_time > ?", "2018-11-06 20:00:00").Update("price", 25)\n\n// Update \u66f4\u65b0\u591a\u4e2a\u5b57\u6bb5\n// \u901a\u8fc7 `struct` \u66f4\u65b0\u591a\u4e2a\u5b57\u6bb5\uff0c\u4e0d\u4f1a\u66f4\u65b0\u96f6\u503c\u5b57\u6bb5\ndb.Model(&Student{}).Where("id = ?", 2).Updates(Student{Sno: 2002, Gender: 0})\n// \u901a\u8fc7 `map` \u66f4\u65b0\u591a\u4e2a\u5b57\u6bb5\uff0c\u96f6\u503c\u5b57\u6bb5\u4e5f\u4f1a\u66f4\u65b0\ndb.Model(&Student{}).Where("id = ?", 2).Updates(map[string]interface{}{"gender": 1, "sno": 2002})\n\n// \u66f4\u65b0\u8868\u8fbe\u5f0f\nUpdate("stock", gorm.Expr("stock + 1"))\ndb.Model(&Class{}).Update("Num", gorm.Expr("Num+1"))\ndb.Model(&Student{}).Update("Pwd", gorm.Expr("Sno"))\n')),(0,l.kt)("h3",{id:"545\u5173\u8054\u8868\u67e5\u8be2"},"5.4.5\u3001\u5173\u8054\u8868\u67e5\u8be2"),(0,l.kt)("h4",{id:"1preload"},"\uff081\uff09Preload"),(0,l.kt)("p",null,"\u5728GORM\u4e2d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"Preload"),"\u65b9\u6cd5\u7528\u4e8e\u9884\u52a0\u8f7d\u5173\u8054\u7684\u6570\u636e\u3002\u9884\u52a0\u8f7d\u7684\u76ee\u7684\u662f\u5728\u51cf\u5c11\u6570\u636e\u5e93\u67e5\u8be2\u7684\u540c\u65f6\uff0c\u63d0\u9ad8\u67e5\u8be2\u6548\u7387\uff0c\u907f\u514d\u51fa\u73b0N+1\u67e5\u8be2\u95ee\u9898\u3002"),(0,l.kt)("p",null,"\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u5728\u67e5\u8be2\u4e3b\u8981\u6a21\u578b\u7684\u540c\u65f6\uff0c\u5982\u679c\u4f60\u9700\u8981\u67e5\u8be2\u5173\u8054\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"Preload"),"\u65b9\u6cd5\u6765\u4e00\u8d77\u67e5\u8be2\u3002\u4f8b\u5982\uff0c\u5047\u8bbe\u4f60\u6709\u4e00\u4e2a\u540d\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"User"),"\u7684\u6a21\u578b\uff0c\u5b83\u4e0e",(0,l.kt)("inlineCode",{parentName:"p"},"Address"),"\u6a21\u578b\u5b58\u5728\u4e00\u5bf9\u591a\u5173\u7cfb\uff0c\u4e00\u4e2a\u7528\u6237\u53ef\u4ee5\u6709\u591a\u4e2a\u5730\u5740\u3002\u5982\u679c\u4f60\u60f3\u67e5\u8be2\u6240\u6709\u7528\u6237\u7684\u5730\u5740\u4fe1\u606f\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'var users []User\ndb.Preload("Addresses").Find(&users)\n')),(0,l.kt)("p",null,"\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},'Preload("Addresses")'),"\u65b9\u6cd5\u6765\u9884\u52a0\u8f7d",(0,l.kt)("inlineCode",{parentName:"p"},"User"),"\u6a21\u578b\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"Addresses"),"\u5173\u8054\u3002\u8fd9\u5c06\u5728\u67e5\u8be2\u7528\u6237\u8bb0\u5f55\u7684\u540c\u65f6\uff0c\u4e00\u8d77\u67e5\u8be2\u5b83\u4eec\u7684\u5173\u8054\u5730\u5740\u8bb0\u5f55\u3002\u8fd9\u6837\u5c31\u53ef\u4ee5\u907f\u514d\u51fa\u73b0N+1\u67e5\u8be2\u95ee\u9898\uff0c\u63d0\u9ad8\u67e5\u8be2\u6548\u7387\u3002"),(0,l.kt)("p",null,"\u4f60\u4e5f\u53ef\u4ee5\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"Preload"),"\u65b9\u6cd5\u4e2d\u6307\u5b9a\u67e5\u8be2\u6761\u4ef6\uff0c\u4f8b\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'db.Preload("Addresses", "city = ?", "New York").Find(&users)\n')),(0,l.kt)("p",null,"\u8fd9\u5c06\u53ea\u67e5\u8be2\u4f4d\u4e8e\u7ebd\u7ea6\u7684\u5730\u5740\u8bb0\u5f55\uff0c\u5e76\u5c06\u5b83\u4eec\u4e0e\u7528\u6237\u8bb0\u5f55\u4e00\u8d77\u8fd4\u56de\u3002"),(0,l.kt)("p",null,"\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"Preload"),"\u65b9\u6cd5\u53ea\u80fd\u9884\u52a0\u8f7d\u76f4\u63a5\u5173\u8054\u7684\u6570\u636e\uff0c\u4e0d\u80fd\u9884\u52a0\u8f7d\u95f4\u63a5\u5173\u8054\u7684\u6570\u636e\u3002\u5982\u679c\u4f60\u9700\u8981\u9884\u52a0\u8f7d\u591a\u5c42\u5173\u8054\u7684\u6570\u636e\uff0c\u5e94\u8be5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"Preload"),"\u65b9\u6cd5\u7684\u94fe\u5f0f\u8c03\u7528\u3002\u4f8b\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'db.Preload("Addresses").Preload("Addresses.City").Find(&users)\n')),(0,l.kt)("p",null,"\u8fd9\u5c06\u9884\u52a0\u8f7d\u7528\u6237\u7684\u5730\u5740\u548c\u5730\u5740\u7684\u57ce\u5e02\u4fe1\u606f\uff0c\u5e76\u5c06\u5b83\u4eec\u4e00\u8d77\u8fd4\u56de\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6848\u4f8b1\uff1a\u67e5\u8be2\u674e\u56db\u7684\u73ed\u7ea7\u7684\u540d\u79f0")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// \u624b\u52a8\u67e5\u8be2\ns := Student{}\ndb.Where("name = ?", "\u674e\u56db").Find(&s)\nfmt.Println(s)\nclass := Class{}\ndb.Where("id = ?", s.ClassID).Find(&class)\nfmt.Println(class.Name)\n\n// Preload \u9884\u52a0\u8f7d\ns := Student{}\ndb.Where("name = ?", "\u674e\u56db").Preload("Class").Find(&s)\n// SELECT * FROM `students` WHERE name = \'\u674e\u56db\'\n// SELECT * FROM `classes` WHERE `classes`.`id` = 1\nfmt.Println(s)\nfmt.Println(s.Sno)\nfmt.Println(s.Class.Name)\nfmt.Println(s.Courses)\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6848\u4f8b2\uff1a\u67e5\u8be2\u5f20\u4e09\u7684\u73ed\u7ea7\u548c\u6240\u9009\u8bfe\u7a0b")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'s := Student{}\ndb.Where("name = ?", "\u674e\u56db").Preload("Class").Preload("Courses").Find(&s)\n// "gorm.io/gorm/clause"\n// db.Where("name = ?", "lisi").Preload(clause.Associations).Find(&s)\n\n// SELECT * FROM `students` WHERE name = \'\u674e\u56db\'\n// SELECT * FROM `classes` WHERE `classes`.`id` = 2\n// SELECT * FROM `student2course` WHERE `student2course`.`student_id` = 11\n// SELECT * FROM `courses` WHERE `courses`.`id` IN (2,3)\nfmt.Println(s)\nfmt.Println(s.Sno)\nfmt.Println(s.Class.Name)\nfmt.Println(s.Courses)\nfmt.Println(s.Courses[1])\n\n\n// \u9884\u52a0\u8f7d\u6240\u6709\u76f4\u63a5\u5173\u8054\ndb.Where("name = ?", "\u674e\u56db").Preload(clause.Associations).Find(&s)\n\n// \u67e5\u8be2\u5f20\u4e09\u7684\u73ed\u7ea7,\u73ed\u4e3b\u4efb\u548c\u6240\u9009\u8bfe\u7a0b\ndb.Where("name = ?", "\u674e\u56db").Preload("Class").Preload("Class.Teacher").Preload("Courses").Find(&s)\nfmt.Println(">>>", s.Class.Teacher.Name)\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6848\u4f8b3\uff1a\u67e5\u8be2\u8f6f\u4ef6\u4e00\u73ed\u6240\u6709\u5b66\u751f\u3010\u53cd\u5411\u67e5\u8be2\u3011")),(0,l.kt)("blockquote",null,(0,l.kt)("pre",{parentName:"blockquote"},(0,l.kt)("code",{parentName:"pre",className:"language-go"},"// class\u8868\u6dfb\u52a0\u6210\u5458\u53d8\u91cf\uff1aStudents\ntype Class struct {\n   BaseModel\n   Num     int\n   TutorID int\n   Tutor   Teacher\n   // \u4e00\u5bf9\u591a\n   Students []Student    // \u53cd\u5411\u67e5\u8be2\u5b57\u6bb5\n}\n"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'class := Class{}\ndb.Where("name", "\u8f6f\u4ef61\u73ed").Preload("Students").Find(&class)\n// SELECT * FROM `classes` WHERE `name` = \'\u8f6f\u4ef61\u73ed\'\n// SELECT * FROM `students` WHERE `students`.`class_id` = 1\nfmt.Println(class)\nfmt.Println(class.Students)\nfor _, stu := range class.Students {\n    fmt.Println(stu.ID,stu.Name)\n}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6848\u4f8b4\uff1a\u67e5\u8be2\u8f6f\u4ef6\u4e00\u73ed\u6240\u6709\u5b66\u751f\u4ee5\u53ca\u6240\u5b66\u8bfe\u7a0b\u3010\u5d4c\u5957\u9884\u52a0\u8f7d\u3011")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'class := Class{}\ndb.Where("name", "\u8f6f\u4ef61\u73ed").Preload("Students.Courses").Find(&class)\nfmt.Println(class)\nfmt.Println(class.Students)\nfor _, stu := range class.Students {\n  fmt.Println(stu.ID, stu.Name, stu.Courses)\n}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6848\u4f8b5\uff1a\u54ea\u4e9b\u5b66\u751f\u62a5\u4e86\u6570\u636e\u7ed3\u6784\u8bfe\u7a0b")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"// Course\u8868\u6dfb\u52a0\u6210\u5458\u53d8\u91cf\uff1aStudents"),(0,l.kt)("pre",{parentName:"blockquote"},(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'type Course struct {\n    BaseModel\n    Credit int8\n    Period int8\n\n    // \u591a\u5bf9\u4e00\n    TeacherID int\n    Teacher   Teacher\n\n    // \u591a\u5bf9\u591a\n     Students []Student `gorm:"many2many:student2course;"`\n}\n'))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'course := Course{}\ndb.Where("name", "\u6570\u636e\u7ed3\u6784").Preload("Students").Find(&course)\n// db.Where("name", "\u6570\u636e\u7ed3\u6784").Preload("Students.Courses").Find(&course)\nfmt.Println(course)\nfmt.Println(course.Students)\nfor _, stu := range course.Students {\n  fmt.Println(stu.ID, stu.Name, stu.Courses)\n}\n')),(0,l.kt)("h4",{id:"2joins-\u67e5\u8be2"},"\uff082\uff09Joins \u67e5\u8be2"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Preload")," \u5728\u4e00\u4e2a\u5355\u72ec\u67e5\u8be2\u4e2d\u52a0\u8f7d\u5173\u8054\u6570\u636e\u3002\u800c ",(0,l.kt)("inlineCode",{parentName:"p"},"Join Preload")," \u4f1a\u4f7f\u7528 inner join \u52a0\u8f7d\u5173\u8054\u6570\u636e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'var students []Student\ndb.Preload("Courses").Joins("JOIN student2course ON students.id = student2course.student_id").\n  Joins("JOIN courses ON courses.id = student2course.course_id").\n  Joins("JOIN teachers ON courses.teacher_id = teachers.id").\n  Find(&students)\n\nfmt.Println(">>", students)\n')),(0,l.kt)("h2",{id:"55\u7ae0\u8282\u4f5c\u4e1a"},"5.5\u3001\u7ae0\u8282\u4f5c\u4e1a"),(0,l.kt)("p",null,"\u5b66\u751f\u9009\u8bfe\u7cfb\u7edf"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/golang/assets/%E6%88%AA%E5%B1%8F2022-11-19%2018.44.41-8854690.png",alt:"\u622a\u5c4f2022-11-19 18.44.41"})),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/golang/assets/%E6%88%AA%E5%B1%8F2022-11-19%2018.43.49.png",alt:"\u622a\u5c4f2022-11-19 18.43.49"})),(0,l.kt)("h1",{id:"\u4e03\u8fdb\u9636\u8bfe\u7a0b"},"\u4e03\u3001\u8fdb\u9636\u8bfe\u7a0b"),(0,l.kt)("h2",{id:"71\u4f1a\u8bdd\u6280\u672f"},"7.1\u3001\u4f1a\u8bdd\u6280\u672f"),(0,l.kt)("p",null,"\u5927\u5bb6\u5728\u5b66\u4e60 HTTP \u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae\u7684\u65f6\u5019\uff0c\u5c31\u5df2\u7ecf\u77e5\u9053 HTTP \u662f\u4e00\u79cd\u65e0\u72b6\u6001\u7684\u4f20\u8f93\u534f\u8bae\uff0c\u5bf9\u4e8e\u4e8b\u52a1\u5904\u7406\u6ca1\u6709\u8bb0\u5fc6\u80fd\u529b\u3002\u5bf9\u4e8e\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u53d1\u51fa\u7684\u8bf7\u6c42\uff0cWeb \u670d\u52a1\u5668\u65e0\u6cd5\u533a\u5206\u662f\u4e0d\u662f\u6e90\u81ea\u4e8e\u540c\u4e00\u4e2a\u6d4f\u89c8\u5668\u3002\u6240\u4ee5\uff0c\u8fd9\u65f6\u5c31\u9700\u8981\u989d\u5916\u7684\u6570\u636e\u7528\u4e8e\u7ef4\u6301\u4f1a\u8bdd\u3002"),(0,l.kt)("h3",{id:"711cookie"},"7.1.1\u3001Cookie"),(0,l.kt)("h4",{id:"1-cookie\u662f\u4ec0\u4e48"},(0,l.kt)("strong",{parentName:"h4"},"1.")," Cookie\u662f\u4ec0\u4e48"),(0,l.kt)("blockquote",null,(0,l.kt)("ol",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"HTTP\u662f\u65e0\u72b6\u6001\u534f\u8bae\uff0c\u670d\u52a1\u5668\u4e0d\u80fd\u8bb0\u5f55\u6d4f\u89c8\u5668\u7684\u8bbf\u95ee\u72b6\u6001\uff0c\u4e5f\u5c31\u662f\u8bf4\u670d\u52a1\u5668\u4e0d\u80fd\u533a\u5206\u4e24\u6b21\u8bf7\u6c42\u662f\u5426\u7531\u540c\u4e00\u4e2a\u5ba2\u6237\u7aef\u53d1\u51fa")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Cookie\u5c31\u662f\u89e3\u51b3HTTP\u534f\u8bae\u65e0\u72b6\u6001\u7684\u65b9\u6848\u4e4b\u4e00\uff0c\u4e2d\u6587\u662f\u5c0f\u751c\u997c\u7684\u610f\u601d")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Cookie\u5b9e\u9645\u4e0a\u5c31\u662f\u670d\u52a1\u5668\u4fdd\u5b58\u5728\u6d4f\u89c8\u5668\u4e0a\u7684\u4e00\u6bb5\u4fe1\u606f\u3002\u6d4f\u89c8\u5668\u6709\u4e86Cookie\u4e4b\u540e\uff0c\u6bcf\u6b21\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\u65f6\u90fd\u4f1a\u540c\u65f6\u5c06\u8be5\u4fe1\u606f\u53d1\u9001\u7ed9\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u5c31\u53ef\u4ee5\u6839\u636e\u8be5\u4fe1\u606f\u5904\u7406\u8bf7\u6c42")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Cookie\u7531\u670d\u52a1\u5668\u521b\u5efa\uff0c\u5e76\u53d1\u9001\u7ed9\u6d4f\u89c8\u5668\uff0c\u6700\u7ec8\u7531\u6d4f\u89c8\u5668\u4fdd\u5b58")))),(0,l.kt)("h4",{id:"2-\u8bfb\u5199cookie"},(0,l.kt)("strong",{parentName:"h4"},"2.")," \u8bfb\u5199Cookie"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'// \u8bbe\u7f6eCookie\nc.SetCookie("xxx","yyy")\n// \u83b7\u53d6Cookie\nc.Cookie("xxx")   // "yyy"\n')),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/golang/assets/image-20210829101115420.png",alt:"image-20210829101115420"})),(0,l.kt)("h4",{id:"1\u767b\u5f55\u6848\u4f8b"},"\uff081\uff09\u767b\u5f55\u6848\u4f8b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'package main\n\nimport (\n    "github.com/gin-gonic/gin"\n    "net/http"\n)\n\nfunc index(c *gin.Context) {\n\n    isLogin, _ := c.Cookie("isLogin")\n\n    if isLogin == "true" {\n        user, _ := c.Cookie("username")\n        c.HTML(http.StatusOK, "index.html", gin.H{\n            "username":user,\n        })\n    } else {\n        c.Redirect(302, "/login")\n    }\n}\n\nfunc login(c *gin.Context) {\n    if c.Request.Method == "GET" {\n        c.HTML(http.StatusOK, "login.html", nil)\n    } else {\n        user := c.PostForm("user")\n        pwd := c.PostForm("pwd")\n        if user == "yuan" && pwd == "123" {\n            // \u7ed9\u5ba2\u6237\u7aef\u8bbe\u7f6ecookie\n            // maxAge int, \u5355\u4f4d s\n            // path cookie  \u6240\u5728\u76ee\u5f55\n            // domain string  \u57df\u540d\n            // secure  \u662f\u5426\u53ea\u80fd\u901a\u8fc7https\u8bbf\u95ee\n            // httponly bool  \u662f\u5426\u5141\u8bb8\u522b\u4eba\u901a\u8fc7js\u83b7\u53d6\u81ea\u5df1\u7684cookie\n            c.SetCookie("isLogin", "true", 2000000, "/", "127.0.0.1", false, true)\n            c.SetCookie("username", user, 20000000, "/", "127.0.0.1", false, true)\n            //c.Redirect(302, "/index")\n            c.Redirect(302, "/index")\n        } else {\n            c.Redirect(302, "/login")\n        }\n    }\n}\n\nfunc main() {\n    r := gin.Default()\n    // \u8fd4\u56de\u4e00\u4e2ahtml\u9875\u9762\n    r.LoadHTMLGlob("templates/*")\n    r.Any("/login", login)\n    r.GET("/index", index)\n    r.Run() // \u76d1\u542c\u5e76\u5728 0.0.0.0:8080 \u4e0a\u542f\u52a8\u670d\u52a1\n}\n\n')),(0,l.kt)("h4",{id:"2\u6700\u540e\u8bbf\u95ee\u65f6\u95f4\u6848\u4f8b"},"\uff082\uff09\u6700\u540e\u8bbf\u95ee\u65f6\u95f4\u6848\u4f8b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "fmt"\n    "github.com/gin-gonic/gin"\n    "time"\n)\n\nfunc index(c *gin.Context) {\n\n    // \u83b7\u53d6cookie\n    lastVist, _ := c.Cookie("lastVist")\n    fmt.Println("lastVist",lastVist)\n\n    // \u8bbe\u7f6ecookie\n    now := time.Now().String()[:19]\n    c.SetCookie("lastVist", now, 100, "/", "127.0.0.1", false, true)\n\n    c.HTML(200, "index.html", gin.H{\n        "lastVist": lastVist,\n    })\n\n}\n\nfunc main() {\n    r := gin.Default()\n    // \u8fd4\u56de\u4e00\u4e2ahtml\u9875\u9762\n    r.LoadHTMLGlob("templates/*")\n    r.GET("/index", index)\n    r.Run() // \u76d1\u542c\u5e76\u5728 0.0.0.0:8080 \u4e0a\u542f\u52a8\u670d\u52a1\n}\n\n')),(0,l.kt)("h3",{id:"712session"},"7.1.2\u3001session"),(0,l.kt)("p",null,"gin\u6846\u67b6\u5728\u5904\u7406session\u65f6\u6709\u4e13\u95e8\u7684\u4e2d\u95f4\u4ef6\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u3002"),(0,l.kt)("p",null,"\u4e2d\u95f4\u4ef6\uff1a ",(0,l.kt)("inlineCode",{parentName:"p"},"github.com/gin-contrib/sessions")," \uff0c \u6211\u4eec\u76f4\u63a5\u5b89\u88c5\u4f9d\u8d56\uff1a ",(0,l.kt)("inlineCode",{parentName:"p"},"go get github.com/gin-contrib/sessions")," \u5373\u53ef\u5f15\u5165\u4f7f\u7528"),(0,l.kt)("p",null,"\u6211\u4eec\u53c2\u8003\u5b98\u7f51\u6848\u4f8b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'package main\n\nimport (\n        // \u5bfc\u5165session\u5305\n    "github.com/gin-contrib/sessions"\n       // \u5bfc\u5165session\u5b58\u50a8\u5f15\u64ce\n    "github.com/gin-contrib/sessions/cookie"\n        // \u5bfc\u5165gin\u6846\u67b6\u5305\n    "github.com/gin-gonic/gin"\n)\n\nfunc main() {\n    r := gin.Default()\n\n        // \u521b\u5efa\u57fa\u4e8ecookie\u7684\u5b58\u50a8\u5f15\u64ce\uff0cyuan \u53c2\u6570\u662f\u7528\u4e8e\u52a0\u5bc6\u7684\u5bc6\u94a5\uff0c\u53ef\u4ee5\u968f\u4fbf\u586b\u5199\n    store := cookie.NewStore([]byte("yuan"))\n\n        // \u8bbe\u7f6esession\u4e2d\u95f4\u4ef6\uff0c\u53c2\u6570mysession\uff0c\u6307\u7684\u662fsession\u7684\u540d\u5b57\uff0c\u4e5f\u662fcookie\u7684\u540d\u5b57\n       // store\u662f\u524d\u9762\u521b\u5efa\u7684\u5b58\u50a8\u5f15\u64ce\n    r.Use(sessions.Sessions("mysession", store))\n\n    r.GET("/test", func(c *gin.Context) {\n                // \u521d\u59cb\u5316session\u5bf9\u8c61\n        session := sessions.Default(c)\n                \n                // \u901a\u8fc7session.Get\u8bfb\u53d6session\u503c\n                // session\u662f\u952e\u503c\u5bf9\u683c\u5f0f\u6570\u636e\uff0c\u56e0\u6b64\u9700\u8981\u901a\u8fc7key\u67e5\u8be2\u6570\u636e\n\n        if session.Get("hello") != "world" {\n                        // \u8bbe\u7f6esession\u6570\u636e,()\n                              session.Set("hello", "world")\n                        // \u5220\u9664session\u6570\u636e\n                        session.Delete("tizi365")\n                        // \u5220\u9664\u6574\u4e2asession\n                        session.Clear()\n                        // \u4fdd\u5b58session\u6570\u636e\n                            session.Save()\n        }\n                \n        c.JSON(200, gin.H{"hello": session.Get("hello")})\n    })\n    r.Run(":8000")\n  \n}\n\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u4f7f\u7528sessions \u4e2d\u95f4\u4ef6\u6ce8\u610f\u8981\u70b9\uff1a")),(0,l.kt)("blockquote",null,(0,l.kt)("ol",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ol"},"session \u4ed3\u5e93\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a map","[interface]","interface \u5bf9\u8c61\uff0c\u6240\u6709 session\u53ef\u4ee5\u5b58\u50a8\u4efb\u610f\u6570\u636e"),(0,l.kt)("li",{parentName:"ol"},"session \u4f7f\u7528\u7684\u7f16\u89e3\u7801\u5668\u662f\u81ea\u5e26\u7684gob\uff0c\u6240\u4ee5\u5b58\u50a8\u7c7b\u4f3c\uff1a struct\u3001map \u8fd9\u4e9b\u5bf9\u8c61\u65f6\u9700\u8981\u5148\u6ce8\u518c\u5bf9\u8c61\uff0c\u4e0d\u7136\u4f1a\u62a5\u9519 ",(0,l.kt)("inlineCode",{parentName:"li"},"gob: type not registered for...")),(0,l.kt)("li",{parentName:"ol"},"session \u5b58\u50a8\u5f15\u64ce\u652f\u6301\uff1a cookie\u3001\u5185\u5b58\u3001mongodb\u3001redis\u3001postgres\u3001memstore\u3001memcached \u4ee5\u53ca gorm \u652f\u6301\u7684\u5404\u7c7b\u6570\u636e\u5e93\uff08mysql\u3001sqlite\uff09"),(0,l.kt)("li",{parentName:"ol"},"session \u5728\u521b\u5efa\u65f6\u6709\u4e00\u4e2a\u914d\u7f6e\u9879\uff0c\u53ef\u4ee5\u914d\u7f6esession\u8fc7\u671f\u65f6\u95f4\u3001cookie\u3001domain\u3001secure\u3001path\u7b49\u53c2\u6570"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("strong",{parentName:"li"},"\u8c03\u7528 session \u65b9\u6cd5\uff1a Set()\u3001 Delete()\u3001 Clear()\u3001\u65b9\u6cd5\u540e\uff0c\u5fc5\u987b\u8c03\u7528\u4e00\u6b21 Save() \u65b9\u6cd5\u3002\u5426\u5219session\u6570\u636e\u4e0d\u4f1a\u66f4\u65b0")))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"gob\u6ce8\u518c\u6848\u4f8b")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-haskell"},"type User struct{\n  Name string\n}\n\ngob.Register(User{})\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"session\u914d\u7f6e\u9879\u6848\u4f8b")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'// store \u5c31\u662f\u524d\u9762\u521b\u5efa\u7684\u5b58\u50a8\u5f15\u64ce\nstore.Options(sessions.Options{\n        Secure:   true,\n        SameSite: 4,\n        Path:     "/",\n        MaxAge:   m.MaxAge,\n    })\n')),(0,l.kt)("p",null,"Cookie\u548cSession\u7684\u533a\u522b"),(0,l.kt)("blockquote",null,(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},"Session\u5b58\u50a8\u6570\u636e\u5728\u670d\u52a1\u5668\u7aef\uff0cCookie\u5728\u5ba2\u6237\u7aef"),(0,l.kt)("li",{parentName:"ul"},"Session\u6ca1\u6709\u6570\u636e\u5927\u5c0f\u9650\u5236\uff0cCookie\u6709"),(0,l.kt)("li",{parentName:"ul"},"Session\u6570\u636e\u66f4\u5b89\u5168"))),(0,l.kt)("h3",{id:"713\u57fa\u4e8esession\u7684\u767b\u5f55\u9a8c\u8bc1"},"7.1.3\u3001\u57fa\u4e8esession\u7684\u767b\u5f55\u9a8c\u8bc1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'func LoginHtml(context *gin.Context) {\n    context.HTML(200, "login.html", nil)\n}\nfunc Login(context *gin.Context) {\n    // \u83b7\u53d6\u767b\u9646\u4fe1\u606f\n    //roleId := context.PostForm("role_id")\n    account := context.PostForm("user")\n    pwd := context.PostForm("pwd")\n    // \u6570\u636e\u5e93\u67e5\u8be2\n    var user User\n    DB.Where("account = ? and pwd = ?", account, pwd).Find(&user)\n\n    if user.ID != 0 {\n        userId := strconv.Itoa(user.ID)\n        //  \u767b\u5f55\u6210\u529f\n        // \u521d\u59cb\u5316session\u5bf9\u8c61\n        session := sessions.Default(context)\n        // \u8bbe\u7f6esession\u6570\u636e,()\n        session.Set("user_id", userId)\n        session.Save()\n\n        context.Redirect(http.StatusMovedPermanently, "/")\n\n    } else {\n        // \u767b\u5f55\u5931\u8d25\n        context.HTML(200, "login.html", gin.H{\n            "err": "\u7528\u6237\u540d\u6216\u8005\u5bc6\u7801\u9519\u8bef",\n        })\n\n    }\n}\n\nfunc Logout(context *gin.Context) {\n\n    // \u521d\u59cb\u5316session\u5bf9\u8c61\n    session := sessions.Default(context)\n    // \u8bbe\u7f6esession\u6570\u636e,()\n    session.Delete("user_id")\n\n    context.Redirect(http.StatusMovedPermanently, "/login")\n\n}\n\n')),(0,l.kt)("h2",{id:"72\u4e2d\u95f4\u4ef6"},"7.2\u3001\u4e2d\u95f4\u4ef6"),(0,l.kt)("h3",{id:"721\u4e2d\u95f4\u4ef6\u8bed\u6cd5"},"7.2.1\u3001\u4e2d\u95f4\u4ef6\u8bed\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'package main\n\nimport (\n    "fmt"\n    "github.com/gin-gonic/gin"\n)\n\nfunc main()  {\n  // \u9ed8\u8ba4\u4f7f\u7528\u4e862\u4e2a\u4e2d\u95f4\u4ef6Logger(), Recovery()\n    app := gin.Default()\n    // \u5168\u5c40\u6ce8\u518c\u4e2d\u95f4\u4ef6\n    app.Use(M1())\n    app.Use(M2())\n    app.GET("/", func(context *gin.Context) {\n        fmt.Println("Hello yuan")\n        context.Writer.WriteString("Hello World")\n    })\n    app.Run()\n}\n\nfunc M1() gin.HandlerFunc {\n    return func(context *gin.Context) {\n        // \u8def\u7531\u5904\u7406\u524d\u6267\u884c\n        fmt.Printf("M1\u89c6\u56fe\u51fd\u6570\u524d\u6267\u884c\\n")\n        // context.Abort()\n        context.Next()\n        // \u8def\u7531\u5904\u7406\u540e\u6267\u884c\n        fmt.Printf("M1\u89c6\u56fe\u51fd\u6570\u540e\u6267\u884c\\n")\n    }\n}\n\nfunc M2() gin.HandlerFunc {\n    return func(context *gin.Context) {\n        // \u8def\u7531\u5904\u7406\u524d\u6267\u884c\n        fmt.Printf("M2\u89c6\u56fe\u51fd\u6570\u524d\u6267\u884c\\n")\n        context.Next()\n        // \u8def\u7531\u5904\u7406\u540e\u6267\u884c\n        fmt.Printf("M2\u89c6\u56fe\u51fd\u6570\u540e\u6267\u884c\\n")\n    }\n}\n\n')),(0,l.kt)("h3",{id:"722\u4e2d\u95f4\u4ef6\u5e94\u7528\u4e00cors"},"7.2.2\u3001\u4e2d\u95f4\u4ef6\u5e94\u7528\u4e00\uff1aCORS"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"gin.Default()"),"\u9ed8\u8ba4\u4f7f\u7528\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"Logger"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"Recovery"),"\u4e2d\u95f4\u4ef6\uff0c\u5176\u4e2d\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Logger"),"\u4e2d\u95f4\u4ef6\u5c06\u65e5\u5fd7\u5199\u5165",(0,l.kt)("inlineCode",{parentName:"li"},"gin.DefaultWriter"),"\uff0c\u5373\u4f7f\u914d\u7f6e\u4e86",(0,l.kt)("inlineCode",{parentName:"li"},"GIN_MODE=release"),"\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Recovery"),"\u4e2d\u95f4\u4ef6\u4f1arecover\u4efb\u4f55",(0,l.kt)("inlineCode",{parentName:"li"},"panic"),"\u3002\u5982\u679c\u6709panic\u7684\u8bdd\uff0c\u4f1a\u5199\u5165500\u54cd\u5e94\u7801\u3002")),(0,l.kt)("p",null,"\u5982\u679c\u4e0d\u60f3\u4f7f\u7528\u4e0a\u9762\u4e24\u4e2a\u9ed8\u8ba4\u7684\u4e2d\u95f4\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"gin.New()"),"\u65b0\u5efa\u4e00\u4e2a\u6ca1\u6709\u4efb\u4f55\u9ed8\u8ba4\u4e2d\u95f4\u4ef6\u7684\u8def\u7531\u3002"),(0,l.kt)("p",null,"\u6ce8\u610f\uff1a\u5f53\u5728\u4e2d\u95f4\u4ef6\u6216",(0,l.kt)("inlineCode",{parentName:"p"},"handler"),"\u4e2d\u542f\u52a8\u65b0\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"goroutine"),"\u65f6\uff0c",(0,l.kt)("strong",{parentName:"p"},"\u4e0d\u80fd\u4f7f\u7528"),"\u539f\u59cb\u7684\u4e0a\u4e0b\u6587\uff08c *gin.Context\uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u5176\u53ea\u8bfb\u526f\u672c\uff08",(0,l.kt)("inlineCode",{parentName:"p"},"c.Copy()"),"\uff09\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u8de8\u57df\u914d\u7f6e\u4e2d\u95f4\u4ef6")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'// \u5b9a\u4e49\u5168\u5c40\u7684CORS\u4e2d\u95f4\u4ef6\nfunc Cors() gin.HandlerFunc {\n    return func(c *gin.Context) {\n        c.Writer.Header().Add("Access-Control-Allow-Origin", "*")\n        c.Next()\n    }\n}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u8de8\u57df\u914d\u7f6e\u4e2d\u95f4\u4ef6\uff08\u9ad8\u7ea7\u8bf7\u6c42\u914d\u7f6e\uff09")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'func(c *gin.Context) {\n        method := c.Request.Method\n        origin := c.GetHeader("Origin")\n        c.Header("Access-Control-Allow-Origin", origin) // \u6ce8\u610f\u8fd9\u4e00\u884c\uff0c\u4e0d\u80fd\u914d\u7f6e\u4e3a\u901a\u914d\u7b26\u201c*\u201d\u53f7\n        c.Header("Access-Control-Allow-Credentials", "true") // \u6ce8\u610f\u8fd9\u4e00\u884c\uff0c\u5fc5\u987b\u8bbe\u5b9a\u4e3a true\n        c.Header("Access-Control-Allow-Headers", "Access-Control-Allow-Headers,Cookie, Origin, X-Requested-With, Content-Type, Accept, Authorization, Token, Timestamp, UserId") // \u6211\u4eec\u81ea\u5b9a\u4e49\u7684header\u5b57\u6bb5\u90fd\u9700\u8981\u5728\u8fd9\u91cc\u58f0\u660e\n        c.Header("Access-Control-Allow-Methods", "POST, GET, OPTIONS,DELETE,PUT")\n        c.Header("Access-Control-Expose-Headers", "Content-Length, Access-Control-Allow-Origin, Access-Control-Allow-Headers, Content-Type,cache-control")\n\n        // \u653e\u884c\u6240\u6709OPTIONS\u65b9\u6cd5\n        if method == "OPTIONS" {\n            //c.AbortWithStatus(http.StatusNoContent)\n            c.AbortWithStatus(http.StatusOK)\n        }\n        // \u5904\u7406\u8bf7\u6c42\n        c.Next()\n    }\n')),(0,l.kt)("h3",{id:"723\u4e2d\u95f4\u4ef6\u5e94\u7528\u4e8c\u6743\u9650\u8bbf\u95ee\u63a7\u5236"},"7.2.3\u3001\u4e2d\u95f4\u4ef6\u5e94\u7528\u4e8c\uff1a\u6743\u9650\u8bbf\u95ee\u63a7\u5236"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'package model\n\ntype User struct {\n    ID      int    `gorm:"primaryKey"`\n    Account string // \u8d26\u53f7\n    Pwd     string `gorm:"type:varchar(100);not null"`\n\n    // \u591a\u5bf9\u4e00\n    RoleID int\n    Role   Role\n}\n\ntype Role struct {\n    BaseModel\n    Permissions []Permission `gorm:"many2many:role2permission;constraint:OnDelete:CASCADE;"`\n}\n\ntype Permission struct {\n    BaseModel\n    Url string `gorm:"not null;"`\n}\n\n')),(0,l.kt)("p",null,"\u6743\u9650\u8bbf\u95ee\u63a7\u5236\u4e2d\u95f4\u4ef6\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-golang"},'package middlewares\n\nimport (\n    . "css/database"\n    . "css/model"\n    "fmt"\n    "github.com/gin-contrib/sessions"\n    "github.com/gin-gonic/gin"\n    "gorm.io/gorm/clause"\n    "net/http"\n    "regexp"\n    "strconv"\n    "strings"\n)\n\nfunc PermissionMD() gin.HandlerFunc {\n    return func(context *gin.Context) {\n\n        // 1. \u83b7\u53d6\u8bf7\u6c42\u8def\u5f84\n        path := context.Request.URL.Path\n        fmt.Println("path:::", path)\n        // 2. \u6821\u9a8c\u8def\u5f84\u662f\u5426\u5728\u767d\u540d\u5355\n        validUrlSlice := []string{"/login", "/reg", "^/static/.*", "/logout"}\n        for _, validUrl := range validUrlSlice {\n            // \u81ea\u7531\u8def\u5f84\n            re := regexp.MustCompile(validUrl)\n            ret := re.FindAllStringSubmatch(path, -1)\n            if len(ret) != 0 {\n                context.Next()\n                return\n            }\n        }\n        // 3. \u6821\u9a8c\u662f\u5426\u767b\u5f55\u6210\u529f\n        // \u521d\u59cb\u5316session\u5bf9\u8c61\n        session := sessions.Default(context)\n        userID := session.Get("user_id")\n        fmt.Println("userID::::::", userID)\n        if userID == nil {\n            context.Redirect(http.StatusMovedPermanently, "/login")\n            return\n        }\n        // 4. \u5224\u65ad\u767b\u5f55\u7528\u6237\u662f\u5426\u62e5\u6709\u8be5\u8def\u5f84\u6743\u9650\n\n        var user User\n        DB.Where("ID = ?", userID).Preload("Role.Permissions").Find(&user)\n        fmt.Println("user permissions:", user.Role.Permissions)\n\n        if user.RoleID == 1 || user.RoleID == 2 {\n            fmt.Println("in student role......")\n            // \u767b\u5f55\u4eba\u662f\u5b66\u751f\n            // \u5f53\u524d\u767b\u9646\u5b66\u751f\u7684\u5b66\u53f7\n            var student Student\n            DB.Where("user_id = ?", user.ID).Preload(clause.Associations).Find(&student)\n            snoStr := strconv.Itoa(student.Sno)\n            // \u6743\u9650\u5339\u914d\n            for _, permission := range user.Role.Permissions {\n                permissionUrlReg := strings.Replace(permission.Url, "\\\\d+", snoStr, -1)\n                fmt.Println("permissionUrlReg", permissionUrlReg, path)\n\n                re := regexp.MustCompile("^" + permissionUrlReg + "$")\n                results := re.FindAllStringSubmatch(path, -1)\n\n                if len(results) != 0 {\n                    // \u62e5\u6709\u8be5\u8def\u5f84\u6743\u9650\u5e76\u653e\u884c\n                    context.Keys["loginUser"] = student\n                    context.Next()\n                    return\n                }\n            }\n\n        } else {\n            fmt.Println("in admin role......")\n            // \u767b\u5f55\u4eba\u4e3a\u7ba1\u7406\u5458admin\n            var admin Admin\n            DB.Where("user_id = ?", user.ID).Preload(clause.Associations).Find(&admin)\n            // \u6b63\u5219\u5339\u914d\u6210\u529f\u5373\u53ef\n            for _, permission := range user.Role.Permissions {\n                re := regexp.MustCompile("^" + permission.Url + "$")\n                results := re.FindAllStringSubmatch(path, -1)\n\n                if len(results) != 0 {\n                    context.Keys["loginUser"] = admin\n                    context.Next()\n                    return\n                }\n            }\n        }\n\n        context.String(http.StatusForbidden, "Forbidden!!!")\n        context.Abort()\n\n    }\n}\n\n')),(0,l.kt)("h2",{id:"73validator"},"7.3\u3001validator"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"go-playground/validator"),"\u662f\u4e00\u4e2a\u7528\u4e8eGo\u8bed\u8a00\u7684\u6570\u636e\u9a8c\u8bc1\u5e93\uff0c\u53ef\u4ee5\u7528\u4e8e\u9a8c\u8bc1\u5404\u79cd\u6570\u636e\u7c7b\u578b\u7684\u5185\u5bb9\uff0c\u5305\u62ec\u7ed3\u6784\u4f53\u3001\u5207\u7247\u3001\u6570\u7ec4\u3001\u6620\u5c04\u3001\u5b57\u7b26\u4e32\u7b49\u7b49\u3002"),(0,l.kt)("h3",{id:"\u5b89\u88c5"},"\u5b89\u88c5"),(0,l.kt)("p",null,"\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5728Go\u4e2d\u5b89\u88c5",(0,l.kt)("inlineCode",{parentName:"p"},"go-playground/validator"),"\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"go get github.com/go-playground/validator/v10\n")),(0,l.kt)("h3",{id:"\u57fa\u672c\u4f7f\u7528"},"\u57fa\u672c\u4f7f\u7528"),(0,l.kt)("p",null,"\u4e0b\u9762\u662f\u4e00\u4e2a\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"go-playground/validator"),"\u7684\u793a\u4f8b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "fmt"\n    "github.com/go-playground/validator/v10"\n)\n\ntype User struct {\n    Name  string `validate:"required"`\n  Age   int    `validate:"required,gte=18,lte=30"`\n    Email string `validate:"required,email"`\n}\n\nfunc main() {\n    user := &User{\n        Name:  "John Doe",\n    Age:   16,\n        Email: "johndoe@example.com",\n    }\n\n    validate := validator.New()\n    err := validate.Struct(user)\n    if err != nil {\n        // Handle validation error\n        fmt.Println(err)\n    // Handle validation error\n        for _, err := range err.(validator.ValidationErrors) {\n            fmt.Printf("Field %s failed validation with error \'%s\'\\n", err.Field(), err.Tag())\n        }\n    }\n}\n')),(0,l.kt)("p",null,"\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"User"),"\u7684\u7ed3\u6784\u4f53\uff0c\u8be5\u7ed3\u6784\u4f53\u5305\u542b\u4e24\u4e2a\u5b57\u6bb5",(0,l.kt)("inlineCode",{parentName:"p"},"Name"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"Email"),"\u3002",(0,l.kt)("inlineCode",{parentName:"p"},"Name"),"\u5b57\u6bb5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"required"),"\u6807\u8bb0\u6765\u786e\u4fdd\u5b83\u7684\u503c\u4e0d\u4e3a\u7a7a\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"Email"),"\u5b57\u6bb5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"required"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"email"),"\u6807\u8bb0\u6765\u786e\u4fdd\u5b83\u7684\u503c\u4e0d\u4e3a\u7a7a\u5e76\u4e14\u662f\u4e00\u4e2a\u6709\u6548\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"validator.New()"),"\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684\u9a8c\u8bc1\u5668\u5b9e\u4f8b\uff0c\u7136\u540e\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"validate.Struct()"),"\u65b9\u6cd5\u5bf9",(0,l.kt)("inlineCode",{parentName:"p"},"user"),"\u8fdb\u884c\u9a8c\u8bc1\u3002\u5982\u679c\u9a8c\u8bc1\u5931\u8d25\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"validate.Struct()"),"\u65b9\u6cd5\u5c06\u8fd4\u56de\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"validator.ValidationErrors"),"\u7c7b\u578b\u7684\u9519\u8bef\uff0c\u5176\u4e2d\u5305\u542b\u6709\u5173\u9a8c\u8bc1\u5931\u8d25\u7684\u5b57\u6bb5\u4ee5\u53ca\u9519\u8bef\u6d88\u606f\u7684\u8be6\u7ec6\u4fe1\u606f\u3002"),(0,l.kt)("p",null,"\u53ef\u4ee5\u5728\u4e0b\u9762\u7684\u793a\u4f8b\u4e2d\u627e\u5230\u66f4\u591a\u5173\u4e8e\u5982\u4f55\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"go-playground/validator"),"\u7684\u4fe1\u606f\uff1a"),(0,l.kt)("h3",{id:"\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u5668"},"\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u5668"),(0,l.kt)("p",null,"\u53ef\u4ee5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"go-playground/validator"),"\u521b\u5efa\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u5668\u6765\u9a8c\u8bc1\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e2a\u4f7f\u7528\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u5668\u9a8c\u8bc1URL\u7684\u793a\u4f8b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "fmt"\n    "github.com/go-playground/validator/v10"\n    "net/url"\n)\n\nfunc validateURL(fl validator.FieldLevel) bool {\n    value := fl.Field().String()\n    _, err := url.ParseRequestURI(value)\n    return err == nil\n}\n\ntype User struct {\n    Name string `validate:"required"`\n    URL  string `validate:"required,url"`\n}\n\nfunc main() {\n    user := &User{\n        Name: "John Doe",\n        URL:  "invalid-url",\n    }\n\n    validate := validator.New()\n    validate.RegisterValidation("url", validateURL)\n\n    err := validate.Struct(user)\n    if err != nil {\n        // Handle validation error\n        for _, err := range err.(validator.ValidationErrors) {\n            fmt.Printf("Field %s failed validation with error \'%s\'\\n", err.Field(), err.Tag())\n        }\n    }\n}\n')),(0,l.kt)("p",null,"\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"validateURL"),"\u7684\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u5668\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u63a5\u53d7",(0,l.kt)("inlineCode",{parentName:"p"},"validator.FieldLevel"),"\u7c7b\u578b\u7684\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u5305\u542b\u4e86\u6709\u5173\u6b63\u5728\u9a8c\u8bc1\u7684\u5b57\u6bb5\u7684\u4fe1\u606f\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u8be5\u51fd\u6570\u6765\u9a8c\u8bc1",(0,l.kt)("inlineCode",{parentName:"p"},"URL"),"\u5b57\u6bb5\u7684\u503c\u662f\u5426\u662f\u4e00\u4e2a\u6709\u6548\u7684URL\u3002\u6211\u4eec\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"validator.RegisterValidation()"),"\u65b9\u6cd5\u5c06\u8be5\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u5668\u6ce8\u518c\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"url"),"\u6807\u8bb0\u7684\u503c\uff0c\u4ee5\u4fbf\u5728\u7ed3\u6784\u4f53\u4e0a\u4f7f\u7528\u3002"),(0,l.kt)("h3",{id:"\u8de8\u5b57\u6bb5\u9a8c\u8bc1"},"\u8de8\u5b57\u6bb5\u9a8c\u8bc1"),(0,l.kt)("p",null,"\u6709\u65f6\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u9a8c\u8bc1\u591a\u4e2a\u5b57\u6bb5\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u4f8b\u5982\uff0c\u786e\u4fdd\u4e24\u4e2a\u5b57\u6bb5\u7684\u503c\u76f8\u7b49\u3002",(0,l.kt)("inlineCode",{parentName:"p"},"go-playground/validator"),"\u5141\u8bb8\u60a8\u5b9a\u4e49\u8de8\u5b57\u6bb5\u9a8c\u8bc1\u5668\u6765\u9a8c\u8bc1\u591a\u4e2a\u5b57\u6bb5\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"eqfield"),"\u6807\u8bb0\u9a8c\u8bc1\u4e24\u4e2a\u5b57\u6bb5\u503c\u76f8\u7b49\u7684\u793a\u4f8b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "fmt"\n    "github.com/go-playground/validator/v10"\n)\n\ntype User struct {\n    Password         string `validate:"required"`\n    PasswordConfirm  string `validate:"required,eqfield=Password"`\n}\n\nfunc main() {\n    user := &User{\n        Password:        "password",\n        PasswordConfirm: "wrong-password",\n    }\n\n    validate := validator.New()\n    err := validate.Struct(user)\n    if err != nil {\n        // Handle validation error\n        for _, err := range err.(validator.ValidationErrors) {\n            fmt.Printf("Field %s failed validation with error \'%s\'\\n", err.Field(), err.Tag())\n        }\n    }\n}\n')),(0,l.kt)("p",null,"\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"User"),"\u7684\u7ed3\u6784\u4f53\uff0c\u5176\u4e2d\u5305\u542b\u4e24\u4e2a\u5b57\u6bb5",(0,l.kt)("inlineCode",{parentName:"p"},"Password"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"PasswordConfirm"),"\u3002",(0,l.kt)("inlineCode",{parentName:"p"},"Password"),"\u5b57\u6bb5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"required"),"\u6807\u8bb0\u6765\u786e\u4fdd\u5b83\u7684\u503c\u4e0d\u4e3a\u7a7a\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"PasswordConfirm"),"\u5b57\u6bb5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"required"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"eqfield=Password"),"\u6807\u8bb0\u6765\u786e\u4fdd\u5b83\u7684\u503c\u4e0d\u4e3a\u7a7a\u5e76\u4e14\u7b49\u4e8e",(0,l.kt)("inlineCode",{parentName:"p"},"Password"),"\u5b57\u6bb5\u7684\u503c\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"validator.Struct()"),"\u65b9\u6cd5\u5bf9",(0,l.kt)("inlineCode",{parentName:"p"},"user"),"\u8fdb\u884c\u9a8c\u8bc1\uff0c\u5982\u679c\u9a8c\u8bc1\u5931\u8d25\uff0c\u6211\u4eec\u5c06\u904d\u5386\u9519\u8bef\u5217\u8868\u5e76\u8f93\u51fa\u6709\u5173\u9a8c\u8bc1\u5931\u8d25\u7684\u5b57\u6bb5\u4ee5\u53ca\u9519\u8bef\u6d88\u606f\u7684\u8be6\u7ec6\u4fe1\u606f\u3002"),(0,l.kt)("h3",{id:"\u7ed3\u8bba"},"\u7ed3\u8bba"),(0,l.kt)("p",null,"\u4ee5\u4e0a\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"go-playground/validator"),"\u7684\u8be6\u7ec6\u6587\u6863\u548c\u793a\u4f8b\u4ee3\u7801\u3002",(0,l.kt)("inlineCode",{parentName:"p"},"go-playground/validator"),"\u662f\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u548c\u7075\u6d3b\u7684\u6570\u636e\u9a8c\u8bc1\u5e93\uff0c\u53ef\u4ee5\u7528\u4e8e\u9a8c\u8bc1\u5404\u79cd\u6570\u636e\u7c7b\u578b\u7684\u5185\u5bb9\u3002\u5b83\u652f\u6301\u6807\u8bb0\u9a8c\u8bc1\u5668\u3001\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u5668\u548c\u8de8\u5b57\u6bb5\u9a8c\u8bc1\u5668\u7b49\u529f\u80fd\uff0c\u53ef\u4ee5\u6ee1\u8db3\u60a8\u5728\u5b9e\u9645\u9879\u76ee\u5f00\u53d1\u4e2d\u7684\u9700\u6c42\u3002"),(0,l.kt)("h2",{id:"74-ajax\u65b9\u6cd5"},"7.4 \u3001Ajax\u65b9\u6cd5"),(0,l.kt)("h3",{id:"ajax\u4ecb\u7ecd"},"Ajax\u4ecb\u7ecd"),(0,l.kt)("p",null,"\u5ba2\u6237\u7aef\uff08\u6d4f\u89c8\u5668\uff09\u5411\u670d\u52a1\u7aef\u53d1\u8d77\u8bf7\u6c42\u7684\u5f62\u5f0f\uff1a"),(0,l.kt)("blockquote",null,(0,l.kt)("ol",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ol"},"\u5730\u5740\u680f\uff1aGET"),(0,l.kt)("li",{parentName:"ol"},"\u8d85\u94fe\u63a5\u6807\u7b7e\uff1aGET"),(0,l.kt)("li",{parentName:"ol"},"form\u8868\u5355\uff1aGET\u6216POST"),(0,l.kt)("li",{parentName:"ol"},"Ajax\uff08\u91cd\u8981\uff09\uff1aGET\u6216POST\u6216PUT\u6216DELETE"))),(0,l.kt)("p",null,"AJAX\uff08Asynchronous Javascript And XML\uff09\u7ffb\u8bd1\u6210\u4e2d\u6587\u5c31\u662f\u201c\u5f02\u6b65Javascript\u548cXML\u201d\u3002\u5373\u4f7f\u7528Javascript\u8bed\u8a00\u4e0e\u670d\u52a1\u5668\u8fdb\u884c\u5f02\u6b65\u4ea4\u4e92\uff0c\u4f20\u8f93\u7684\u6570\u636e\u4e3aXML\uff08\u5f53\u7136\uff0c\u4f20\u8f93\u7684\u6570\u636e\u4e0d\u53ea\u662fXML,\u73b0\u5728\u66f4\u591a\u4f7f\u7528json\u6570\u636e\uff09\u3002"),(0,l.kt)("p",null,"AJAX\u7684\u7279\u70b9\u548c\u4f18\u70b9\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5f02\u6b65"),(0,l.kt)("li",{parentName:"ul"},"\u5c40\u90e8\u5237\u65b0")),(0,l.kt)("p",null,"\u5e94\u7528\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"http://www.yuan316.com/post/Django3.2%E6%A1%86%E6%9E%B6/assets/image-20210812104733820.png",alt:"image-20210812104733820"})),(0,l.kt)("h3",{id:"axios\u6a21\u5757"},"axios\u6a21\u5757"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"axios({\n  method: 'get', // \u8bf7\u6c42\u65b9\u6cd5\u9ed8\u8ba4\u662fget\n  url: 'https://example.com/api', // \u8bf7\u6c42\u7684URL\n  params: { // GET\u8bf7\u6c42\u65f6\u7684\u53c2\u6570\n    id: 123,\n    name: 'example'\n  },\n  data: { // POST\u8bf7\u6c42\u65f6\u7684\u6570\u636e\n    id: 123,\n    name: 'example'\n  },\n  headers: { // \u8bf7\u6c42\u5934\n    'Content-Type': 'application/json'\n  },\n  responseType: 'json', // \u54cd\u5e94\u6570\u636e\u7684\u7c7b\u578b\n  timeout: 10000, // \u8d85\u65f6\u65f6\u95f4\n  withCredentials: true // \u662f\u5426\u643a\u5e26cookie\n})\n.then(function (response) { // \u54cd\u5e94\u6210\u529f\u56de\u8c03\n  console.log(response);\n})\n.catch(function (error) { // \u54cd\u5e94\u5931\u8d25\u56de\u8c03\n  console.log(error);\n});\n")),(0,l.kt)("h3",{id:"\u5e94\u7528\u6848\u4f8b"},"\u5e94\u7528\u6848\u4f8b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>Title</title>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.0.5/vue.global.js"><\/script>\n    <script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"><\/script>\n    <style>\n        #app {\n            font-family: \'Helvetica Neue\', sans-serif;\n            font-size: 16px;\n            margin: 0 auto;\n            max-width: 800px;\n            padding: 50px 20px;\n        }\n\n        input[type=text] {\n            padding: 10px;\n            margin-right: 10px;\n            border-radius: 5px;\n            border: none;\n            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);\n            font-size: 14px;\n            width: 200px;\n        }\n\n        button {\n            background-color: #369;\n            color: white;\n            padding: 10px 20px;\n            border: none;\n            border-radius: 5px;\n            cursor: pointer;\n            font-size: 14px;\n        }\n\n        table {\n            border-collapse: collapse;\n            width: 100%;\n            margin-top: 30px;\n        }\n\n        th {\n            background-color: #369;\n            color: white;\n            font-weight: bold;\n            text-align: center;\n            padding: 10px;\n        }\n\n        th,\n        td {\n            border: 1px solid #ddd;\n            padding: 10px;\n            text-align: center;\n        }\n\n        tr:nth-child(even) {\n            background-color: #f2f2f2;\n        }\n\n        tr:hover {\n            background-color: #e2e2e2;\n        }\n\n        td:nth-child(1) {\n            width: 25%;\n        }\n\n        td:nth-child(2) {\n            width: 25%;\n        }\n\n        td:nth-child(3) {\n            width: 25%;\n        }\n\n        td:nth-child(4) {\n            width: 25%;\n        }\n    </style>\n\n</head>\n<body>\n\n<div id="app">\n    <div>\n        <p><input type="text" v-model="city">\n            <button @click="get_weather">\u83b7\u53d6\u5929\u6c14</button>\n        </p>\n        <table v-if="weather_list.length>1">\n            <tr>\n                <th>\u65e5\u671f</th>\n                <th>\u5929\u6c14</th>\n                <th>\u6e29\u5ea6</th>\n                <th>\u98ce\u5411</th>\n            </tr>\n            <tr v-for="weather in weather_list">\n                <td>{{weather.day}}</td>\n                <td>{{weather.wea_day}}</td>\n                <td>{{weather.tem2}}-{{weather.tem1}}</td>\n                <td>{{weather.air_level}}</td>\n            </tr>\n        </table>\n    </div>\n</div>\n\n<script>\n\n    vm = Vue.createApp({\n        data() {\n            return {\n                city: "\u5317\u4eac",\n                weather_list: [],\n            }\n        },\n        methods: {\n            get_weather() {\n                // \u53d1\u9001http\u8bf7\u6c42\u83b7\u53d6\u5929\u6c14\n                axios.get("https://v0.yiketianqi.com/api?unescape=1&version=v9&appid=47284135&appsecret=jlmX3A6s", {\n                    params: {\n                        city: this.city,\n                    }\n                }).then(response => {\n                    console.log(response.data.data);\n                    this.weather_list = response.data.data;\n                }).catch(error => {\n                    console.log(error);\n                })\n            }\n        },\n        created(){\n            this.get_weather()\n        }\n\n    }).mount(\'#app\')\n<\/script>\n\n</body>\n</html><!DOCTYPE html>\n\n')),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/golang/assets/image-20230723133607017-0090568.png",alt:"image-20230723133607017"})),(0,l.kt)("h1",{id:"\u516b\u524d\u540e\u7aef\u5206\u79bb"},"\u516b\u3001\u524d\u540e\u7aef\u5206\u79bb"),(0,l.kt)("h2",{id:"81web\u5e94\u7528\u6a21\u5f0f"},"8.1\u3001web\u5e94\u7528\u6a21\u5f0f"),(0,l.kt)("p",null,"\u5728\u5f00\u53d1Web\u5e94\u7528\u4e2d\uff0c\u6709\u4e24\u79cd\u5e94\u7528\u6a21\u5f0f\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u524d\u540e\u7aef\u4e0d\u5206\u79bb","[\u5ba2\u6237\u7aef\u770b\u5230\u7684\u5185\u5bb9\u548c\u6240\u6709\u754c\u9762\u6548\u679c\u90fd\u662f\u7531\u670d\u52a1\u7aef\u63d0\u4f9b\u51fa\u6765\u7684\u3002]")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/golang/assets/depended_frontend_backend.png",alt:"\u524d\u540e\u7aef\u4e0d\u5206\u79bb"})),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"\u524d\u540e\u7aef\u5206\u79bb\u3010\u628a\u524d\u7aef\u7684\u754c\u9762\u6548\u679c(html\uff0ccss\uff0cjs\u5206\u79bb\u5230\u53e6\u4e00\u4e2a\u670d\u52a1\u7aef\uff0cpython\u670d\u52a1\u7aef\u53ea\u9700\u8981\u8fd4\u56de\u6570\u636e\u5373\u53ef)\u3011")),(0,l.kt)("p",null,"\u524d\u7aef\u5f62\u6210\u4e00\u4e2a\u72ec\u7acb\u7684\u7f51\u7ad9\uff0c\u670d\u52a1\u7aef\u6784\u6210\u4e00\u4e2a\u72ec\u7acb\u7684\u7f51\u7ad9"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://iteshell.oss-cn-beijing.aliyuncs.com/bookshell/golang/assets/indepent_frontend_backend-16318493319127.png",alt:"\u524d\u540e\u7aef\u5206\u79bb"})),(0,l.kt)("p",null,"\u5e94\u7528\u7a0b\u5e8f\u7f16\u7a0b\u63a5\u53e3\uff08Application Programming Interface\uff0cAPI\u63a5\u53e3\uff09\uff0c\u5c31\u662f\u5e94\u7528\u7a0b\u5e8f\u5bf9\u5916\u63d0\u4f9b\u4e86\u4e00\u4e2a\u64cd\u4f5c\u6570\u636e\u7684\u5165\u53e3\uff0c\u8fd9\u4e2a\u5165\u53e3\u53ef\u4ee5\u662f\u4e00\u4e2a\u51fd\u6570\u6216\u7c7b\u65b9\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2aurl\u5730\u5740\u6216\u8005\u4e00\u4e2a\u7f51\u7edc\u5730\u5740\u3002\u5f53\u5ba2\u6237\u7aef\u8c03\u7528\u8fd9\u4e2a\u5165\u53e3\uff0c\u5e94\u7528\u7a0b\u5e8f\u5219\u4f1a\u6267\u884c\u5bf9\u5e94\u4ee3\u7801\u64cd\u4f5c\uff0c\u7ed9\u5ba2\u6237\u7aef\u5b8c\u6210\u76f8\u5bf9\u5e94\u7684\u529f\u80fd\u3002"),(0,l.kt)("h2",{id:"82restful-api\u89c4\u8303"},"8.2\u3001restful api\u89c4\u8303"),(0,l.kt)("p",null,"\u5f53\u7136\uff0capi\u63a5\u53e3\u5728\u5de5\u4f5c\u4e2d\u662f\u6bd4\u8f83\u5e38\u89c1\u7684\u5f00\u53d1\u5185\u5bb9\uff0c\u6709\u65f6\u5019\uff0c\u6211\u4eec\u4f1a\u8c03\u7528\u5176\u4ed6\u4eba\u7f16\u5199\u7684api\u63a5\u53e3\uff0c\u6709\u65f6\u5019\uff0c\u6211\u4eec\u4e5f\u9700\u8981\u63d0\u4f9bapi\u63a5\u53e3\u7ed9\u5176\u4ed6\u4eba\u64cd\u4f5c\u3002\u7531\u6b64\u5c31\u4f1a\u5e26\u6765\u4e00\u4e2a\u95ee\u9898\uff0capi\u63a5\u53e3\u5f80\u5f80\u90fd\u662f\u4e00\u4e2a\u51fd\u6570\u3001\u7c7b\u65b9\u6cd5\u3001\u6216\u8005url\u6216\u5176\u4ed6\u7f51\u7edc\u5730\u5740\uff0c\u4e0d\u65ad\u662f\u54ea\u4e00\u79cd\uff0c\u5f53api\u63a5\u53e3\u7f16\u5199\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u90fd\u8981\u8003\u8651\u4e00\u4e2a\u95ee\u9898\u5c31\u662f\u8fd9\u4e2a\u63a5\u53e3\u5e94\u8be5\u600e\u4e48\u7f16\u5199\uff1f\u63a5\u53e3\u600e\u4e48\u5199\u7684\u66f4\u52a0\u5bb9\u6613\u7ef4\u62a4\u548c\u6e05\u6670\uff0c\u8fd9\u5c31\u9700\u8981\u5927\u5bb6\u5728\u8c03\u7528\u6216\u8005\u7f16\u5199api\u63a5\u53e3\u7684\u65f6\u5019\u8981\u6709\u4e00\u4e2a\u660e\u786e\u7684\u7f16\u5199\u89c4\u8303\uff01\uff01\uff01"),(0,l.kt)("p",null,"\u4e3a\u4e86\u5728\u56e2\u961f\u5185\u90e8\u5f62\u6210\u5171\u8bc6\u3001\u9632\u6b62\u4e2a\u4eba\u4e60\u60ef\u5dee\u5f02\u5f15\u8d77\u7684\u6df7\u4e71\uff0c\u6211\u4eec\u90fd\u9700\u8981\u627e\u5230\u4e00\u79cd\u5927\u5bb6\u90fd\u89c9\u5f97\u5f88\u597d\u7684\u63a5\u53e3\u5b9e\u73b0\u89c4\u8303\uff0c\u800c\u4e14\u8fd9\u79cd\u89c4\u8303\u80fd\u591f\u8ba9\u540e\u7aef\u5199\u7684\u63a5\u53e3\uff0c\u7528\u9014\u4e00\u76ee\u4e86\u7136\uff0c\u51cf\u5c11\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u53cc\u65b9\u4e4b\u95f4\u7684\u5408\u4f5c\u6210\u672c\u3002"),(0,l.kt)("p",null,"\u76ee\u524d\u5e02\u9762\u4e0a\u5927\u90e8\u5206\u516c\u53f8\u5f00\u53d1\u4eba\u5458\u4f7f\u7528\u7684\u63a5\u53e3\u5b9e\u73b0\u89c4\u8303\u4e3b\u8981\u6709\uff1arestful\u3001RPC\u3002"),(0,l.kt)("p",null,"REST\u5168\u79f0\u662fRepresentational State Transfer\uff0c\u4e2d\u6587\u610f\u601d\u662f\u8868\u8ff0\uff08\u7f16\u8005\u6ce8\uff1a\u901a\u5e38\u8bd1\u4e3a\u8868\u5f81\uff09\u6027\u72b6\u6001\u8f6c\u79fb\u3002 \u5b83\u9996\u6b21\u51fa\u73b0\u57282000\u5e74Roy Fielding\u7684\u535a\u58eb\u8bba\u6587\u4e2d\u3002"),(0,l.kt)("p",null,"RESTful\u662f\u4e00\u79cd\u4e13\u95e8\u4e3aWeb \u5f00\u53d1\u800c\u5b9a\u4e49API\u63a5\u53e3\u7684\u8bbe\u8ba1\u98ce\u683c\uff0c\u5c24\u5176\u9002\u7528\u4e8e\u524d\u540e\u7aef\u5206\u79bb\u7684\u5e94\u7528\u6a21\u5f0f\u4e2d\u3002"),(0,l.kt)("p",null,"\u5173\u952e\uff1a",(0,l.kt)("strong",{parentName:"p"},"\u9762\u5411\u8d44\u6e90\u5f00\u53d1")),(0,l.kt)("p",null,"\u8fd9\u79cd\u98ce\u683c\u7684\u7406\u5ff5\u8ba4\u4e3a\u540e\u7aef\u5f00\u53d1\u4efb\u52a1\u5c31\u662f\u63d0\u4f9b\u6570\u636e\u7684\uff0c\u5bf9\u5916\u63d0\u4f9b\u7684\u662f\u6570\u636e\u8d44\u6e90\u7684\u8bbf\u95ee\u63a5\u53e3\uff0c\u6240\u4ee5\u5728\u5b9a\u4e49\u63a5\u53e3\u65f6\uff0c\u5ba2\u6237\u7aef\u8bbf\u95ee\u7684URL\u8def\u5f84\u5c31\u8868\u793a\u8fd9\u79cd\u8981\u64cd\u4f5c\u7684\u6570\u636e\u8d44\u6e90\u3002"),(0,l.kt)("p",null,"\u800c\u5bf9\u4e8e\u6570\u636e\u8d44\u6e90\u5206\u522b\u4f7f\u7528POST\u3001DELETE\u3001GET\u3001UPDATE\u7b49\u8bf7\u6c42\u52a8\u4f5c\u6765\u8868\u8fbe\u5bf9\u6570\u636e\u7684\u589e\u5220\u67e5\u6539\u3002"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"\u8bf7\u6c42\u65b9\u6cd5"),(0,l.kt)("th",{parentName:"tr",align:"left"},"\u8bf7\u6c42\u5730\u5740"),(0,l.kt)("th",{parentName:"tr",align:"left"},"\u540e\u7aef\u64cd\u4f5c"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"POST"),(0,l.kt)("td",{parentName:"tr",align:"left"},"/student/"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u589e\u52a0\u5b66\u751f")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"GET"),(0,l.kt)("td",{parentName:"tr",align:"left"},"/student/"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u83b7\u53d6\u6240\u6709\u5b66\u751f")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"GET"),(0,l.kt)("td",{parentName:"tr",align:"left"},"/student/1"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u83b7\u53d6id\u4e3a1\u7684\u5b66\u751f")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"PUT"),(0,l.kt)("td",{parentName:"tr",align:"left"},"/student/1"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u4fee\u6539id\u4e3a1\u7684\u5b66\u751f")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"DELETE"),(0,l.kt)("td",{parentName:"tr",align:"left"},"/student/1"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u5220\u9664id\u4e3a1\u7684\u5b66\u751f")))),(0,l.kt)("p",null,"restful\u89c4\u8303\u662f\u4e00\u79cd\u901a\u7528\u7684\u89c4\u8303\uff0c\u4e0d\u9650\u5236\u8bed\u8a00\u548c\u5f00\u53d1\u6846\u67b6\u7684\u4f7f\u7528\u3002\u4e8b\u5b9e\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u4e00\u95e8\u8bed\u8a00\uff0c\u4efb\u4f55\u4e00\u4e2a\u6846\u67b6\u90fd\u53ef\u4ee5\u5b9e\u73b0\u7b26\u5408restful\u89c4\u8303\u7684API\u63a5\u53e3\u3002"))}m.isMDXComponent=!0}}]);