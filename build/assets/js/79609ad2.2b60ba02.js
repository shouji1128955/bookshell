"use strict";(self.webpackChunkbookshell=self.webpackChunkbookshell||[]).push([[4400],{3905:(e,t,n)=>{n.d(t,{Zo:()=>g,kt:()=>u});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),p=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},g=function(e){var t=p(e.components);return a.createElement(o.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,g=s(e,["components","mdxType","originalType","parentName"]),m=p(n),d=r,u=m["".concat(o,".").concat(d)]||m[d]||c[d]||i;return n?a.createElement(u,l(l({ref:t},g),{},{components:n})):a.createElement(u,l({ref:t},g))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=d;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[m]="string"==typeof e?e:r,l[1]=s;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8979:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const i={},l=void 0,s={unversionedId:"DevOps/gitOps/Tekton-triggers",id:"DevOps/gitOps/Tekton-triggers",title:"Tekton-triggers",description:"Triggers\u4ecb\u7ecd",source:"@site/docs/DevOps/2-gitOps/6-Tekton-triggers.md",sourceDirName:"DevOps/2-gitOps",slug:"/DevOps/gitOps/Tekton-triggers",permalink:"/docs/DevOps/gitOps/Tekton-triggers",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DevOps/2-gitOps/6-Tekton-triggers.md",tags:[],version:"current",lastUpdatedBy:"AMiner",lastUpdatedAt:1719066785,formattedLastUpdatedAt:"2024\u5e746\u670822\u65e5",sidebarPosition:6,frontMatter:{},sidebar:"DevOpsGitOps",previous:{title:"Tektion-Workspaces",permalink:"/docs/DevOps/gitOps/Tekton-workspace"}},o={},p=[{value:"Triggers\u4ecb\u7ecd",id:"triggers\u4ecb\u7ecd",level:2},{value:"triggers\u5b89\u88c5",id:"triggers\u5b89\u88c5",level:2},{value:"\u5b89\u88c5\u89e6\u53d1\u5668",id:"\u5b89\u88c5\u89e6\u53d1\u5668",level:2},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}],g={toc:p},m="wrapper";function c(e){let{components:t,...i}=e;return(0,r.kt)(m,(0,a.Z)({},g,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"triggers\u4ecb\u7ecd"},"Triggers\u4ecb\u7ecd"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20230910223545524",src:n(1740).Z,width:"1342",height:"663"})),(0,r.kt)("p",null,"Triggers \u540c\u6837\u901a\u8fc7\u4e0b\u9762\u7684\u51e0\u4e2a CRD \u5bf9\u8c61\u5bf9 Tekton \u8fdb\u884c\u4e86\u4e00\u4e9b\u6269\u5c55\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TriggerTemplate"),": \u521b\u5efa\u8d44\u6e90\u7684\u6a21\u677f\uff0c\u6bd4\u5982\u7528\u6765\u521b\u5efa ",(0,r.kt)("inlineCode",{parentName:"li"},"PipelineResource")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"PipelineRun")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TriggerBinding"),": \u6821\u9a8c\u4e8b\u4ef6\u5e76\u63d0\u53d6\u76f8\u5173\u5b57\u6bb5\u5c5e\u6027"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ClusterTriggerBinding"),": \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"TriggerBinding")," \u7c7b\u4f3c\uff0c\u53ea\u662f\u662f\u5168\u5c40\u7684"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Interceptor"),": \u5904\u7406\u4e8b\u4ef6\u4ee5\u8fdb\u884c\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u6216\u8fc7\u6ee4\u7684\u62e6\u622a\u5668"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"EventListener"),": \u8fde\u63a5 ",(0,r.kt)("inlineCode",{parentName:"li"},"TriggerBinding")," \u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"TriggerTemplate")," \u5230\u4e8b\u4ef6\u63a5\u6536\u5668\uff0c\u4f7f\u7528\u4ece\u5404\u4e2a ",(0,r.kt)("inlineCode",{parentName:"li"},"TriggerBinding")," \u4e2d\u63d0\u53d6\u7684\u53c2\u6570\u6765\u521b\u5efa ",(0,r.kt)("inlineCode",{parentName:"li"},"TriggerTemplate")," \u4e2d\u6307\u5b9a\u7684 resources\uff0c\u540c\u6837\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"li"},"interceptor")," \u5b57\u6bb5\u6765\u6307\u5b9a\u5916\u90e8\u670d\u52a1\u5bf9\u4e8b\u4ef6\u5c5e\u6027\u8fdb\u884c\u9884\u5904\u7406")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20230910184456555",src:n(2197).Z,width:"849",height:"339"})),(0,r.kt)("p",null,"\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u89e6\u53d1\u5668\u5b9e\u73b0\u4ee5\u4e0b CI/CD \u5de5\u4f5c\u6d41\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"Triggers \u76d1\u542c ",(0,r.kt)("inlineCode",{parentName:"li"},"git commit")," \u6216 ",(0,r.kt)("inlineCode",{parentName:"li"},"git pull request")," \u4e8b\u4ef6\u3002\u5f53\u68c0\u6d4b\u5230\u65f6\uff0c\u5b83\u4f1a\u4f7f\u7528\u63d0\u4ea4\u7684\u4ee3\u7801\u6267\u884c\u4e00\u4e2a\u5355\u5143\u6d4b\u8bd5\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"Pipeline"),"\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"Triggers \u76d1\u542c\u6307\u793a\u6d4b\u8bd5\u6210\u529f\u5b8c\u6210\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"git push")," \u4e8b\u4ef6\uff0c\u5f53\u5b83\u68c0\u6d4b\u5230\u65f6\uff0c\u5b83\u4f1a\u9a8c\u8bc1\u6d4b\u8bd5\u7684\u7ed3\u679c\u5e76\u6267\u884c\u6784\u5efa\u6d4b\u8bd5\u4ee3\u7801\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"Pipeline"),"\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"\u5f53\u5173\u8054\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"PipelineRun")," \u6267\u884c\u5b8c\u6210\u65f6\uff0cTriggers \u68c0\u67e5\u6784\u5efa\u7684\u7ed3\u679c\uff0c\u5982\u679c\u6210\u529f\uff0c\u5219\u6267\u884c\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"li"},"Task"),"\uff0c\u5c06\u6784\u5efa\u7ed3\u679c\u4e0a\u4f20\u5230\u5bf9\u5e94\u7684 Docker \u955c\u50cf\u4ed3\u5e93\u3002"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"\u6700\u540e\uff0cDocker registry \u53d1\u9001\u4e00\u4e2a\u4e8b\u4ef6\u5230 ",(0,r.kt)("inlineCode",{parentName:"li"},"Pub/Sub"),"\uff0c\u8be5\u4e8b\u4ef6\u89e6\u53d1\u4e00\u4e2a\u5c06\u6784\u5efa\u955c\u50cf\u63a8\u9001\u5230 staging \u73af\u5883\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"Pipeline"))))),(0,r.kt)("h2",{id:"triggers\u5b89\u88c5"},"triggers\u5b89\u88c5"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/tektoncd/triggers/blob/main/releases.md"},"https://github.com/tektoncd/triggers/blob/main/releases.md")),(0,r.kt)("p",null,"\u8fd9\u91cc\u6211\u4f7f\u7528\u7684\u662fv0.22.2\u7248\u672c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl apply -f https://storage.googleapis.com/tekton-releases/triggers/previous/v0.22.2/release.yaml\nkubectl apply -f https://storage.googleapis.com/tekton-releases/triggers/previous/v0.22.2/interceptors.yaml\n")),(0,r.kt)("p",null,"kubernetes\u96c6\u7fa4\u7248\u672c: v1.23.6"),(0,r.kt)("p",null,"Triggers\u7248\u672c: 0.22.2"),(0,r.kt)("p",null,"\u56e0\u4e3a\u7f51\u7edc\u539f\u56e0\uff0c\u6211\u5df2\u7ecf\u540c\u6b65\u5230\u963f\u91cc\u4e91\uff0c\u6839\u636e\u4e0a\u9762\u7248\u672c\u8fdb\u884c\u66ff\u6362\u4e0b\u9762\u7248\u672c\u5373\u53ef"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'image: "registry.cn-hangzhou.aliyuncs.com/zlq_registry/interceptors:v0.22.2"\nimage: "registry.cn-hangzhou.aliyuncs.com/zlq_registry/controller:v0.22.2"\nregistry.cn-hangzhou.aliyuncs.com/zlq_registry/eventlistenersink:v0.22.2\n\nimage: "registry.cn-hangzhou.aliyuncs.com/zlq_registry/webhook:v0.22.2"\n')),(0,r.kt)("p",null,"\u5b89\u88c5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"https://www.zlqit.com/devops/kubernetes/tekton/release.yaml\nhttps://www.zlqit.com/devops/kubernetes/tekton/interceptors.yaml\n")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20230910180912288",src:n(962).Z,width:"1178",height:"896"})),(0,r.kt)("p",null,"\u5b89\u88c5"),(0,r.kt)("p",null,"\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770b Triggers \u7684\u76f8\u5173\u7ec4\u4ef6\u5b89\u88c5\u72b6\u6001\uff0c\u76f4\u5230\u90fd\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"Running")," \u72b6\u6001\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"root@k8s-master:~/tekton/demo/pipline-triggers# kubectl  get pods -n tekton-pipelines\nNAME                                                 READY   STATUS    RESTARTS        AGE\ntekton-dashboard-86dc7648d5-gjx6q                    1/1     Running   9 (126m ago)    7d20h\ntekton-pipelines-controller-6bcb64d9b9-stpbm         1/1     Running   23 (128m ago)   21d\ntekton-pipelines-webhook-787486d884-x2v7b            1/1     Running   21 (125m ago)   21d\ntekton-triggers-controller-74dccbdd79-md6sb          1/1     Running   0               13m\ntekton-triggers-core-interceptors-579b9cd556-d6n96   1/1     Running   0               9m6s\ntekton-triggers-webhook-86d487889-rs4t6              1/1     Running   0               13m\n")),(0,r.kt)("p",null,"\u73b0\u5728\u6211\u4eec\u6765\u5c06\u524d\u9762\u7684 Jenkins Pipeline \u6d41\u6c34\u7ebf\u8f6c\u6362\u6210\u4f7f\u7528 Tekton \u6765\u6784\u5efa\uff0c\u4ee3\u7801\u6211\u4eec\u5df2\u7ecf\u63a8\u9001\u5230\u4e86\u79c1\u6709\u4ed3\u5e93 GitLab\uff0c\u5730\u5740\u4e3a\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://gitee.com/zhang_lai_qiang/golang-test.git%E3%80%82"},"https://gitee.com/zhang_lai_qiang/golang-test.git\u3002")),(0,r.kt)("p",null,"\u9996\u5148\u6211\u4eec\u9700\u8981\u5b8c\u6210\u89e6\u53d1\u5668\u7684\u914d\u7f6e\uff0c\u5f53\u6211\u4eec\u63d0\u4ea4\u6e90\u4ee3\u7801\u5230 GitLab \u7684\u65f6\u5019\uff0c\u9700\u8981\u89e6\u53d1 Tekton \u7684\u4efb\u52a1\u8fd0\u884c\uff0c\u6240\u4ee5\u9996\u5148\u9700\u8981\u5b8c\u6210\u8fd9\u4e2a\u89e6\u53d1\u5668\u3002\u8fd9\u91cc\u5c31\u53ef\u4ee5\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"EventListener")," \u8fd9\u4e2a\u8d44\u6e90\u5bf9\u8c61\u6765\u5b8c\u6210\uff0c\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"gitlab-listener")," \u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"EventListener")," \u8d44\u6e90\u5bf9\u8c61\uff0c\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\u6240\u793a\uff1a"),(0,r.kt)("p",null,"\u4e0b\u9762\u662f\u4e00\u4e9b\u62e6\u622a\u5668\u7684\u8d44\u6e90"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"root@k8s-master:~/tekton/demo/pipline-triggers# kubectl  get clusterinterceptor\nNAME        AGE\nbitbucket   3h3m\ncel         3h3m\ngithub      3h3m\ngitlab      3h3m\n")),(0,r.kt)("h2",{id:"\u5b89\u88c5\u89e6\u53d1\u5668"},"\u5b89\u88c5\u89e6\u53d1\u5668"),(0,r.kt)("p",null,"\u9996\u5148\u6211\u4eec\u9700\u8981\u5b8c\u6210\u89e6\u53d1\u5668\u7684\u914d\u7f6e\uff0c\u5f53\u6211\u4eec\u63d0\u4ea4\u6e90\u4ee3\u7801\u5230 GitLab \u7684\u65f6\u5019\uff0c\u9700\u8981\u89e6\u53d1 Tekton \u7684\u4efb\u52a1\u8fd0\u884c\uff0c\u6240\u4ee5\u9996\u5148\u9700\u8981\u5b8c\u6210\u8fd9\u4e2a\u89e6\u53d1\u5668\u3002\u8fd9\u91cc\u5c31\u53ef\u4ee5\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"EventListener")," \u8fd9\u4e2a\u8d44\u6e90\u5bf9\u8c61\u6765\u5b8c\u6210\uff0c\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"gitlab-listener")," \u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"EventListener")," \u8d44\u6e90\u5bf9\u8c61\uff0c\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\u6240\u793a\uff1a"),(0,r.kt)("p",null,"\u200b\t"),(0,r.kt)("p",null,"root@k8s-master:~/tekton/demo/pipline-triggers# cat ~/markdown.md "),(0,r.kt)("p",null,"event-listener-rbac.yaml"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: tekton-triggers-gitlab-sa\nsecrets:\n  - name: gitlab-auth\n  - name: gitlab-secret\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  name: tekton-triggers-gitlab-minimal\nrules:\n  # EventListeners need to be able to fetch all namespaced resources\n  - apiGroups: ["triggers.tekton.dev"]\n    resources:\n      ["eventlisteners", "triggerbindings","interceptors","triggertemplates", "triggers"]\n    verbs: ["get", "list", "watch"]\n  - apiGroups: [""]\n    # configmaps is needed for updating logging config\n    resources: ["configmaps"]\n    verbs: ["get", "list", "watch"]\n  # Permissions to create resources in associated TriggerTemplates\n  - apiGroups: ["tekton.dev"]\n    resources: ["pipelineruns", "pipelineresources", "taskruns"]\n    verbs: ["create"]\n  - apiGroups: [""]\n    resources: ["serviceaccounts"]\n    verbs: ["impersonate"]\n  - apiGroups: ["policy"]\n    resources: ["podsecuritypolicies"]\n    resourceNames: ["tekton-triggers"]\n    verbs: ["use"]\n  - apiGroups: ["interceptors.triggers.tekton.dev"]\n    resources:\n      ["eventlisteners", "triggerbindings", "triggertemplates", "interceptors"]\n    verbs: ["get", "list", "watch"]    \n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: RoleBinding\nmetadata:\n  name: tekton-triggers-gitlab-binding\nsubjects:\n  - kind: ServiceAccount\n    name: tekton-triggers-gitlab-sa\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: Role\n  name: tekton-triggers-gitlab-minimal\n---\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1\nmetadata:\n  name: tekton-triggers-gitlab-clusterrole\nrules:\n  # EventListeners need to be able to fetch any clustertriggerbindings\n  - apiGroups: ["triggers.tekton.dev"]\n    resources: ["clustertriggerbindings", "clusterinterceptors"]\n    verbs: ["get", "list", "watch"]\n  - apiGroups: ["interceptors.triggers.tekton.dev"]\n    resources:\n      ["eventlisteners", "triggerbindings", "triggertemplates", "interceptors"]\n    verbs: ["get", "list", "watch"]\n\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: tekton-triggers-gitlab-clusterbinding\nsubjects:\n  - kind: ServiceAccount\n    name: tekton-triggers-gitlab-sa\n    namespace: default\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: tekton-triggers-gitlab-clusterrole\n')),(0,r.kt)("p",null,"\u73b0\u5728\u6211\u4eec\u6765\u5c06\u524d\u9762\u7684 Jenkins Pipeline \u6d41\u6c34\u7ebf\u8f6c\u6362\u6210\u4f7f\u7528 Tekton \u6765\u6784\u5efa\uff0c\u4ee3\u7801\u6211\u4eec\u5df2\u7ecf\u63a8\u9001\u5230\u4e86\u79c1\u6709\u4ed3\u5e93 GitLab\uff0c\u5730\u5740\u4e3a\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"http://git.k8s.local/course/devops-demo.git"),"\u3002"),(0,r.kt)("p",null,"\u9996\u5148\u6211\u4eec\u9700\u8981\u5b8c\u6210\u89e6\u53d1\u5668\u7684\u914d\u7f6e\uff0c\u5f53\u6211\u4eec\u63d0\u4ea4\u6e90\u4ee3\u7801\u5230 GitLab \u7684\u65f6\u5019\uff0c\u9700\u8981\u89e6\u53d1 Tekton \u7684\u4efb\u52a1\u8fd0\u884c\uff0c\u6240\u4ee5\u9996\u5148\u9700\u8981\u5b8c\u6210\u8fd9\u4e2a\u89e6\u53d1\u5668\u3002\u8fd9\u91cc\u5c31\u53ef\u4ee5\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"EventListener")," \u8fd9\u4e2a\u8d44\u6e90\u5bf9\u8c61\u6765\u5b8c\u6210\uff0c\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"gitlab-listener")," \u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"EventListener")," \u8d44\u6e90\u5bf9\u8c61\uff0c\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\u6240\u793a\uff1a"),(0,r.kt)("p",null,"gitee-push-listener.yaml"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"# gitlab-push-listener.yaml\napiVersion: triggers.tekton.dev/v1beta1\nkind: EventListener\nmetadata:\n  name: gitlab-listener # \u8be5\u4e8b\u4ef6\u76d1\u542c\u5668\u4f1a\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a el-gitlab-listener \u7684Service\u5bf9\u8c61\nspec:\n  serviceAccountName: tekton-triggers-gitlab-sa \n  triggers:\n    - name: gitlab-push-events-trigger\n      interceptors:\n        - ref:\n            name: gitlab\n          params:\n            - name: secretRef # \u5f15\u7528 gitlab-secret \u7684 Secret \u5bf9\u8c61\u4e2d\u7684 secretToken \u7684\u503c\n              value:\n                secretName: gitlab-secret\n                secretKey: secretToken\n            - name: eventTypes\n              value:\n                - Push Hook # \u53ea\u63a5\u6536 GitLab Push \u4e8b\u4ef6\n      bindings:\n        - ref: devops-demo-binding\n      template:\n        ref: devops-demo-template\n")),(0,r.kt)("p",null,"\u7531\u4e8e ",(0,r.kt)("inlineCode",{parentName:"p"},"EventListener")," \u521b\u5efa\u5b8c\u6210\u540e\u4f1a\u751f\u6210\u4e00\u4e2a Listener \u7684\u670d\u52a1\uff0c\u7528\u6765\u5bf9\u5916\u66b4\u9732\u7528\u4e8e\u63a5\u6536\u4e8b\u4ef6\u54cd\u5e94\uff0c\u6bd4\u5982\u4e0a\u9762\u6211\u4eec\u521b\u5efa\u7684\u5bf9\u8c61\u540d\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"gitlab-listener"),"\uff0c\u521b\u5efa\u5b8c\u6210\u540e\u4f1a\u751f\u6210\u4e00\u4e2a\u540d\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"el-gitlab-listener")," \u7684 Service \u5bf9\u8c61\uff0c\u7531\u4e8e\u6211\u4eec GitLab \u672c\u8eab\u5c31\u5728\u96c6\u7fa4\u5185\u90e8\uff0c\u6240\u4ee5\u6211\u4eec\u7528 Service \u7684 DNS \u5f62\u5f0f\u6765\u8bbf\u95ee ",(0,r.kt)("inlineCode",{parentName:"p"},"EventListener")," \u5373\u53ef\uff0c\u5982\u679c\u4f60\u60f3\u66b4\u9732\u5230\u96c6\u7fa4\u5916\u90e8\u5219\u53ef\u4ee5\u4f7f\u7528 NodePort \u6216\u8005 Ingress \u7684\u5f62\u5f0f\u3002"),(0,r.kt)("p",null,"\u53e6\u5916\u9700\u8981\u6ce8\u610f\u7684\u662f\u5728\u4e0a\u9762\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"EventListener")," \u5bf9\u8c61\u4e2d\u6211\u4eec\u6dfb\u52a0\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},"interceptors")," \u5c5e\u6027\uff0c\u5176\u4e2d\u6709\u4e00\u4e2a\u5185\u7f6e\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"gitlab")," \u62e6\u622a\u5668\uff0cGitLab \u62e6\u622a\u5668\u5305\u542b\u9a8c\u8bc1\u548c\u8fc7\u6ee4\u6765\u81ea GitLab \u7684\u8bf7\u6c42\u903b\u8f91\uff0c \u6bd4\u5982\u6211\u4eec\u53ef\u4ee5\u914d\u7f6e WebHook \u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"Secret Token"),"\uff0c\u53ef\u4ee5\u901a\u8fc7 Secret \u5bf9\u8c61\u5f15\u5165\u8fdb\u6765\uff1a"),(0,r.kt)("p",null,"\u5bf9\u5e94\u7684 Secret \u8d44\u6e90\u5bf9\u8c61\u5982\u4e0b\u6240\u793a\uff0c\u4e00\u4e2a\u7528\u4e8e WebHook \u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"Secret Token"),"\uff0c\u53e6\u5916\u4e00\u4e2a\u662f\u7528\u4e8e GitLab \u767b\u5f55\u8ba4\u8bc1\u4f7f\u7528\u7684\uff1a"),(0,r.kt)("p",null,"secret-gitlab.yaml"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: v1\nkind: Secret\nmetadata:\n  name: gitlab-secret\ntype: Opaque\nstringData:\n  secretToken: "1234567"\n')),(0,r.kt)("p",null,"secret.yaml"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: v1\nkind: Secret\nmetadata:\n  name: gitlab-auth\n  annotations:\n    tekton.dev/git-0: http://gitlab.kube-ops.svc.cluster.local # Described below\ntype: kubernetes.io/basic-auth\nstringData:\n  username: root\n  password: admin321\n")),(0,r.kt)("p",null,"\u8fd9\u6837\u5c31\u53ef\u4ee5\u5c06 ",(0,r.kt)("inlineCode",{parentName:"p"},"TriggerBinding")," \u4e2d\u7684\u53c2\u6570\u4f20\u9012\u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"TriggerTemplate")," \u5bf9\u8c61\u4e2d\u8fdb\u884c\u6a21\u677f\u5316\u3002\u6bd4\u5982\u8fd9\u91cc\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u5982\u4e0b\u6240\u793a\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"TriggerBinding")," \u5bf9\u8c61\uff1a"),(0,r.kt)("p",null,"TriggerBinding.yaml"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: triggers.tekton.dev/v1beta1\nkind: TriggerBinding\nmetadata:\n  name: devops-demo-binding\nspec:\n  params:\n    - name: gitrevision\n      value: $(body.checkout_sha)\n    - name: gitrepositoryurl\n      value: $(body.repository.git_http_url)\n")),(0,r.kt)("p",null,"\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\u53c2\u6570\u7684\u503c\u6211\u4eec\u662f\u901a\u8fc7\u8bfb\u53d6 ",(0,r.kt)("inlineCode",{parentName:"p"},"GitLab WebHook")," \u53d1\u9001\u8fc7\u6765\u7684\u6570\u636e\u503c\uff0c\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"$()")," \u5305\u88f9\u7684 JSONPath \u8868\u8fbe\u5f0f\u6765\u63d0\u53d6\u7684\uff0c\u5173\u4e8e\u8868\u8fbe\u5f0f\u7684\u66f4\u591a\u7528\u6cd5\u53ef\u4ee5\u67e5\u770b",(0,r.kt)("a",{parentName:"p",href:"https://github.com/tektoncd/triggers/blob/master/docs/triggerbindings.md#event-variable-interpolation"},"\u5b98\u65b9\u6587\u6863\u8bf4\u660e"),"\uff0c\u81f3\u4e8e\u80fd\u591f\u63d0\u53d6\u54ea\u4e9b\u53c2\u6570\u503c\uff0c\u5219\u53ef\u4ee5\u67e5\u770b WebHook \u7684\u8bf4\u660e\uff0c\u6bd4\u5982\u8fd9\u91cc\u6211\u4eec\u662f GitLab Webhook \u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"Push Hook"),"\uff0c\u5bf9\u5e94\u7684\u8bf7\u6c42\u4f53\u6570\u636e\u5982\u4e0b\u6240\u793a\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'{\n  "object_kind": "push",\n  "before": "95790bf891e76fee5e1747ab589903a6a1f80f22",\n  "after": "da1560886d4f094c3e6c9ef40349f7d38b5d27d7",\n  "ref": "refs/heads/master",\n  "checkout_sha": "da1560886d4f094c3e6c9ef40349f7d38b5d27d7",\n  "user_id": 4,\n  "user_name": "John Smith",\n  "user_username": "jsmith",\n  "user_email": "john@example.com",\n  "user_avatar": "https://s.gravatar.com/avatar/d4c74594d841139328695756648b6bd6?s=8://s.gravatar.com/avatar/d4c74594d841139328695756648b6bd6?s=80",\n  "project_id": 15,\n  "project": {\n    "id": 15,\n    "name": "Diaspora",\n    "description": "",\n    "web_url": "http://example.com/mike/diaspora",\n    "avatar_url": null,\n    "git_ssh_url": "git@example.com:mike/diaspora.git",\n    "git_http_url": "http://example.com/mike/diaspora.git",\n    "namespace": "Mike",\n    "visibility_level": 0,\n    "path_with_namespace": "mike/diaspora",\n    "default_branch": "master",\n    "homepage": "http://example.com/mike/diaspora",\n    "url": "git@example.com:mike/diaspora.git",\n    "ssh_url": "git@example.com:mike/diaspora.git",\n    "http_url": "http://example.com/mike/diaspora.git"\n  },\n  "repository": {\n    "name": "Diaspora",\n    "url": "git@example.com:mike/diaspora.git",\n    "description": "",\n    "homepage": "http://example.com/mike/diaspora",\n    "git_http_url": "http://example.com/mike/diaspora.git",\n    "git_ssh_url": "git@example.com:mike/diaspora.git",\n    "visibility_level": 0\n  },\n  "commits": [\n    {\n      "id": "b6568db1bc1dcd7f8b4d5a946b0b91f9dacd7327",\n      "message": "Update Catalan translation to e38cb41.\\n\\nSee https://gitlab.com/gitlab-org/gitlab for more information",\n      "title": "Update Catalan translation to e38cb41.",\n      "timestamp": "2011-12-12T14:27:31+02:00",\n      "url": "http://example.com/mike/diaspora/commit/b6568db1bc1dcd7f8b4d5a946b0b91f9dacd7327",\n      "author": {\n        "name": "Jordi Mallach",\n        "email": "jordi@softcatala.org"\n      },\n      "added": ["CHANGELOG"],\n      "modified": ["app/controller/application.rb"],\n      "removed": []\n    },\n    {\n      "id": "da1560886d4f094c3e6c9ef40349f7d38b5d27d7",\n      "message": "fixed readme",\n      "title": "fixed readme",\n      "timestamp": "2012-01-03T23:36:29+02:00",\n      "url": "http://example.com/mike/diaspora/commit/da1560886d4f094c3e6c9ef40349f7d38b5d27d7",\n      "author": {\n        "name": "GitLab dev user",\n        "email": "gitlabdev@dv6700.(none)"\n      },\n      "added": ["CHANGELOG"],\n      "modified": ["app/controller/application.rb"],\n      "removed": []\n    }\n  ],\n  "total_commits_count": 4\n}\n\n')),(0,r.kt)("p",null,"\u8bf7\u6c42\u4f53\u4e2d\u7684\u4efb\u4f55\u5c5e\u6027\u90fd\u53ef\u4ee5\u63d0\u53d6\u51fa\u6765\uff0c\u4f5c\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"TriggerBinding")," \u7684\u53c2\u6570\uff0c\u5982\u679c\u662f\u5176\u4ed6\u7684 Hook \u4e8b\u4ef6\uff0c\u5bf9\u5e94\u7684\u8bf7\u6c42\u4f53\u7ed3\u6784\u53ef\u4ee5",(0,r.kt)("a",{parentName:"p",href:"https://docs.gitlab.com/ce/user/project/integrations/webhooks.html"},"\u67e5\u770b GitLab \u6587\u6863\u8bf4\u660e"),"\u3002"),(0,r.kt)("p",null,"\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"TriggerTemplate")," \u5bf9\u8c61\u4e2d\u901a\u8fc7\u53c2\u6570\u6765\u8bfb\u53d6\u4e0a\u9762 ",(0,r.kt)("inlineCode",{parentName:"p"},"TriggerBinding")," \u4e2d\u5b9a\u4e49\u7684\u53c2\u6570\u503c\u4e86\uff0c\u5b9a\u4e49\u4e00\u4e2a\u5982\u4e0b\u6240\u793a\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"TriggerTemplate")," \u5bf9\u8c61\uff0c\u58f0\u660e\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"TaskRun")," \u7684\u6a21\u677f\uff0c\u5b9a\u4e49\u7684 Task \u4efb\u52a1\u4e5f\u975e\u5e38\u7b80\u5355\uff0c\u53ea\u9700\u8981\u5728\u5bb9\u5668\u4e2d\u6253\u5370\u51fa\u4ee3\u7801\u7684\u76ee\u5f55\u7ed3\u6784\u5373\u53ef\uff1a"),(0,r.kt)("p",null,"TriggerTemplate.yaml"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: triggers.tekton.dev/v1beta1\nkind: TriggerTemplate\nmetadata:\n  name: devops-demo-template\nspec:\n  params: # \u5b9a\u4e49\u53c2\u6570\uff0c\u548c TriggerBinding \u4e2d\u7684\u4fdd\u6301\u4e00\u81f4\n    - name: gitrevision\n    - name: gitrepositoryurl\n  resourcetemplates: # \u5b9a\u4e49\u8d44\u6e90\u6a21\u677f\n    - apiVersion: tekton.dev/v1beta1\n      kind: TaskRun # \u5b9a\u4e49 TaskRun \u6a21\u677f\n      metadata:\n        generateName: gitlab-run- # TaskRun \u540d\u79f0\u524d\u7f00\n      spec:\n        serviceAccountName: tekton-triggers-gitlab-sa\n        taskSpec: # Task \u4efb\u52a1\u58f0\u660e\n          resources:\n            inputs: # \u5b9a\u4e49\u4e00\u4e2a\u540d\u4e3a source \u7684 git \u8f93\u5165\u8d44\u6e90\n              - name: source\n                type: git\n          steps:\n            - name: show-path\n              image: ubuntu # \u5b9a\u4e49\u4e00\u4e2a\u6267\u884c\u6b65\u9aa4\uff0c\u5217\u51fa\u4ee3\u7801\u76ee\u5f55\u7ed3\u6784\n              script: |\n                #! /bin/bash\n                ls -la $(resources.inputs.source.path)\n        resources: # \u58f0\u660e\u5177\u4f53\u7684\u8f93\u5165\u8d44\u6e90\u53c2\u6570\n          inputs:\n            - name: source # \u548c Task \u4e2d\u7684\u8d44\u6e90\u540d\u4fdd\u6301\u4e00\u76f4\n              resourceSpec: # \u8d44\u6e90\u58f0\u660e\n                type: git\n                params:\n                  - name: revision\n                    value: $(tt.params.gitrevision) # \u8bfb\u53d6\u53c2\u6570\u503c\n                  - name: url\n                    value: $(tt.params.gitrepositoryurl)\n")),(0,r.kt)("p",null,"\u9700\u8981\u6ce8\u610f\u5728\u6700\u540e\u7684 pipelineresource \u4e2d\u5f15\u7528\u53c2\u6570\u503c\u7684\u65f6\u5019\u4f7f\u7528\u4e86\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"tt")," \u7684\u524d\u7f00\u3002\u5b9a\u4e49\u5b8c\u8fc7\u540e\uff0c\u76f4\u63a5\u521b\u5efa\u4e0a\u9762\u7684\u8d44\u6e90\u5bf9\u8c61\uff0c\u521b\u5efa\u5b8c\u6210\u540e\u4f1a\u81ea\u52a8\u751f\u6210 ",(0,r.kt)("inlineCode",{parentName:"p"},"EventListener")," \u7684 Pod \u548c Service \u5bf9\u8c61\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"\nroot@k8s-master:~/gitlab-install# kubectl get svc -l eventlistener=gitlab-listener\nNAME                 TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)             AGE\nel-gitlab-listener   ClusterIP   10.107.99.121   <none>        8080/TCP,9000/TCP   135m\nroot@k8s-master:~/gitlab-install# kubectl get pod -l eventlistener=gitlab-listener\nNAME                                 READY   STATUS    RESTARTS   AGE\nel-gitlab-listener-cff57b6cf-qpdsr   1/1     Running   0          135m\nroot@k8s-master:~/gitlab-install# kubectl get eventlistener\nNAME              ADDRESS                                                    AVAILABLE   REASON                     READY   REASON\ngitlab-listener   http://el-gitlab-listener.default.svc.cluster.local:8080   True        MinimumReplicasAvailable   True \n")),(0,r.kt)("p",null,"gitlab\u914d\u7f6e"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20230912011738813",src:n(3902).Z,width:"956",height:"113"})),(0,r.kt)("p",null,"\u9996\u5148\u6307\u5b9agitlab\u5730\u5740\uff0c\u8fd9\u4e2a\u5730\u5740\u5c31\u4f1alistener\u62c9\u53d6\u4ee3\u7801\u7684\u65f6\u5019\u4f1a\u7528\u5230\u3002\u6211\u8fd9\u91cc\u914d\u7f6e\u4e3asvc\u5730\u5740\uff0c\u751f\u4ea7\u73af\u5883\u76f4\u63a5\u53ef\u4ee5\u914d\u7f6e\u4e3a\u80fd\u591f\u901a\u8fc7\u5916\u7f51\u8bbf\u95ee\u7684\u5730\u5740\u3002"),(0,r.kt)("p",null,"\u786e\u8ba4\u8bbf\u95ee\u5730\u5740"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20230912012207070",src:n(9485).Z,width:"1257",height:"494"})),(0,r.kt)("p",null,"\u786e\u4fdd\u914d\u7f6e\u540e\u5982\u4e0a\u56fe\uff0c\u80fd\u591f\u5728\u96c6\u7fa4\u4e2d\u670d\u52a1\u80fd\u591f\u8bf7\u6c42\u5230\u4ed3\u5e93\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20230911231017910",src:n(4091).Z,width:"1729",height:"864"})),(0,r.kt)("p",null,"\u6d4b\u8bd5"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20230911231102745",src:n(4577).Z,width:"1809",height:"856"})),(0,r.kt)("p",null,"\u6dfb\u52a0webhook"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20230911231137011",src:n(2338).Z,width:"1338",height:"814"})),(0,r.kt)("p",null,"\u521b\u5efa\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u6d4b\u8bd5\u4e0b\u8be5 WebHook \u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"Push events")," \u4e8b\u4ef6\uff0c\u76f4\u63a5\u70b9\u51fb\u6d4b\u8bd5\u5373\u53ef\uff08\u5982\u679c\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u57df\u540d\u5219\u9700\u8981\u5728 coredns \u4e2d\u6dfb\u52a0\u6620\u5c04\uff09\uff0c\u6b63\u5e38\u4f1a\u8fd4\u56de ",(0,r.kt)("inlineCode",{parentName:"p"},"Hook executed successfully: HTTP 202")," \u7684\u63d0\u793a\u4fe1\u606f\uff0c\u8fd9\u4e2a\u65f6\u5019\u5728 Kubernetes \u96c6\u7fa4\u4e2d\u5c31\u4f1a\u51fa\u73b0\u5982\u4e0b\u6240\u793a\u7684\u4efb\u52a1 Pod"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'root@k8s-master:~/gitlab-install# kubectl get pods -l triggers.tekton.dev/eventlistener=gitlab-listener\nNAME                   READY   STATUS      RESTARTS   AGE\ngitlab-run-228g4-pod   0/2     Completed   0          10m\n\nroot@k8s-master:~/gitlab-install# kubectl get taskrun -l triggers.tekton.dev/eventlistener=gitlab-listener\nNAME               SUCCEEDED   REASON      STARTTIME   COMPLETIONTIME\ngitlab-run-228g4   True        Succeeded   11m         10m\n\nroot@k8s-master:~/gitlab-install# tkn taskrun logs gitlab-run-228g4\n[git-source-source-j4jkp] {"level":"info","ts":1694452832.0582829,"caller":"git/git.go:176","msg":"Successfully cloned http://gitlab.kube-ops.svc.cluster.local/root/springboot-helloworld.git @ 41c7823dddbef43680a0726ccea0631519b9d3c1 (grafted, HEAD) in path /workspace/source"}\n[git-source-source-j4jkp] {"level":"info","ts":1694452832.0842206,"caller":"git/git.go:215","msg":"Successfully initialized and updated submodules in path /workspace/source"}\n\n[show-path] total 40\n[show-path] drwxr-xr-x 4 root root 4096 Sep 11 17:20 .\n[show-path] drwxrwxrwx 3 root root 4096 Sep 11 17:20 ..\n[show-path] drwxr-xr-x 8 root root 4096 Sep 11 17:20 .git\n[show-path] -rw-r--r-- 1 root root   18 Sep 11 17:20 .gitignore\n[show-path] -rw-r--r-- 1 root root  408 Sep 11 17:20 .travis.yml\n[show-path] -rw-r--r-- 1 root root  537 Sep 11 17:20 Dockerfile\n[show-path] -rw-r--r-- 1 root root   38 Sep 11 17:20 Procfile\n[show-path] -rw-r--r-- 1 root root  969 Sep 11 17:20 README.md\n[show-path] -rw-r--r-- 1 root root 2160 Sep 11 17:20 pom.xml\n[show-path] drwxr-xr-x 4 root root 4096 Sep 11 17:20 src\n')),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20230911231212394",src:n(8637).Z,width:"1906",height:"563"})),(0,r.kt)("p",null,"\u5230\u8fd9\u91cc\u6211\u4eec\u5c31\u5b8c\u6210\u4e86\u901a\u8fc7 GitLab \u7684 Push \u4e8b\u4ef6\u6765\u89e6\u53d1 Tekton \u7684\u4e00\u4e2a\u4efb\u52a1\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20230912013041954",src:n(1667).Z,width:"1890",height:"684"})),(0,r.kt)("h2",{id:"\u603b\u7ed3"},"\u603b\u7ed3"),(0,r.kt)("p",null,"\u5751\uff1a rbac\u7684\u6388\u6743\uff0c\u6839\u636e\u62a5\u9519\u8fdb\u884c\u5904\u7406\uff0c\u5426\u5219\u670d\u52a1\u542f\u52a8"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20230912014829531",src:n(3139).Z,width:"1920",height:"309"})),(0,r.kt)("p",null,"gitlab\u5728k8s\u96c6\u7fa4\u5185\u90e8\u80fd\u591f\u8bbf\u95ee\u5230\u5373\u53ef"))}c.isMDXComponent=!0},962:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20230910180912288-d752f6b4a03ca240bd7c1d4b59d5c492.png"},2197:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20230910184456555-ac0ab20bdde41d4007c0e1b0b968bb27.png"},1740:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20230910223545524-ef3c14023a6a01d7c0bade2cf5f277b2.png"},4091:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20230911231017910-6ca4bdd05c8a1c6ae13b3ef413cd8960.png"},4577:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20230911231102745-d077b3acff95a75b986703f963c7ba48.png"},2338:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20230911231137011-aedde0d7240c46607ca9b9764f9d0d31.png"},8637:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20230911231212394-b40e88396b2b7f54b6ef2cb2cd15a407.png"},3902:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20230912011738813-587fd74553f999a2b0f077ea53c3903a.png"},9485:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20230912012207070-6eb83f7d24931169c510e1e03617a768.png"},1667:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20230912013041954-aba093c9686e1b6fcff7fc76b6c12fbb.png"},3139:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20230912014829531-c281527e82caa7940a0bcd083f600372.png"}}]);