

## 创建逻辑卷



| 类别 | 主引导方式 | 主分区数量 | 最大容量                     | 支持多少位系统 | 分区方法 |
| ---- | ---------- | ---------- | ---------------------------- | -------------- | -------- |
| MBR  | BIOS+MBR   | 4          | 2T                           | 32和64         | fdisk    |
| GPT  | UEFI+GPT   | 128        | 18EB（1EB=1024PB=1048576TB） | 64             | parted   |



### Parted分区和创建逻辑卷LVM

```shell
1. parted -l  #查看所有磁盘状态
2. parted /dev/vdb   #通过parted工具来创建大于2T的分区
3. mklabel gpt   #创建创建磁盘标签
4. mkpart primary 0% 100% #创建整个分区
5. q #退出

#其他命令
-------------------
(parted) mklabel    #创建创建磁盘标签
New disk labeltype? gpt
(parted) p  #查看分区状态
(parted) mkpart
Partition name? []? gpt2t   #指定分区名称
File system type? [ext2]ext3    #指定分区类型
Start? 1    #指定开始位置
End? 2190GB #指定结束位置
(parted) P  #显示分区信息
(parted) Q  #退出
```



### 创建逻辑卷的过程：

```shell
1. fdiks -l #查看分区
2. pvcreate /dev/vdb1  #创建pv物理卷
3. vgcreate vgdata /dev/vdb1  #创建vg卷组
4. lvcreate -l +100%FREE -n lvdata vgdata #创建lv逻辑卷
5. mkfs.xfs /dev/mapper/vgdata-lvdata #格式化逻辑卷
6. mkdir /data   #创建数据文件夹
7. mount /dev/mapper/vgdata-lvdata /data #将逻辑卷挂载到/data
8. vim /etc/fastab  #添加开机挂载
	/dev/mapper/vgdata-lvdata /data  xfs  defaults 0 0 
9. mount -a #检查挂载
```



创建号之后拓展
https://blog.csdn.net/qq_25775675/article/details/122126865

https://blog.csdn.net/qq_25775675/article/details/122126865
https://zhuanlan.zhihu.com/p/602888861







## 逻辑卷扩展



如果是创建系统给了3.7的空间，在创建完系统之后只有200G,需要如下进行处理

**扩展逻辑卷：**

- 使用`lvdisplay`命令查看逻辑卷的详细信息，确认卷组中是否有未分配的空间。
- 如果有未分配的空间，可以使用`lvextend`命令来扩展逻辑卷。例如，如果你的逻辑卷名为`lv_root`，并且有未分配的空间，你可以运行以下命令

```shell
lvextend -l +100%FREE /dev/mapper/vg_name-lv_root
```

lvextend -l +100%FREE /dev/mapper/vg_name-lv_root





**扩展文件系统：**

- 如果你成功扩展了逻辑卷，接下来需要扩展文件系统以使用新的空间。如果你使用的是ext4文件系统，可以使用`resize2fs`命令：

```shell
resize2fs /dev/mapper/vg_name-lv_root
```



如果你使用的是XFS文件系统，可以使用`xfs_growfs`命令：

```
xfs_growfs /dev/mapper/vg_name-lv_root
```



![img](images/企业微信截图_17021046973425.png)





请注意，以上命令中的`vg_name`和`lv_root`可能需要根据你的实际情况进行替换。确保在执行任何涉及磁盘和分区操作的命令之前备份重要数据，以防万一发生意外。





