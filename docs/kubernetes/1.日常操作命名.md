

### 打印所有pod使用的镜像

![](./images/20231012182503.png)
###  清理k8s各个节点的镜像,需要验证

```shell
for i in `kubectl get nodes -o jsonpath='{range .items[*]}{.status.addresses[0].address}{"\n"}{end}' `; do
    ssh -i XXX USER@$i 'docker image prune -a -f'; exit 0
done
```


###  其他命令
```shell
kubectl get nodes -o jsonpath='{range .items[*]}{.status.addresses[?(@.type=="InternalIP")].address}{"\n"}{end}'
```



patch镜像

```shell
kubectl patch deployment itz-test-aaa   --patch '{"spec": {"template": {"spec": {"containers": [{"name": "tz-test-aaa-1","image":"harbor.zlqit.com/tz_aaa/tz-test-aaa:1.1.93"}]}}}}' -n  tz-aaa
```





## configmap热更新插件

https://github.com/stakater/Reloader